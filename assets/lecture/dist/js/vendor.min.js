if(function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a,b){b=b||ba;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}function d(a){var b=!!a&&"length"in a&&a.length,c=oa.type(a);return"function"!==c&&!oa.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}function e(a,b,c){return oa.isFunction(b)?oa.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?oa.grep(a,function(a){return a===b!==c}):"string"!=typeof b?oa.grep(a,function(a){return ga.call(b,a)>-1!==c}):ya.test(b)?oa.filter(b,a,c):(b=oa.filter(b,a),oa.grep(a,function(a){return ga.call(b,a)>-1!==c&&1===a.nodeType}))}function f(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function g(a){var b={};return oa.each(a.match(Da)||[],function(a,c){b[c]=!0}),b}function h(a){return a}function i(a){throw a}function j(a,b,c){var d;try{a&&oa.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&oa.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}function k(){ba.removeEventListener("DOMContentLoaded",k),a.removeEventListener("load",k),oa.ready()}function l(){this.expando=oa.expando+l.uid++}function m(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:Ka.test(a)?JSON.parse(a):a)}function n(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(La,"-$&").toLowerCase(),"string"==typeof(c=a.getAttribute(d))){try{c=m(c)}catch(a){}Ja.set(a,b,c)}else c=void 0;return c}function o(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return oa.css(a,b,"")},i=h(),j=c&&c[3]||(oa.cssNumber[b]?"":"px"),k=(oa.cssNumber[b]||"px"!==j&&+i)&&Na.exec(oa.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do{f=f||".5",k/=f,oa.style(a,b,k+j)}while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function p(a){var b,c=a.ownerDocument,d=a.nodeName,e=Ra[d];return e||(b=c.body.appendChild(c.createElement(d)),e=oa.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),Ra[d]=e,e)}function q(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=Ia.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&Pa(d)&&(e[f]=p(d))):"none"!==c&&(e[f]="none",Ia.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}function r(a,b){var c;return c=void 0!==a.getElementsByTagName?a.getElementsByTagName(b||"*"):void 0!==a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&oa.nodeName(a,b)?oa.merge([a],c):c}function s(a,b){for(var c=0,d=a.length;c<d;c++)Ia.set(a[c],"globalEval",!b||Ia.get(b[c],"globalEval"))}function t(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if((f=a[n])||0===f)if("object"===oa.type(f))oa.merge(m,f.nodeType?[f]:f);else if(Wa.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(Ta.exec(f)||["",""])[1].toLowerCase(),i=Va[h]||Va._default,g.innerHTML=i[1]+oa.htmlPrefilter(f)+i[2],k=i[0];k--;)g=g.lastChild;oa.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));for(l.textContent="",n=0;f=m[n++];)if(d&&oa.inArray(f,d)>-1)e&&e.push(f);else if(j=oa.contains(f.ownerDocument,f),g=r(l.appendChild(f),"script"),j&&s(g),c)for(k=0;f=g[k++];)Ua.test(f.type||"")&&c.push(f);return l}function u(){return!0}function v(){return!1}function w(){try{return ba.activeElement}catch(a){}}function x(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)x(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),!1===e)e=v;else if(!e)return a;return 1===f&&(g=e,e=function(a){return oa().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=oa.guid++)),a.each(function(){oa.event.add(this,b,e,d,c)})}function y(a,b){return oa.nodeName(a,"table")&&oa.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function z(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function A(a){var b=cb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function B(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(Ia.hasData(a)&&(f=Ia.access(a),g=Ia.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)oa.event.add(b,e,j[e][c])}Ja.hasData(a)&&(h=Ja.access(a),i=oa.extend({},h),Ja.set(b,i))}}function C(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Sa.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function D(a,b,d,e){b=ea.apply([],b);var f,g,h,i,j,k,l=0,m=a.length,n=m-1,o=b[0],p=oa.isFunction(o);if(p||m>1&&"string"==typeof o&&!ma.checkClone&&bb.test(o))return a.each(function(c){var f=a.eq(c);p&&(b[0]=o.call(this,c,f.html())),D(f,b,d,e)});if(m&&(f=t(b,a[0].ownerDocument,!1,a,e),g=f.firstChild,1===f.childNodes.length&&(f=g),g||e)){for(h=oa.map(r(f,"script"),z),i=h.length;l<m;l++)j=f,l!==n&&(j=oa.clone(j,!0,!0),i&&oa.merge(h,r(j,"script"))),d.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,oa.map(h,A),l=0;l<i;l++)j=h[l],Ua.test(j.type||"")&&!Ia.access(j,"globalEval")&&oa.contains(k,j)&&(j.src?oa._evalUrl&&oa._evalUrl(j.src):c(j.textContent.replace(db,""),k))}return a}function E(a,b,c){for(var d,e=b?oa.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||oa.cleanData(r(d)),d.parentNode&&(c&&oa.contains(d.ownerDocument,d)&&s(r(d,"script")),d.parentNode.removeChild(d));return a}function F(a,b,c){var d,e,f,g,h=a.style;return c=c||gb(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||oa.contains(a.ownerDocument,a)||(g=oa.style(a,b)),!ma.pixelMarginRight()&&fb.test(g)&&eb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function G(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function H(a){if(a in lb)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=kb.length;c--;)if((a=kb[c]+b)in lb)return a}function I(a,b,c){var d=Na.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function J(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=oa.css(a,c+Oa[f],!0,e)),d?("content"===c&&(g-=oa.css(a,"padding"+Oa[f],!0,e)),"margin"!==c&&(g-=oa.css(a,"border"+Oa[f]+"Width",!0,e))):(g+=oa.css(a,"padding"+Oa[f],!0,e),"padding"!==c&&(g+=oa.css(a,"border"+Oa[f]+"Width",!0,e)));return g}function K(a,b,c){var d,e=!0,f=gb(a),g="border-box"===oa.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=F(a,b,f),(d<0||null==d)&&(d=a.style[b]),fb.test(d))return d;e=g&&(ma.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+J(a,b,c||(g?"border":"content"),e,f)+"px"}function L(a,b,c,d,e){return new L.prototype.init(a,b,c,d,e)}function M(){nb&&(a.requestAnimationFrame(M),oa.fx.tick())}function N(){return a.setTimeout(function(){mb=void 0}),mb=oa.now()}function O(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=Oa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function P(a,b,c){for(var d,e=(S.tweeners[b]||[]).concat(S.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function Q(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&Pa(a),r=Ia.get(a,"fxshow");c.queue||(g=oa._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,oa.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],ob.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;p=!0}n[d]=r&&r[d]||oa.style(a,d)}if((i=!oa.isEmptyObject(b))||!oa.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=r&&r.display,null==j&&(j=Ia.get(a,"display")),k=oa.css(a,"display"),"none"===k&&(j?k=j:(q([a],!0),j=a.style.display||j,k=oa.css(a,"display"),q([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===oa.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(r?"hidden"in r&&(p=r.hidden):r=Ia.access(a,"fxshow",{display:j}),f&&(r.hidden=!p),p&&q([a],!0),m.done(function(){p||q([a]),Ia.remove(a,"fxshow");for(d in n)oa.style(a,d,n[d])})),i=P(p?r[d]:0,d,m),d in r||(r[d]=i.start,p&&(i.end=i.start,i.start=0))}}function R(a,b){var c,d,e,f,g;for(c in a)if(d=oa.camelCase(c),e=b[d],f=a[c],oa.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=oa.cssHooks[d])&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function S(a,b,c){var d,e,f=0,g=S.prefilters.length,h=oa.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=mb||N(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:oa.extend({},b),opts:oa.extend(!0,{specialEasing:{},easing:oa.easing._default},c),originalProperties:b,originalOptions:c,startTime:mb||N(),duration:c.duration,tweens:[],createTween:function(b,c){var d=oa.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(R(k,j.opts.specialEasing);f<g;f++)if(d=S.prefilters[f].call(j,a,k,j.opts))return oa.isFunction(d.stop)&&(oa._queueHooks(j.elem,j.opts.queue).stop=oa.proxy(d.stop,d)),d;return oa.map(k,P,j),oa.isFunction(j.opts.start)&&j.opts.start.call(a,j),oa.fx.timer(oa.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function T(a){return(a.match(Da)||[]).join(" ")}function U(a){return a.getAttribute&&a.getAttribute("class")||""}function V(a,b,c,d){var e;if(oa.isArray(b))oa.each(b,function(b,e){c||zb.test(a)?d(a,e):V(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==oa.type(b))d(a,b);else for(e in b)V(a+"["+e+"]",b[e],c,d)}function W(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Da)||[];if(oa.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function X(a,b,c,d){function e(h){var i;return f[h]=!0,oa.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Lb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function Y(a,b){var c,d,e=oa.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&oa.extend(!0,a,d),a}function Z(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function $(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(!(g=j[i+" "+f]||j["* "+f]))for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){!0===g?g=j[e]:!0!==j[e]&&(f=h[0],k.unshift(h[1]));break}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function _(a){return oa.isWindow(a)?a:9===a.nodeType&&a.defaultView}var aa=[],ba=a.document,ca=Object.getPrototypeOf,da=aa.slice,ea=aa.concat,fa=aa.push,ga=aa.indexOf,ha={},ia=ha.toString,ja=ha.hasOwnProperty,ka=ja.toString,la=ka.call(Object),ma={},na="3.1.1",oa=function(a,b){return new oa.fn.init(a,b)},pa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,qa=/^-ms-/,ra=/-([a-z])/g,sa=function(a,b){return b.toUpperCase()};oa.fn=oa.prototype={jquery:na,constructor:oa,length:0,toArray:function(){return da.call(this)},get:function(a){return null==a?da.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=oa.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return oa.each(this,a)},map:function(a){return this.pushStack(oa.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(da.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:fa,sort:aa.sort,splice:aa.splice},oa.extend=oa.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||oa.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(oa.isPlainObject(d)||(e=oa.isArray(d)))?(e?(e=!1,f=c&&oa.isArray(c)?c:[]):f=c&&oa.isPlainObject(c)?c:{},g[b]=oa.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},oa.extend({expando:"jQuery"+(na+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===oa.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=oa.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==ia.call(a)||(b=ca(a))&&("function"!=typeof(c=ja.call(b,"constructor")&&b.constructor)||ka.call(c)!==la))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?ha[ia.call(a)]||"object":typeof a},globalEval:function(a){c(a)},camelCase:function(a){return a.replace(qa,"ms-").replace(ra,sa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,e=0;if(d(a))for(c=a.length;e<c&&!1!==b.call(a[e],e,a[e]);e++);else for(e in a)if(!1===b.call(a[e],e,a[e]))break;return a},trim:function(a){return null==a?"":(a+"").replace(pa,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(d(Object(a))?oa.merge(c,"string"==typeof a?[a]:a):fa.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:ga.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d=[],e=0,f=a.length,g=!c;e<f;e++)!b(a[e],e)!==g&&d.push(a[e]);return d},map:function(a,b,c){var e,f,g=0,h=[];if(d(a))for(e=a.length;g<e;g++)null!=(f=b(a[g],g,c))&&h.push(f);else for(g in a)null!=(f=b(a[g],g,c))&&h.push(f);return ea.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),oa.isFunction(a))return d=da.call(arguments,2),e=function(){return a.apply(b||this,d.concat(da.call(arguments)))},e.guid=a.guid=a.guid||oa.guid++,e},now:Date.now,support:ma}),"function"==typeof Symbol&&(oa.fn[Symbol.iterator]=aa[Symbol.iterator]),oa.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){ha["[object "+b+"]"]=b.toLowerCase()});var ta=function(a){function b(a,b,c,d){var e,f,g,h,i,k,m,n=b&&b.ownerDocument,o=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==o&&9!==o&&11!==o)return c;if(!d&&((b?b.ownerDocument||b:N)!==F&&E(b),b=b||F,H)){if(11!==o&&(i=pa.exec(a)))if(e=i[1]){if(9===o){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(n&&(g=n.getElementById(e))&&L(b,g)&&g.id===e)return c.push(g),c}else{if(i[2])return Y.apply(c,b.getElementsByTagName(a)),c;if((e=i[3])&&u.getElementsByClassName&&b.getElementsByClassName)return Y.apply(c,b.getElementsByClassName(e)),c}if(u.qsa&&!S[a+" "]&&(!I||!I.test(a))){if(1!==o)n=b,m=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(ta,ua):b.setAttribute("id",h=M),k=y(a),f=k.length;f--;)k[f]="#"+h+" "+l(k[f]);m=k.join(","),n=qa.test(a)&&j(b.parentNode)||b}if(m)try{return Y.apply(c,n.querySelectorAll(m)),c}catch(a){}finally{h===M&&b.removeAttribute("id")}}}return A(a.replace(fa,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>v.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[M]=!0,a}function e(a){var b=F.createElement("fieldset");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)v.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){return"form"in b?b.parentNode&&!1===b.disabled?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&wa(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function i(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function j(a){return a&&void 0!==a.getElementsByTagName&&a}function k(){}function l(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function m(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=P++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[O,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[M]||(b[M]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===O&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function n(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function o(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function p(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function q(a,b,c,e,f,g){return e&&!e[M]&&(e=q(e)),f&&!f[M]&&(f=q(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],q=g.length,r=d||o(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:p(r,m,a,h,i),t=c?f||(d?a:q||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=p(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?$(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=p(t===g?t.splice(q,t.length):t),f?f(null,g,t,i):Y.apply(g,t)})}function r(a){for(var b,c,d,e=a.length,f=v.relative[a[0].type],g=f||v.relative[" "],h=f?1:0,i=m(function(a){return a===b},g,!0),j=m(function(a){return $(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==B)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=v.relative[a[h].type])k=[m(n(k),c)];else{if(c=v.filter[a[h].type].apply(null,a[h].matches),c[M]){for(d=++h;d<e&&!v.relative[a[d].type];d++);return q(h>1&&n(k),h>1&&l(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(fa,"$1"),c,h<d&&r(a.slice(h,d)),d<e&&r(a=a.slice(d)),d<e&&l(a))}k.push(c)}return n(k)}function s(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",q=d&&[],r=[],s=B,t=d||f&&v.find.TAG("*",j),u=O+=null==s?1:Math.random()||.1,w=t.length;for(j&&(B=g===F||g||j);o!==w&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===F||(E(k),h=!H);m=a[l++];)if(m(k,g||F,h)){i.push(k);break}j&&(O=u)}e&&((k=!m&&k)&&n--,d&&q.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(q,r,g,h);if(d){if(n>0)for(;o--;)q[o]||r[o]||(r[o]=W.call(i));r=p(r)}Y.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(O=u,B=s),q};return e?d(g):g}var t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M="sizzle"+1*new Date,N=a.document,O=0,P=0,Q=c(),R=c(),S=c(),T=function(a,b){return a===b&&(D=!0),0},U={}.hasOwnProperty,V=[],W=V.pop,X=V.push,Y=V.push,Z=V.slice,$=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},_="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",aa="[\\x20\\t\\r\\n\\f]",ba="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ca="\\["+aa+"*("+ba+")(?:"+aa+"*([*^$|!~]?=)"+aa+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ba+"))|)"+aa+"*\\]",da=":("+ba+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ca+")*)|.*)\\)|)",ea=new RegExp(aa+"+","g"),fa=new RegExp("^"+aa+"+|((?:^|[^\\\\])(?:\\\\.)*)"+aa+"+$","g"),ga=new RegExp("^"+aa+"*,"+aa+"*"),ha=new RegExp("^"+aa+"*([>+~]|"+aa+")"+aa+"*"),ia=new RegExp("="+aa+"*([^\\]'\"]*?)"+aa+"*\\]","g"),ja=new RegExp(da),ka=new RegExp("^"+ba+"$"),la={ID:new RegExp("^#("+ba+")"),CLASS:new RegExp("^\\.("+ba+")"),TAG:new RegExp("^("+ba+"|[*])"),ATTR:new RegExp("^"+ca),PSEUDO:new RegExp("^"+da),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+aa+"*(even|odd|(([+-]|)(\\d*)n|)"+aa+"*(?:([+-]|)"+aa+"*(\\d+)|))"+aa+"*\\)|)","i"),bool:new RegExp("^(?:"+_+")$","i"),needsContext:new RegExp("^"+aa+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+aa+"*((?:-\\d)?\\d*)"+aa+"*\\)|)(?=[^-]|$)","i")},ma=/^(?:input|select|textarea|button)$/i,na=/^h\d$/i,oa=/^[^{]+\{\s*\[native \w/,pa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qa=/[+~]/,ra=new RegExp("\\\\([\\da-f]{1,6}"+aa+"?|("+aa+")|.)","ig"),sa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ta=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ua=function(a,b){return b?"\0"===a?"�":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},va=function(){E()},wa=m(function(a){return!0===a.disabled&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{Y.apply(V=Z.call(N.childNodes),N.childNodes),V[N.childNodes.length].nodeType}catch(a){Y={apply:V.length?function(a,b){X.apply(a,Z.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}u=b.support={},x=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},E=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:N;return d!==F&&9===d.nodeType&&d.documentElement?(F=d,G=F.documentElement,H=!x(F),N!==F&&(c=F.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",va,!1):c.attachEvent&&c.attachEvent("onunload",va)),u.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),u.getElementsByTagName=e(function(a){return a.appendChild(F.createComment("")),!a.getElementsByTagName("*").length}),u.getElementsByClassName=oa.test(F.getElementsByClassName),u.getById=e(function(a){return G.appendChild(a).id=M,!F.getElementsByName||!F.getElementsByName(M).length}),u.getById?(v.filter.ID=function(a){var b=a.replace(ra,sa);return function(a){return a.getAttribute("id")===b}},v.find.ID=function(a,b){if(void 0!==b.getElementById&&H){var c=b.getElementById(a);return c?[c]:[]}}):(v.filter.ID=function(a){var b=a.replace(ra,sa);return function(a){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},v.find.ID=function(a,b){if(void 0!==b.getElementById&&H){var c,d,e,f=b.getElementById(a);if(f){if((c=f.getAttributeNode("id"))&&c.value===a)return[f];for(e=b.getElementsByName(a),d=0;f=e[d++];)if((c=f.getAttributeNode("id"))&&c.value===a)return[f]}return[]}}),v.find.TAG=u.getElementsByTagName?function(a,b){return void 0!==b.getElementsByTagName?b.getElementsByTagName(a):u.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},v.find.CLASS=u.getElementsByClassName&&function(a,b){if(void 0!==b.getElementsByClassName&&H)return b.getElementsByClassName(a)},J=[],I=[],(u.qsa=oa.test(F.querySelectorAll))&&(e(function(a){G.appendChild(a).innerHTML="<a id='"+M+"'></a><select id='"+M+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+aa+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||I.push("\\["+aa+"*(?:value|"+_+")"),a.querySelectorAll("[id~="+M+"-]").length||I.push("~="),a.querySelectorAll(":checked").length||I.push(":checked"),a.querySelectorAll("a#"+M+"+*").length||I.push(".#.+[+~]")}),e(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=F.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&I.push("name"+aa+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&I.push(":enabled",":disabled"),G.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&I.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),I.push(",.*:")})),(u.matchesSelector=oa.test(K=G.matches||G.webkitMatchesSelector||G.mozMatchesSelector||G.oMatchesSelector||G.msMatchesSelector))&&e(function(a){u.disconnectedMatch=K.call(a,"*"),K.call(a,"[s!='']:x"),J.push("!=",da)}),I=I.length&&new RegExp(I.join("|")),J=J.length&&new RegExp(J.join("|")),b=oa.test(G.compareDocumentPosition),L=b||oa.test(G.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},T=b?function(a,b){if(a===b)return D=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c||(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!u.sortDetached&&b.compareDocumentPosition(a)===c?a===F||a.ownerDocument===N&&L(N,a)?-1:b===F||b.ownerDocument===N&&L(N,b)?1:C?$(C,a)-$(C,b):0:4&c?-1:1)}:function(a,b){if(a===b)return D=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===F?-1:b===F?1:e?-1:f?1:C?$(C,a)-$(C,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===N?-1:i[d]===N?1:0},F):F},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==F&&E(a),c=c.replace(ia,"='$1']"),u.matchesSelector&&H&&!S[c+" "]&&(!J||!J.test(c))&&(!I||!I.test(c)))try{var d=K.call(a,c);if(d||u.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){}return b(c,F,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==F&&E(a),L(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==F&&E(a);var c=v.attrHandle[b.toLowerCase()],d=c&&U.call(v.attrHandle,b.toLowerCase())?c(a,b,!H):void 0;return void 0!==d?d:u.attributes||!H?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.escape=function(a){return(a+"").replace(ta,ua)},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(D=!u.detectDuplicates,C=!u.sortStable&&a.slice(0),a.sort(T),D){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return C=null,a},w=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=w(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=w(b);return c},v=b.selectors={cacheLength:50,createPseudo:d,match:la,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ra,sa),a[3]=(a[3]||a[4]||a[5]||"").replace(ra,sa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return la.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ja.test(c)&&(b=y(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ra,sa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=Q[a+" "];return b||(b=new RegExp("(^|"+aa+")"+a+"("+aa+"|$)"))&&Q(a,function(a){return b.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ea," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[M]||(m[M]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===O&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[O,n,t];break}}else if(s&&(m=b,l=m[M]||(m[M]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===O&&j[1],t=n),!1===t)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[M]||(m[M]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[O,t]),m!==b)););return(t-=e)===d||t%d==0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=v.pseudos[a]||v.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[M]?f(c):f.length>1?(e=[a,a,"",c],v.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=$(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=z(a.replace(fa,"$1"));return e[M]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ra,sa),function(b){return(b.textContent||b.innerText||w(b)).indexOf(a)>-1}}),lang:d(function(a){return ka.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ra,sa).toLowerCase(),function(b){var c;do{if(c=H?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===G},focus:function(a){return a===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:h(!1),disabled:h(!0),checked:function(a){var b=a.nodeName.toLowerCase()
;return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!v.pseudos.empty(a)},header:function(a){return na.test(a.nodeName)},input:function(a){return ma.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:i(function(){return[0]}),last:i(function(a,b){return[b-1]}),eq:i(function(a,b,c){return[c<0?c+b:c]}),even:i(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:i(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:i(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:i(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},v.pseudos.nth=v.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})v.pseudos[t]=function(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}(t);for(t in{submit:!0,reset:!0})v.pseudos[t]=function(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}(t);return k.prototype=v.filters=v.pseudos,v.setFilters=new k,y=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=R[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=v.preFilter;h;){d&&!(e=ga.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ha.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(fa," ")}),h=h.slice(d.length));for(g in v.filter)!(e=la[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):R(a,i).slice(0)},z=b.compile=function(a,b){var c,d=[],e=[],f=S[a+" "];if(!f){for(b||(b=y(a)),c=b.length;c--;)f=r(b[c]),f[M]?d.push(f):e.push(f);f=S(a,s(e,d)),f.selector=a}return f},A=b.select=function(a,b,c,d){var e,f,g,h,i,k="function"==typeof a&&a,m=!d&&y(a=k.selector||a);if(c=c||[],1===m.length){if(f=m[0]=m[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&H&&v.relative[f[1].type]){if(!(b=(v.find.ID(g.matches[0].replace(ra,sa),b)||[])[0]))return c;k&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=la.needsContext.test(a)?0:f.length;e--&&(g=f[e],!v.relative[h=g.type]);)if((i=v.find[h])&&(d=i(g.matches[0].replace(ra,sa),qa.test(f[0].type)&&j(b.parentNode)||b))){if(f.splice(e,1),!(a=d.length&&l(f)))return Y.apply(c,d),c;break}}return(k||z(a,m))(d,b,!H,c,!b||qa.test(a)&&j(b.parentNode)||b),c},u.sortStable=M.split("").sort(T).join("")===M,u.detectDuplicates=!!D,E(),u.sortDetached=e(function(a){return 1&a.compareDocumentPosition(F.createElement("fieldset"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),u.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(_,function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);oa.find=ta,oa.expr=ta.selectors,oa.expr[":"]=oa.expr.pseudos,oa.uniqueSort=oa.unique=ta.uniqueSort,oa.text=ta.getText,oa.isXMLDoc=ta.isXML,oa.contains=ta.contains,oa.escapeSelector=ta.escape;var ua=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&oa(a).is(c))break;d.push(a)}return d},va=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},wa=oa.expr.match.needsContext,xa=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,ya=/^.[^:#\[\.,]*$/;oa.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?oa.find.matchesSelector(d,a)?[d]:[]:oa.find.matches(a,oa.grep(b,function(a){return 1===a.nodeType}))},oa.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(oa(a).filter(function(){for(b=0;b<d;b++)if(oa.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)oa.find(a,e[b],c);return d>1?oa.uniqueSort(c):c},filter:function(a){return this.pushStack(e(this,a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"==typeof a&&wa.test(a)?oa(a):a||[],!1).length}});var za,Aa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(oa.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||za,"string"==typeof a){if(!(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:Aa.exec(a))||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof oa?b[0]:b,oa.merge(this,oa.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:ba,!0)),xa.test(d[1])&&oa.isPlainObject(b))for(d in b)oa.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=ba.getElementById(d[2]),e&&(this[0]=e,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):oa.isFunction(a)?void 0!==c.ready?c.ready(a):a(oa):oa.makeArray(a,this)}).prototype=oa.fn,za=oa(ba);var Ba=/^(?:parents|prev(?:Until|All))/,Ca={children:!0,contents:!0,next:!0,prev:!0};oa.fn.extend({has:function(a){var b=oa(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(oa.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&oa(a);if(!wa.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&oa.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?oa.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?ga.call(oa(a),this[0]):ga.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(oa.uniqueSort(oa.merge(this.get(),oa(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),oa.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ua(a,"parentNode")},parentsUntil:function(a,b,c){return ua(a,"parentNode",c)},next:function(a){return f(a,"nextSibling")},prev:function(a){return f(a,"previousSibling")},nextAll:function(a){return ua(a,"nextSibling")},prevAll:function(a){return ua(a,"previousSibling")},nextUntil:function(a,b,c){return ua(a,"nextSibling",c)},prevUntil:function(a,b,c){return ua(a,"previousSibling",c)},siblings:function(a){return va((a.parentNode||{}).firstChild,a)},children:function(a){return va(a.firstChild)},contents:function(a){return a.contentDocument||oa.merge([],a.childNodes)}},function(a,b){oa.fn[a]=function(c,d){var e=oa.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=oa.filter(d,e)),this.length>1&&(Ca[a]||oa.uniqueSort(e),Ba.test(a)&&e.reverse()),this.pushStack(e)}});var Da=/[^\x20\t\r\n\f]+/g;oa.Callbacks=function(a){a="string"==typeof a?g(a):oa.extend({},a);var b,c,d,e,f=[],h=[],i=-1,j=function(){for(e=a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<f.length;)!1===f[i].apply(c[0],c[1])&&a.stopOnFalse&&(i=f.length,c=!1);a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},k={add:function(){return f&&(c&&!b&&(i=f.length-1,h.push(c)),function b(c){oa.each(c,function(c,d){oa.isFunction(d)?a.unique&&k.has(d)||f.push(d):d&&d.length&&"string"!==oa.type(d)&&b(d)})}(arguments),c&&!b&&j()),this},remove:function(){return oa.each(arguments,function(a,b){for(var c;(c=oa.inArray(b,f,c))>-1;)f.splice(c,1),c<=i&&i--}),this},has:function(a){return a?oa.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=h=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=h=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},oa.extend({Deferred:function(b){var c=[["notify","progress",oa.Callbacks("memory"),oa.Callbacks("memory"),2],["resolve","done",oa.Callbacks("once memory"),oa.Callbacks("once memory"),0,"resolved"],["reject","fail",oa.Callbacks("once memory"),oa.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},catch:function(a){return e.then(null,a)},pipe:function(){var a=arguments;return oa.Deferred(function(b){oa.each(c,function(c,d){var e=oa.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&oa.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){function f(b,c,d,e){return function(){var j=this,k=arguments,l=function(){var a,l;if(!(b<g)){if((a=d.apply(j,k))===c.promise())throw new TypeError("Thenable self-resolution");l=a&&("object"==typeof a||"function"==typeof a)&&a.then,oa.isFunction(l)?e?l.call(a,f(g,c,h,e),f(g,c,i,e)):(g++,l.call(a,f(g,c,h,e),f(g,c,i,e),f(g,c,h,c.notifyWith))):(d!==h&&(j=void 0,k=[a]),(e||c.resolveWith)(j,k))}},m=e?l:function(){try{l()}catch(a){oa.Deferred.exceptionHook&&oa.Deferred.exceptionHook(a,m.stackTrace),b+1>=g&&(d!==i&&(j=void 0,k=[a]),c.rejectWith(j,k))}};b?m():(oa.Deferred.getStackHook&&(m.stackTrace=oa.Deferred.getStackHook()),a.setTimeout(m))}}var g=0;return oa.Deferred(function(a){c[0][3].add(f(0,a,oa.isFunction(e)?e:h,a.notifyWith)),c[1][3].add(f(0,a,oa.isFunction(b)?b:h)),c[2][3].add(f(0,a,oa.isFunction(d)?d:i))}).promise()},promise:function(a){return null!=a?oa.extend(a,e):e}},f={};return oa.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=da.call(arguments),f=oa.Deferred(),g=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?da.call(arguments):c,--b||f.resolveWith(d,e)}};if(b<=1&&(j(a,f.done(g(c)).resolve,f.reject),"pending"===f.state()||oa.isFunction(e[c]&&e[c].then)))return f.then();for(;c--;)j(e[c],g(c),f.reject);return f.promise()}});var Ea=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;oa.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Ea.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},oa.readyException=function(b){a.setTimeout(function(){throw b})};var Fa=oa.Deferred();oa.fn.ready=function(a){return Fa.then(a).catch(function(a){oa.readyException(a)}),this},oa.extend({isReady:!1,readyWait:1,holdReady:function(a){a?oa.readyWait++:oa.ready(!0)},ready:function(a){(!0===a?--oa.readyWait:oa.isReady)||(oa.isReady=!0,!0!==a&&--oa.readyWait>0||Fa.resolveWith(ba,[oa]))}}),oa.ready.then=Fa.then,"complete"===ba.readyState||"loading"!==ba.readyState&&!ba.documentElement.doScroll?a.setTimeout(oa.ready):(ba.addEventListener("DOMContentLoaded",k),a.addEventListener("load",k));var Ga=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===oa.type(c)){e=!0;for(h in c)Ga(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,oa.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(oa(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ha=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};l.uid=1,l.prototype={cache:function(a){var b=a[this.expando];return b||(b={},Ha(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[oa.camelCase(b)]=c;else for(d in b)e[oa.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][oa.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){oa.isArray(b)?b=b.map(oa.camelCase):(b=oa.camelCase(b),b=b in d?[b]:b.match(Da)||[]),c=b.length;for(;c--;)delete d[b[c]]}(void 0===b||oa.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!oa.isEmptyObject(b)}};var Ia=new l,Ja=new l,Ka=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,La=/[A-Z]/g;oa.extend({hasData:function(a){return Ja.hasData(a)||Ia.hasData(a)},data:function(a,b,c){return Ja.access(a,b,c)},removeData:function(a,b){Ja.remove(a,b)},_data:function(a,b,c){return Ia.access(a,b,c)},_removeData:function(a,b){Ia.remove(a,b)}}),oa.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=Ja.get(f),1===f.nodeType&&!Ia.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=oa.camelCase(d.slice(5)),n(f,d,e[d])));Ia.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Ja.set(this,a)}):Ga(this,function(b){var c;if(f&&void 0===b){if(void 0!==(c=Ja.get(f,a)))return c;if(void 0!==(c=n(f,a)))return c}else this.each(function(){Ja.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Ja.remove(this,a)})}}),oa.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=Ia.get(a,b),c&&(!d||oa.isArray(c)?d=Ia.access(a,b,oa.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=oa.queue(a,b),d=c.length,e=c.shift(),f=oa._queueHooks(a,b),g=function(){oa.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Ia.get(a,c)||Ia.access(a,c,{empty:oa.Callbacks("once memory").add(function(){Ia.remove(a,[b+"queue",c])})})}}),oa.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?oa.queue(this[0],a):void 0===b?this:this.each(function(){var c=oa.queue(this,a,b);oa._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&oa.dequeue(this,a)})},dequeue:function(a){return this.each(function(){oa.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=oa.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)(c=Ia.get(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Ma=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Na=new RegExp("^(?:([+-])=|)("+Ma+")([a-z%]*)$","i"),Oa=["Top","Right","Bottom","Left"],Pa=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&oa.contains(a.ownerDocument,a)&&"none"===oa.css(a,"display")},Qa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ra={};oa.fn.extend({show:function(){return q(this,!0)},hide:function(){return q(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Pa(this)?oa(this).show():oa(this).hide()})}});var Sa=/^(?:checkbox|radio)$/i,Ta=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ua=/^$|\/(?:java|ecma)script/i,Va={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Va.optgroup=Va.option,Va.tbody=Va.tfoot=Va.colgroup=Va.caption=Va.thead,Va.th=Va.td;var Wa=/<|&#?\w+;/;!function(){var a=ba.createDocumentFragment(),b=a.appendChild(ba.createElement("div")),c=ba.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),ma.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",ma.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Xa=ba.documentElement,Ya=/^key/,Za=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,$a=/^([^.]*)(?:\.(.+)|)/;oa.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ia.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),e&&oa.find.matchesSelector(Xa,e),c.guid||(c.guid=oa.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return void 0!==oa&&oa.event.triggered!==b.type?oa.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(Da)||[""],j=b.length;j--;)h=$a.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=oa.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=oa.event.special[n]||{},k=oa.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&oa.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&!1!==l.setup.call(a,d,o,g)||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),oa.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ia.hasData(a)&&Ia.get(a);if(q&&(i=q.events)){for(b=(b||"").match(Da)||[""],j=b.length;j--;)if(h=$a.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=oa.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&!1!==l.teardown.call(a,o,q.handle)||oa.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)oa.event.remove(a,n+b[j],c,d,!0);oa.isEmptyObject(i)&&Ia.remove(a,"handle events")}},dispatch:function(a){var b,c,d,e,f,g,h=oa.event.fix(a),i=new Array(arguments.length),j=(Ia.get(this,"events")||{})[h.type]||[],k=oa.event.special[h.type]||{};for(i[0]=h,b=1;b<arguments.length;b++)i[b]=arguments[b];if(h.delegateTarget=this,!k.preDispatch||!1!==k.preDispatch.call(this,h)){for(g=oa.event.handlers.call(this,h,j),b=0;(e=g[b++])&&!h.isPropagationStopped();)for(h.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!h.rnamespace.test(f.namespace)||(h.handleObj=f,h.data=f.data,void 0!==(d=((oa.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,i))&&!1===(h.result=d)&&(h.preventDefault(),h.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,h),h.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||!0!==j.disabled)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?oa(e,this).index(j)>-1:oa.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(oa.Event.prototype,a,{enumerable:!0,configurable:!0,get:oa.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[oa.expando]?a:new oa.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==w()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===w()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&oa.nodeName(this,"input"))return this.click(),!1},_default:function(a){return oa.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},oa.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},oa.Event=function(a,b){return this instanceof oa.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?u:v,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&oa.extend(this,b),this.timeStamp=a&&a.timeStamp||oa.now(),void(this[oa.expando]=!0)):new oa.Event(a,b)},oa.Event.prototype={constructor:oa.Event,isDefaultPrevented:v,isPropagationStopped:v,isImmediatePropagationStopped:v,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=u,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=u,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=u,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},oa.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&Ya.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&Za.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},oa.event.addProp),oa.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){oa.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||oa.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),oa.fn.extend({on:function(a,b,c,d){return x(this,a,b,c,d)},one:function(a,b,c,d){return x(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,oa(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return!1!==b&&"function"!=typeof b||(c=b,b=void 0),!1===c&&(c=v),this.each(function(){oa.event.remove(this,a,c,b)})}});var _a=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ab=/<script|<style|<link/i,bb=/checked\s*(?:[^=]|=\s*.checked.)/i,cb=/^true\/(.*)/,db=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oa.extend({htmlPrefilter:function(a){return a.replace(_a,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=oa.contains(a.ownerDocument,a);if(!(ma.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||oa.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;d<e;d++)C(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;d<e;d++)B(f[d],g[d]);else B(a,h);return g=r(h,"script"),g.length>0&&s(g,!i&&r(a,"script")),h},cleanData:function(a){for(var b,c,d,e=oa.event.special,f=0;void 0!==(c=a[f]);f++)if(Ha(c)){if(b=c[Ia.expando]){if(b.events)for(d in b.events)e[d]?oa.event.remove(c,d):oa.removeEvent(c,d,b.handle);c[Ia.expando]=void 0}c[Ja.expando]&&(c[Ja.expando]=void 0)}}}),oa.fn.extend({detach:function(a){return E(this,a,!0)},remove:function(a){return E(this,a)},text:function(a){return Ga(this,function(a){return void 0===a?oa.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return D(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){y(this,a).appendChild(a)}})},prepend:function(){return D(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=y(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return D(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return D(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(oa.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return oa.clone(this,a,b)})},html:function(a){return Ga(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!ab.test(a)&&!Va[(Ta.exec(a)||["",""])[1].toLowerCase()]){a=oa.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(oa.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(a){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return D(this,arguments,function(b){var c=this.parentNode;oa.inArray(this,a)<0&&(oa.cleanData(r(this)),c&&c.replaceChild(b,this))},a)}}),oa.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){oa.fn[a]=function(a){for(var c,d=[],e=oa(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),oa(e[g])[b](c),fa.apply(d,c.get());return this.pushStack(d)}});var eb=/^margin/,fb=new RegExp("^("+Ma+")(?!px)[a-z%]+$","i"),gb=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(h){h.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Xa.appendChild(g);var b=a.getComputedStyle(h);c="1%"!==b.top,f="2px"===b.marginLeft,d="4px"===b.width,h.style.marginRight="50%",e="4px"===b.marginRight,Xa.removeChild(g),h=null}}var c,d,e,f,g=ba.createElement("div"),h=ba.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",ma.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),oa.extend(ma,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),d},pixelMarginRight:function(){return b(),e},reliableMarginLeft:function(){return b(),f}}))}();var hb=/^(none|table(?!-c[ea]).+)/,ib={position:"absolute",visibility:"hidden",display:"block"},jb={letterSpacing:"0",fontWeight:"400"},kb=["Webkit","Moz","ms"],lb=ba.createElement("div").style;oa.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=F(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=oa.camelCase(b),i=a.style;return b=oa.cssProps[h]||(oa.cssProps[h]=H(h)||h),g=oa.cssHooks[b]||oa.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Na.exec(c))&&e[1]&&(c=o(a,b,e),f="number"),void(null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(oa.cssNumber[h]?"":"px")),ma.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c))))}},css:function(a,b,c,d){var e,f,g,h=oa.camelCase(b);return b=oa.cssProps[h]||(oa.cssProps[h]=H(h)||h),g=oa.cssHooks[b]||oa.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=F(a,b,d)),"normal"===e&&b in jb&&(e=jb[b]),""===c||c?(f=parseFloat(e),!0===c||isFinite(f)?f||0:e):e}}),oa.each(["height","width"],function(a,b){oa.cssHooks[b]={get:function(a,c,d){if(c)return!hb.test(oa.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?K(a,b,d):Qa(a,ib,function(){return K(a,b,d)})},set:function(a,c,d){var e,f=d&&gb(a),g=d&&J(a,b,d,"border-box"===oa.css(a,"boxSizing",!1,f),f);return g&&(e=Na.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=oa.css(a,b)),I(a,c,g)}}}),oa.cssHooks.marginLeft=G(ma.reliableMarginLeft,function(a,b){if(b)return(parseFloat(F(a,"marginLeft"))||a.getBoundingClientRect().left-Qa(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),oa.each({margin:"",padding:"",border:"Width"},function(a,b){oa.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+Oa[d]+b]=f[d]||f[d-2]||f[0];return e}},eb.test(a)||(oa.cssHooks[a+b].set=I)}),oa.fn.extend({css:function(a,b){return Ga(this,function(a,b,c){var d,e,f={},g=0;if(oa.isArray(b)){for(d=gb(a),e=b.length;g<e;g++)f[b[g]]=oa.css(a,b[g],!1,d);return f}return void 0!==c?oa.style(a,b,c):oa.css(a,b)},a,b,arguments.length>1)}}),oa.Tween=L,L.prototype={constructor:L,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||oa.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(oa.cssNumber[c]?"":"px")},cur:function(){var a=L.propHooks[this.prop];return a&&a.get?a.get(this):L.propHooks._default.get(this)},run:function(a){var b,c=L.propHooks[this.prop];return this.options.duration?this.pos=b=oa.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=oa.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){oa.fx.step[a.prop]?oa.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[oa.cssProps[a.prop]]&&!oa.cssHooks[a.prop]?a.elem[a.prop]=a.now:oa.style(a.elem,a.prop,a.now+a.unit)}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},oa.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},oa.fx=L.prototype.init,oa.fx.step={};var mb,nb,ob=/^(?:toggle|show|hide)$/,pb=/queueHooks$/;oa.Animation=oa.extend(S,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return o(c.elem,a,Na.exec(b),c),c}]},tweener:function(a,b){oa.isFunction(a)?(b=a,a=["*"]):a=a.match(Da);for(var c,d=0,e=a.length;d<e;d++)c=a[d],S.tweeners[c]=S.tweeners[c]||[],S.tweeners[c].unshift(b)},prefilters:[Q],prefilter:function(a,b){b?S.prefilters.unshift(a):S.prefilters.push(a)}}),oa.speed=function(a,b,c){var d=a&&"object"==typeof a?oa.extend({},a):{complete:c||!c&&b||oa.isFunction(a)&&a,duration:a,easing:c&&b||b&&!oa.isFunction(b)&&b};return oa.fx.off||ba.hidden?d.duration=0:"number"!=typeof d.duration&&(d.duration in oa.fx.speeds?d.duration=oa.fx.speeds[d.duration]:d.duration=oa.fx.speeds._default),null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){oa.isFunction(d.old)&&d.old.call(this),d.queue&&oa.dequeue(this,d.queue)},d},oa.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Pa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=oa.isEmptyObject(a),f=oa.speed(b,c,d),g=function(){var b=S(this,oa.extend({},a),f);(e||Ia.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=oa.timers,g=Ia.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&pb.test(e)&&d(g[e])
;for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||oa.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=Ia.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=oa.timers,g=d?d.length:0;for(c.finish=!0,oa.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),oa.each(["toggle","show","hide"],function(a,b){var c=oa.fn[b];oa.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(O(b,!0),a,d,e)}}),oa.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){oa.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),oa.timers=[],oa.fx.tick=function(){var a,b=0,c=oa.timers;for(mb=oa.now();b<c.length;b++)(a=c[b])()||c[b]!==a||c.splice(b--,1);c.length||oa.fx.stop(),mb=void 0},oa.fx.timer=function(a){oa.timers.push(a),a()?oa.fx.start():oa.timers.pop()},oa.fx.interval=13,oa.fx.start=function(){nb||(nb=a.requestAnimationFrame?a.requestAnimationFrame(M):a.setInterval(oa.fx.tick,oa.fx.interval))},oa.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame(nb):a.clearInterval(nb),nb=null},oa.fx.speeds={slow:600,fast:200,_default:400},oa.fn.delay=function(b,c){return b=oa.fx?oa.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=ba.createElement("input"),b=ba.createElement("select"),c=b.appendChild(ba.createElement("option"));a.type="checkbox",ma.checkOn=""!==a.value,ma.optSelected=c.selected,a=ba.createElement("input"),a.value="t",a.type="radio",ma.radioValue="t"===a.value}();var qb,rb=oa.expr.attrHandle;oa.fn.extend({attr:function(a,b){return Ga(this,oa.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){oa.removeAttr(this,a)})}}),oa.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return void 0===a.getAttribute?oa.prop(a,b,c):(1===f&&oa.isXMLDoc(a)||(e=oa.attrHooks[b.toLowerCase()]||(oa.expr.match.bool.test(b)?qb:void 0)),void 0!==c?null===c?void oa.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=oa.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!ma.radioValue&&"radio"===b&&oa.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(Da);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),qb={set:function(a,b,c){return!1===b?oa.removeAttr(a,c):a.setAttribute(c,c),c}},oa.each(oa.expr.match.bool.source.match(/\w+/g),function(a,b){var c=rb[b]||oa.find.attr;rb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=rb[g],rb[g]=e,e=null!=c(a,b,d)?g:null,rb[g]=f),e}});var sb=/^(?:input|select|textarea|button)$/i,tb=/^(?:a|area)$/i;oa.fn.extend({prop:function(a,b){return Ga(this,oa.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[oa.propFix[a]||a]})}}),oa.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&oa.isXMLDoc(a)||(b=oa.propFix[b]||b,e=oa.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=oa.find.attr(a,"tabindex");return b?parseInt(b,10):sb.test(a.nodeName)||tb.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ma.optSelected||(oa.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),oa.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oa.propFix[this.toLowerCase()]=this}),oa.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(oa.isFunction(a))return this.each(function(b){oa(this).addClass(a.call(this,b,U(this)))});if("string"==typeof a&&a)for(b=a.match(Da)||[];c=this[i++];)if(e=U(c),d=1===c.nodeType&&" "+T(e)+" "){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=T(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(oa.isFunction(a))return this.each(function(b){oa(this).removeClass(a.call(this,b,U(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(Da)||[];c=this[i++];)if(e=U(c),d=1===c.nodeType&&" "+T(e)+" "){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=T(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):oa.isFunction(a)?this.each(function(c){oa(this).toggleClass(a.call(this,c,U(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=oa(this),f=a.match(Da)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else void 0!==a&&"boolean"!==c||(b=U(this),b&&Ia.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===a?"":Ia.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+T(U(c))+" ").indexOf(b)>-1)return!0;return!1}});var ub=/\r/g;oa.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=oa.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,oa(this).val()):a,null==e?e="":"number"==typeof e?e+="":oa.isArray(e)&&(e=oa.map(e,function(a){return null==a?"":a+""})),(b=oa.valHooks[this.type]||oa.valHooks[this.nodeName.toLowerCase()])&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=oa.valHooks[e.type]||oa.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ub,""):null==c?"":c)):void 0}}),oa.extend({valHooks:{option:{get:function(a){var b=oa.find.attr(a,"value");return null!=b?b:T(oa.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!oa.nodeName(c.parentNode,"optgroup"))){if(b=oa(c).val(),g)return b;h.push(b)}return h},set:function(a,b){for(var c,d,e=a.options,f=oa.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=oa.inArray(oa.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),oa.each(["radio","checkbox"],function(){oa.valHooks[this]={set:function(a,b){if(oa.isArray(b))return a.checked=oa.inArray(oa(a).val(),b)>-1}},ma.checkOn||(oa.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var vb=/^(?:focusinfocus|focusoutblur)$/;oa.extend(oa.event,{trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||ba],n=ja.call(b,"type")?b.type:b,o=ja.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||ba,3!==d.nodeType&&8!==d.nodeType&&!vb.test(n+oa.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[oa.expando]?b:new oa.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:oa.makeArray(c,[b]),l=oa.event.special[n]||{},e||!l.trigger||!1!==l.trigger.apply(d,c))){if(!e&&!l.noBubble&&!oa.isWindow(d)){for(i=l.delegateType||n,vb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||ba)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(Ia.get(g,"events")||{})[b.type]&&Ia.get(g,"handle"),k&&k.apply(g,c),(k=j&&g[j])&&k.apply&&Ha(g)&&(b.result=k.apply(g,c),!1===b.result&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&!1!==l._default.apply(m.pop(),c)||!Ha(d)||j&&oa.isFunction(d[n])&&!oa.isWindow(d)&&(h=d[j],h&&(d[j]=null),oa.event.triggered=n,d[n](),oa.event.triggered=void 0,h&&(d[j]=h)),b.result}},simulate:function(a,b,c){var d=oa.extend(new oa.Event,c,{type:a,isSimulated:!0});oa.event.trigger(d,null,b)}}),oa.fn.extend({trigger:function(a,b){return this.each(function(){oa.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return oa.event.trigger(a,b,c,!0)}}),oa.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){oa.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),oa.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),ma.focusin="onfocusin"in a,ma.focusin||oa.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){oa.event.simulate(b,a.target,oa.event.fix(a))};oa.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=Ia.access(d,b);e||d.addEventListener(a,c,!0),Ia.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=Ia.access(d,b)-1;e?Ia.access(d,b,e):(d.removeEventListener(a,c,!0),Ia.remove(d,b))}}});var wb=a.location,xb=oa.now(),yb=/\?/;oa.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(a){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||oa.error("Invalid XML: "+b),c};var zb=/\[\]$/,Ab=/\r?\n/g,Bb=/^(?:submit|button|image|reset|file)$/i,Cb=/^(?:input|select|textarea|keygen)/i;oa.param=function(a,b){var c,d=[],e=function(a,b){var c=oa.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(oa.isArray(a)||a.jquery&&!oa.isPlainObject(a))oa.each(a,function(){e(this.name,this.value)});else for(c in a)V(c,a[c],b,e);return d.join("&")},oa.fn.extend({serialize:function(){return oa.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=oa.prop(this,"elements");return a?oa.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!oa(this).is(":disabled")&&Cb.test(this.nodeName)&&!Bb.test(a)&&(this.checked||!Sa.test(a))}).map(function(a,b){var c=oa(this).val();return null==c?null:oa.isArray(c)?oa.map(c,function(a){return{name:b.name,value:a.replace(Ab,"\r\n")}}):{name:b.name,value:c.replace(Ab,"\r\n")}}).get()}});var Db=/%20/g,Eb=/#.*$/,Fb=/([?&])_=[^&]*/,Gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ib=/^(?:GET|HEAD)$/,Jb=/^\/\//,Kb={},Lb={},Mb="*/".concat("*"),Nb=ba.createElement("a");Nb.href=wb.href,oa.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wb.href,type:"GET",isLocal:Hb.test(wb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":oa.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Y(Y(a,oa.ajaxSettings),b):Y(oa.ajaxSettings,a)},ajaxPrefilter:W(Kb),ajaxTransport:W(Lb),ajax:function(b,c){function d(b,c,d,h){var j,m,n,u,v,w=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(u=Z(o,x,d)),u=$(o,u,x,j),j?(o.ifModified&&(v=x.getResponseHeader("Last-Modified"),v&&(oa.lastModified[f]=v),(v=x.getResponseHeader("etag"))&&(oa.etag[f]=v)),204===b||"HEAD"===o.type?w="nocontent":304===b?w="notmodified":(w=u.state,m=u.data,n=u.error,j=!n)):(n=w,!b&&w||(w="error",b<0&&(b=0))),x.status=b,x.statusText=(c||w)+"",j?r.resolveWith(p,[m,w,x]):r.rejectWith(p,[x,w,n]),x.statusCode(t),t=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[x,o,j?m:n]),s.fireWith(p,[x,w]),l&&(q.trigger("ajaxComplete",[x,o]),--oa.active||oa.event.trigger("ajaxStop")))}"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=oa.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?oa(p):oa.event,r=oa.Deferred(),s=oa.Callbacks("once memory"),t=o.statusCode||{},u={},v={},w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h)for(h={};b=Gb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=v[a.toLowerCase()]=v[a.toLowerCase()]||a,u[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)x.always(a[x.status]);else for(b in a)t[b]=[t[b],a[b]];return this},abort:function(a){var b=a||w;return e&&e.abort(b),d(0,b),this}};if(r.promise(x),o.url=((b||o.url||wb.href)+"").replace(Jb,wb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(Da)||[""],null==o.crossDomain){j=ba.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Nb.protocol+"//"+Nb.host!=j.protocol+"//"+j.host}catch(a){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=oa.param(o.data,o.traditional)),X(Kb,o,c,x),k)return x;l=oa.event&&o.global,l&&0==oa.active++&&oa.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Ib.test(o.type),f=o.url.replace(Eb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Db,"+")):(n=o.url.slice(f.length),o.data&&(f+=(yb.test(f)?"&":"?")+o.data,delete o.data),!1===o.cache&&(f=f.replace(Fb,"$1"),n=(yb.test(f)?"&":"?")+"_="+xb+++n),o.url=f+n),o.ifModified&&(oa.lastModified[f]&&x.setRequestHeader("If-Modified-Since",oa.lastModified[f]),oa.etag[f]&&x.setRequestHeader("If-None-Match",oa.etag[f])),(o.data&&o.hasContent&&!1!==o.contentType||c.contentType)&&x.setRequestHeader("Content-Type",o.contentType),x.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Mb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)x.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(!1===o.beforeSend.call(p,x,o)||k))return x.abort();if(w="abort",s.add(o.complete),x.done(o.success),x.fail(o.error),e=X(Lb,o,c,x)){if(x.readyState=1,l&&q.trigger("ajaxSend",[x,o]),k)return x;o.async&&o.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},o.timeout));try{k=!1,e.send(u,d)}catch(a){if(k)throw a;d(-1,a)}}else d(-1,"No Transport");return x},getJSON:function(a,b,c){return oa.get(a,b,c,"json")},getScript:function(a,b){return oa.get(a,void 0,b,"script")}}),oa.each(["get","post"],function(a,b){oa[b]=function(a,c,d,e){return oa.isFunction(c)&&(e=e||d,d=c,c=void 0),oa.ajax(oa.extend({url:a,type:b,dataType:e,data:c,success:d},oa.isPlainObject(a)&&a))}}),oa._evalUrl=function(a){return oa.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},oa.fn.extend({wrapAll:function(a){var b;return this[0]&&(oa.isFunction(a)&&(a=a.call(this[0])),b=oa(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return oa.isFunction(a)?this.each(function(b){oa(this).wrapInner(a.call(this,b))}):this.each(function(){var b=oa(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=oa.isFunction(a);return this.each(function(c){oa(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){oa(this).replaceWith(this.childNodes)}),this}}),oa.expr.pseudos.hidden=function(a){return!oa.expr.pseudos.visible(a)},oa.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},oa.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(a){}};var Ob={0:200,1223:204},Pb=oa.ajaxSettings.xhr();ma.cors=!!Pb&&"withCredentials"in Pb,ma.ajax=Pb=!!Pb,oa.ajaxTransport(function(b){var c,d;if(ma.cors||Pb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ob[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(a){if(c)throw a}},abort:function(){c&&c()}}}),oa.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),oa.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return oa.globalEval(a),a}}}),oa.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),oa.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=oa("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),ba.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Qb=[],Rb=/(=)\?(?=&|$)|\?\?/;oa.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Qb.pop()||oa.expando+"_"+xb++;return this[a]=!0,a}}),oa.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=!1!==b.jsonp&&(Rb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=oa.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Rb,"$1"+e):!1!==b.jsonp&&(b.url+=(yb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||oa.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?oa(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Qb.push(e)),g&&oa.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),ma.createHTMLDocument=function(){var a=ba.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),oa.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var d,e,f;return b||(ma.createHTMLDocument?(b=ba.implementation.createHTMLDocument(""),d=b.createElement("base"),d.href=ba.location.href,b.head.appendChild(d)):b=ba),e=xa.exec(a),f=!c&&[],e?[b.createElement(e[1])]:(e=t([a],b,f),f&&f.length&&oa(f).remove(),oa.merge([],e.childNodes))},oa.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=T(a.slice(h)),a=a.slice(0,h)),oa.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&oa.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?oa("<div>").append(oa.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},oa.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){oa.fn[b]=function(a){return this.on(b,a)}}),oa.expr.pseudos.animated=function(a){return oa.grep(oa.timers,function(b){return a===b.elem}).length},oa.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=oa.css(a,"position"),l=oa(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=oa.css(a,"top"),i=oa.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),oa.isFunction(b)&&(b=b.call(a,c,oa.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},oa.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){oa.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];return f?f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=_(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}:void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===oa.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),oa.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+oa.css(a[0],"borderTopWidth",!0),left:d.left+oa.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-oa.css(c,"marginTop",!0),left:b.left-d.left-oa.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===oa.css(a,"position");)a=a.offsetParent;return a||Xa})}}),oa.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;oa.fn[a]=function(d){return Ga(this,function(a,d,e){var f=_(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),oa.each(["top","left"],function(a,b){oa.cssHooks[b]=G(ma.pixelPosition,function(a,c){if(c)return c=F(a,b),fb.test(c)?oa(a).position()[b]+"px":c})}),oa.each({Height:"height",Width:"width"},function(a,b){oa.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){oa.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(!0===e||!0===f?"margin":"border");return Ga(this,function(b,c,e){var f;return oa.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?oa.css(b,c,h):oa.style(b,c,e,h)},b,g?e:void 0,g)}})}),oa.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),oa.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oa});var Sb=a.jQuery,Tb=a.$;return oa.noConflict=function(b){return a.$===oa&&(a.$=Tb),b&&a.jQuery===oa&&(a.jQuery=Sb),oa},b||(a.jQuery=a.$=oa),oa}),function(a){"use strict";function b(a,b){return b=b||Error,function(){var c,d=arguments[0];for(c="["+(a?a+":":"")+d+"] http://errors.angularjs.org/1.6.2/"+(a?a+"/":"")+d,d=1;d<arguments.length;d++){c=c+(1==d?"?":"&")+"p"+(d-1)+"=";var e,f=encodeURIComponent;e=arguments[d],e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):void 0===e?"undefined":"string"!=typeof e?JSON.stringify(e):e,c+=f(e)}return new b(c)}}function c(a){if(null==a||z(a))return!1;if(nd(a)||u(a)||Zc&&a instanceof Zc)return!0;var b="length"in Object(a)&&a.length;return v(b)&&(0<=b&&(b-1 in a||a instanceof Array)||"function"==typeof a.item)}function d(a,b,e){var f,g;if(a)if(x(a))for(f in a)"prototype"!==f&&"length"!==f&&"name"!==f&&a.hasOwnProperty(f)&&b.call(e,a[f],f,a);else if(nd(a)||c(a)){var h="object"!=typeof a;for(f=0,g=a.length;f<g;f++)(h||f in a)&&b.call(e,a[f],f,a)}else if(a.forEach&&a.forEach!==d)a.forEach(b,e,a);else if(t(a))for(f in a)b.call(e,a[f],f,a);else if("function"==typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&b.call(e,a[f],f,a);else for(f in a)bd.call(a,f)&&b.call(e,a[f],f,a);return a}function e(a,b,c){for(var d=Object.keys(a).sort(),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function f(a){return function(b,c){a(c,b)}}function g(){return++ld}function h(a,b,c){for(var d=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(s(g)||x(g))for(var i=Object.keys(g),j=0,k=i.length;j<k;j++){var l=i[j],m=g[l];c&&s(m)?w(m)?a[l]=new Date(m.valueOf()):y(m)?a[l]=new RegExp(m):m.nodeName?a[l]=m.cloneNode(!0):D(m)?a[l]=m.clone():(s(a[l])||(a[l]=nd(m)?[]:{}),h(a[l],[m],!0)):a[l]=m}}return d?a.$$hashKey=d:delete a.$$hashKey,a}function i(a){return h(a,ed.call(arguments,1),!1)}function j(a){return h(a,ed.call(arguments,1),!0)}function k(a){return parseInt(a,10)}function l(a,b){return i(Object.create(a),b)}function m(){}function n(a){return a}function o(a){return function(){return a}}function p(a){return x(a.toString)&&a.toString!==hd}function q(a){return void 0===a}function r(a){return void 0!==a}function s(a){return null!==a&&"object"==typeof a}function t(a){return null!==a&&"object"==typeof a&&!id(a)}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"===hd.call(a)}function x(a){return"function"==typeof a}function y(a){return"[object RegExp]"===hd.call(a)}function z(a){return a&&a.window===a}function A(a){return a&&a.$evalAsync&&a.$watch}function B(a){return"boolean"==typeof a}function C(a){return a&&v(a.length)&&od.test(hd.call(a))}function D(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function E(a){var b={};a=a.split(",");var c;for(c=0;c<a.length;c++)b[a[c]]=!0;return b}function F(a){return cd(a.nodeName||a[0]&&a[0].nodeName)}function G(a,b){var c=a.indexOf(b);return 0<=c&&a.splice(c,1),c}function H(a,b){function c(a,b){var c,d=b.$$hashKey;if(nd(a)){c=0;for(var f=a.length;c<f;c++)b.push(e(a[c]))}else if(t(a))for(c in a)b[c]=e(a[c]);else if(a&&"function"==typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&(b[c]=e(a[c]));else for(c in a)bd.call(a,c)&&(b[c]=e(a[c]));return d?b.$$hashKey=d:delete b.$$hashKey,b}function e(a){if(!s(a))return a;var b=g.indexOf(a);if(-1!==b)return h[b];if(z(a)||A(a))throw jd("cpws");var b=!1,d=f(a);return void 0===d&&(d=nd(a)?[]:Object.create(id(a)),b=!0),g.push(a),h.push(d),b?c(a,d):d}function f(a){switch(hd.call(a)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new a.constructor(e(a.buffer),a.byteOffset,a.length);case"[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);return new Uint8Array(b).set(new Uint8Array(a)),b}return a.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new a.constructor(a.valueOf());case"[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex,b;case"[object Blob]":return new a.constructor([a],{type:a.type})}if(x(a.cloneNode))return a.cloneNode(!0)}var g=[],h=[];if(b){if(C(b)||"[object ArrayBuffer]"===hd.call(b))throw jd("cpta");if(a===b)throw jd("cpi");return nd(b)?b.length=0:d(b,function(a,c){"$$hashKey"!==c&&delete b[c]}),g.push(a),h.push(b),c(a,b)}return e(a)}function I(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c,d=typeof a;if(d===typeof b&&"object"===d){if(!nd(a)){if(w(a))return!!w(b)&&I(a.getTime(),b.getTime());if(y(a))return!!y(b)&&a.toString()===b.toString();if(A(a)||A(b)||z(a)||z(b)||nd(b)||w(b)||y(b))return!1;d=fa();for(c in a)if("$"!==c.charAt(0)&&!x(a[c])){if(!I(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&r(b[c])&&!x(b[c]))return!1;return!0}if(!nd(b))return!1;if((d=a.length)===b.length){for(c=0;c<d;c++)if(!I(a[c],b[c]))return!1;return!0}}return!1}function J(a,b,c){return a.concat(ed.call(b,c))}function K(a,b){var c=2<arguments.length?ed.call(arguments,2):[];return!x(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,J(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function L(b,c){var d=c;return"string"==typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?d=void 0:z(c)?d="$WINDOW":c&&a.document===c?d="$DOCUMENT":A(c)&&(d="$SCOPE"),d}function M(a,b){if(!q(a))return v(b)||(b=b?2:null),JSON.stringify(a,L,b)}function N(a){return u(a)?JSON.parse(a):a}function O(a,b){a=a.replace(td,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return md(c)?b:c}function P(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset();return b=O(b,d),c*=b-d,a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+c),a}function Q(a){a=Zc(a).clone();try{a.empty()}catch(a){}var b=Zc("<div>").append(a).html();try{return a[0].nodeType===yd?cd(b):b.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(a,b){return"<"+cd(b)})}catch(a){return cd(b)}}function R(a){try{return decodeURIComponent(a)}catch(a){}}function S(a){var b={};return d((a||"").split("&"),function(a){var c,d,e;a&&(d=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(d=a.substring(0,c),e=a.substring(c+1)),d=R(d),r(d)&&(e=!r(e)||R(e),bd.call(b,d)?nd(b[d])?b[d].push(e):b[d]=[b[d],e]:b[d]=e))}),b}function T(a){var b=[];return d(a,function(a,c){nd(a)?d(a,function(a){b.push(V(c,!0)+(!0===a?"":"="+V(a,!0)))}):b.push(V(c,!0)+(!0===a?"":"="+V(a,!0)))}),b.length?b.join("&"):""}function U(a){return V(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function V(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function W(a,b){var c,d,e=ud.length;for(d=0;d<e;++d)if(c=ud[d]+b,u(c=a.getAttribute(c)))return c;return null}function X(b,c){var e,f,g={};d(ud,function(a){a+="app",!e&&b.hasAttribute&&b.hasAttribute(a)&&(e=b,f=b.getAttribute(a))}),d(ud,function(a){a+="app";var c;!e&&(c=b.querySelector("["+a.replace(":","\\:")+"]"))&&(e=c,f=c.getAttribute(a))}),e&&(vd?(g.strictDi=null!==W(e,"strict-di"),c(e,f?[f]:[],g)):a.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}function Y(b,c,e){s(e)||(e={}),e=i({strictDi:!1},e);var f=function(){if(b=Zc(b),b.injector()){var d=b[0]===a.document?"document":Q(b);throw jd("btstrpd",d.replace(/</,"&lt;").replace(/>/,"&gt;"))}return c=c||[],c.unshift(["$provide",function(a){a.value("$rootElement",b)}]),e.debugInfoEnabled&&c.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),c.unshift("ng"),d=Oa(c,e.strictDi),d.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),d},g=/^NG_ENABLE_DEBUG_INFO!/,h=/^NG_DEFER_BOOTSTRAP!/;if(a&&g.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(g,"")),a&&!h.test(a.name))return f();a.name=a.name.replace(h,""),kd.resumeBootstrap=function(a){return d(a,function(a){c.push(a)}),f()},x(kd.resumeDeferredBootstrap)&&kd.resumeDeferredBootstrap()}function Z(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function $(a){if(!(a=kd.element(a).injector()))throw jd("test");return a.get("$$testability")}function _(a,b){return b=b||"_",a.replace(wd,function(a,c){return(c?b:"")+a.toLowerCase()})}function aa(a,b,c){if(!a)throw jd("areq",b||"?",c||"required");return a}function ba(a,b,c){return c&&nd(a)&&(a=a[a.length-1]),aa(x(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function ca(a,b){if("hasOwnProperty"===a)throw jd("badname",b)}function da(a,b,c){if(!b)return a;b=b.split(".");for(var d,e=a,f=b.length,g=0;g<f;g++)d=b[g],a&&(a=(e=a)[d]);return!c&&x(a)?K(e,a):a}function ea(a){
for(var b,c=a[0],d=a[a.length-1],e=1;c!==d&&(c=c.nextSibling);e++)(b||a[e]!==c)&&(b||(b=Zc(ed.call(a,0,e))),b.push(c));return b||a}function fa(){return Object.create(null)}function ga(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=!p(a)||nd(a)||w(a)?M(a):a.toString()}return a}function ha(a){function c(a,b,c){return a[b]||(a[b]=c())}var d=b("$injector"),e=b("ng");return a=c(a,"angular",Object),a.$$minErr=a.$$minErr||b,c(a,"module",function(){var a={};return function(b,f,g){if("hasOwnProperty"===b)throw e("badname","module");return f&&a.hasOwnProperty(b)&&(a[b]=null),c(a,b,function(){function a(a,b,c,d){return d||(d=e),function(){return d[c||"push"]([a,b,arguments]),k}}function c(a,c,d){return d||(d=e),function(e,f){return f&&x(f)&&(f.$$moduleName=b),d.push([a,c,arguments]),k}}if(!f)throw d("nomod",b);var e=[],h=[],i=[],j=a("$injector","invoke","push",h),k={_invokeQueue:e,_configBlocks:h,_runBlocks:i,requires:f,name:b,provider:c("$provide","provider"),factory:c("$provide","factory"),service:c("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:c("$provide","decorator",h),animation:c("$animateProvider","register"),filter:c("$filterProvider","register"),controller:c("$controllerProvider","register"),directive:c("$compileProvider","directive"),component:c("$compileProvider","component"),config:j,run:function(a){return i.push(a),this}};return g&&j(g),k})}})}function ia(a,b){if(nd(a)){b=b||[];for(var c=0,d=a.length;c<d;c++)b[c]=a[c]}else if(s(a))for(c in b=b||{},a)"$"===c.charAt(0)&&"$"===c.charAt(1)||(b[c]=a[c]);return b||a}function ja(a){var b=[];return JSON.stringify(a,function(a,c){if(c=L(a,c),s(c)){if(0<=b.indexOf(c))return"...";b.push(c)}return c})}function ka(a,b){return b.toUpperCase()}function la(a){return a.replace(Cd,ka)}function ma(a){return 1===(a=a.nodeType)||!a||9===a}function na(a,b){var c,e,f=b.createDocumentFragment(),g=[];if(Hd.test(a)){for(c=f.appendChild(b.createElement("div")),e=(Id.exec(a)||["",""])[1].toLowerCase(),e=Kd[e]||Kd._default,c.innerHTML=e[1]+a.replace(Jd,"<$1></$2>")+e[2],e=e[0];e--;)c=c.lastChild;g=J(g,c.childNodes),c=f.firstChild,c.textContent=""}else g.push(b.createTextNode(a));return f.textContent="",f.innerHTML="",d(g,function(a){f.appendChild(a)}),f}function oa(b){if(b instanceof oa)return b;var c;if(u(b)&&(b=pd(b),c=!0),!(this instanceof oa)){if(c&&"<"!==b.charAt(0))throw Fd("nosel");return new oa(b)}if(c){c=a.document;var d;b=(d=Gd.exec(b))?[c.createElement(d[1])]:(d=na(b,c))?d.childNodes:[],ya(this,b)}else x(b)?Ea(b):ya(this,b)}function pa(a){return a.cloneNode(!0)}function qa(a,b){if(b||sa(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;d<e;d++)sa(c[d])}function ra(a,b,c,e){if(r(e))throw Fd("offargs");var f=(e=ta(a))&&e.events,g=e&&e.handle;if(g)if(b){var h=function(b){var d=f[b];r(c)&&G(d||[],c),r(c)&&d&&0<d.length||(a.removeEventListener(b,g),delete f[b])};d(b.split(" "),function(a){h(a),Ed[a]&&h(Ed[a])})}else for(b in f)"$destroy"!==b&&a.removeEventListener(b,g),delete f[b]}function sa(a,b){var c=a.ng339,d=c&&Ad[c];d&&(b?delete d.data[b]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),ra(a)),delete Ad[c],a.ng339=void 0))}function ta(a,b){var c=a.ng339,c=c&&Ad[c];return b&&!c&&(a.ng339=c=++Bd,c=Ad[c]={events:{},data:{},handle:void 0}),c}function ua(a,b,c){if(ma(a)){var d,e=r(c),f=!e&&b&&!s(b),g=!b;if(a=(a=ta(a,!f))&&a.data,e)a[la(b)]=c;else{if(g)return a;if(f)return a&&a[la(b)];for(d in b)a[la(d)]=b[d]}}}function va(a,b){return!!a.getAttribute&&-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")}function wa(a,b){b&&a.setAttribute&&d(b.split(" "),function(b){a.setAttribute("class",pd((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+pd(b)+" "," ")))})}function xa(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");d(b.split(" "),function(a){a=pd(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",pd(c))}}function ya(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;d<c;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function za(a,b){return Aa(a,"$"+(b||"ngController")+"Controller")}function Aa(a,b,c){for(9===a.nodeType&&(a=a.documentElement),b=nd(b)?b:[b];a;){for(var d=0,e=b.length;d<e;d++)if(r(c=Zc.data(a,b[d])))return c;a=a.parentNode||11===a.nodeType&&a.host}}function Ba(a){for(qa(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Ca(a,b){b||qa(a);var c=a.parentNode;c&&c.removeChild(a)}function Da(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):Zc(c).on("load",b)}function Ea(b){function c(){a.document.removeEventListener("DOMContentLoaded",c),a.removeEventListener("load",c),b()}"complete"===a.document.readyState?a.setTimeout(b):(a.document.addEventListener("DOMContentLoaded",c),a.addEventListener("load",c))}function Fa(a,b){var c=Nd[b.toLowerCase()];return c&&Od[F(a)]&&c}function Ga(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(q(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var h=e.specialHandlerWrapper||Ha;1<f&&(e=ia(e));for(var i=0;i<f;i++)c.isImmediatePropagationStopped()||h(a,c,e[i])}};return c.elem=a,c}function Ha(a,b,c){c.call(a,b)}function Ia(a,b,c){var d=b.relatedTarget;d&&(d===a||Ld.call(a,d))||c.call(a,b)}function Ja(){this.$get=function(){return i(oa,{hasClass:function(a,b){return a.attr&&(a=a[0]),va(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),xa(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),wa(a,b)}})}}function Ka(a,b){var c=a&&a.$$hashKey;return c?("function"==typeof c&&(c=a.$$hashKey()),c):(c=typeof a,c="function"===c||"object"===c&&null!==a?a.$$hashKey=c+":"+(b||g)():c+":"+a)}function La(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function Ma(a){return a=Function.prototype.toString.call(a).replace(Xd,""),a.match(Td)||a.match(Ud)}function Na(a){return(a=Ma(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Oa(a,b){function c(a){return function(b,c){if(!s(b))return a(b,c);d(b,f(a))}}function e(a,b){if(ca(a,"service"),(x(b)||nd(b))&&(b=p.instantiate(b)),!b.$get)throw Yd("pget",a);return n[a+"Provider"]=b}function g(a,b){return function(){var c=v.invoke(b,this);if(q(c))throw Yd("undef",a);return c}}function h(a,b,c){return e(a,{$get:!1!==c?g(a,b):b})}function i(a){aa(q(a)||nd(a),"modulesToLoad","not an array");var b,c=[];return d(a,function(a){function d(a){var b,c;for(b=0,c=a.length;b<c;b++){var d=a[b],e=p.get(d[0]);e[d[1]].apply(e,d[2])}}if(!m.get(a)){m.set(a,!0);try{u(a)?(b=_c(a),c=c.concat(i(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):x(a)?c.push(p.invoke(a)):nd(a)?c.push(p.invoke(a)):ba(a,"module")}catch(b){throw nd(a)&&(a=a[a.length-1]),b.message&&b.stack&&-1===b.stack.indexOf(b.message)&&(b=b.message+"\n"+b.stack),Yd("modulerr",a,b.stack||b.message||b)}}}),c}function j(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===k)throw Yd("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=k,a[b]=c(b,d),a[b]}catch(c){throw a[b]===k&&delete a[b],c}finally{l.shift()}}function e(a,c,e){var f=[];a=Oa.$$annotate(a,b,e);for(var g=0,h=a.length;g<h;g++){var i=a[g];if("string"!=typeof i)throw Yd("itkn",i);f.push(c&&c.hasOwnProperty(i)?c[i]:d(i,e))}return f}return{invoke:function(a,b,c,d){if("string"==typeof c&&(d=c,c=null),c=e(a,c,d),nd(a)&&(a=a[a.length-1]),d=a,Yc||"function"!=typeof d)d=!1;else{var f=d.$$ngIsClass;B(f)||(f=d.$$ngIsClass=/^(?:class\b|constructor\()/.test(Function.prototype.toString.call(d))),d=f}return d?(c.unshift(null),new(Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=nd(a)?a[a.length-1]:a;return a=e(a,b,c),a.unshift(null),new(Function.prototype.bind.apply(d,a))},get:d,annotate:Oa.$$annotate,has:function(b){return n.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var k={},l=[],m=new Rd,n={$provide:{provider:c(e),factory:c(h),service:c(function(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}),value:c(function(a,b){return h(a,o(b),!1)}),constant:c(function(a,b){ca(a,"constant"),n[a]=b,r[a]=b}),decorator:function(a,b){var c=p.get(a+"Provider"),d=c.$get;c.$get=function(){var a=v.invoke(d,c);return v.invoke(b,null,{$delegate:a})}}}},p=n.$injector=j(n,function(a,b){throw kd.isString(b)&&l.push(b),Yd("unpr",l.join(" <- "))}),r={},t=j(r,function(a,b){var c=p.get(a+"Provider",b);return v.invoke(c.$get,c,void 0,a)}),v=t;n.$injectorProvider={$get:o(t)};var w=i(a),v=t.get("$injector");return v.strictDi=b,d(w,function(a){a&&v.invoke(a)}),v}function Pa(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){if("a"===F(a))return b=a,!0}),b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset,x(c)?c=c():D(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):v(c)||(c=0),c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=u(a)?a:v(a)?a.toString():c.hash();var b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var h=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||Da(function(){d.$evalAsync(g)})}),g}]}function Qa(a,b){return a||b?a?b?(nd(a)&&(a=a.join(" ")),nd(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function Ra(a){u(a)&&(a=a.split(" "));var b=fa();return d(a,function(a){a.length&&(b[a]=!0)}),b}function Sa(a){return s(a)?a:{}}function Ta(a,b,c,e){function f(a){try{a.apply(null,ed.call(arguments,1))}finally{if(0===--r)for(;s.length;)try{s.pop()()}catch(a){c.error(a)}}}function g(){x=null,i()}function h(){t=y(),t=q(t)?null:t,I(t,B)&&(t=B),u=B=t}function i(){var a=u;h(),v===j.url()&&a===t||(v=j.url(),u=t,d(z,function(a){a(j.url(),t)}))}var j=this,k=a.location,l=a.history,n=a.setTimeout,o=a.clearTimeout,p={};j.isMock=!1;var r=0,s=[];j.$$completeOutstandingRequest=f,j.$$incOutstandingRequestCount=function(){r++},j.notifyWhenNoOutstandingRequests=function(a){0===r?a():s.push(a)};var t,u,v=k.href,w=b.find("base"),x=null,y=e.history?function(){try{return l.state}catch(a){}}:m;h(),j.url=function(b,c,d){if(q(d)&&(d=null),k!==a.location&&(k=a.location),l!==a.history&&(l=a.history),b){var f=u===d;if(v===b&&(!e.history||f))return j;var g=v&&xb(v)===xb(b);return v=b,u=d,!e.history||g&&f?(g||(x=b),c?k.replace(b):g?(c=k,d=b.indexOf("#"),d=-1===d?"":b.substr(d),c.hash=d):k.href=b,k.href!==b&&(x=b)):(l[c?"replaceState":"pushState"](d,"",b),h()),x&&(x=b),j}return x||k.href.replace(/%27/g,"'")},j.state=function(){return t};var z=[],A=!1,B=null;j.onUrlChange=function(b){return A||(e.history&&Zc(a).on("popstate",g),Zc(a).on("hashchange",g),A=!0),z.push(b),b},j.$$applicationDestroyed=function(){Zc(a).off("hashchange popstate",g)},j.$$checkUrlChange=i,j.baseHref=function(){var a=w.attr("href");return a?a.replace(/^(https?:)?\/\/[^\/]*/,""):""},j.defer=function(a,b){var c;return r++,c=n(function(){delete p[c],f(a)},b||0),p[c]=!0,c},j.defer.cancel=function(a){return!!p[a]&&(delete p[a],o(a),f(m),!0)}}function Ua(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Ta(a,d,b,c)}]}function Va(){this.$get=function(){function a(a,d){function e(a){a!==m&&(n?n===a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(a in c)throw b("$cacheFactory")("iid",a);var g=0,h=i({},d,{id:a}),j=fa(),k=d&&d.capacity||Number.MAX_VALUE,l=fa(),m=null,n=null;return c[a]={put:function(a,b){if(!q(b)){if(k<Number.MAX_VALUE){e(l[a]||(l[a]={key:a}))}return a in j||g++,j[a]=b,g>k&&this.remove(n.key),b}},get:function(a){if(k<Number.MAX_VALUE){var b=l[a];if(!b)return;e(b)}return j[a]},remove:function(a){if(k<Number.MAX_VALUE){var b=l[a];if(!b)return;b===m&&(m=b.p),b===n&&(n=b.n),f(b.n,b.p),delete l[a]}a in j&&(delete j[a],g--)},removeAll:function(){j=fa(),g=0,l=fa(),m=n=null},destroy:function(){l=h=j=null,delete c[a]},info:function(){return i({},h,{size:g})}}}var c={};return a.info=function(){var a={};return d(c,function(b,c){a[c]=b.info()}),a},a.get=function(a){return c[a]},a}}function Wa(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Xa(b,c){function e(a,b,c){var e=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,f=fa();return d(a,function(a,d){if(a in y)f[d]=y[a];else{var g=a.match(e);if(!g)throw ee("iscp",b,d,a,c?"controller bindings definition":"isolate scope definition");f[d]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||d},g[4]&&(y[a]=f[d])}}),f}function g(a){var b=a.charAt(0);if(!b||b!==cd(b))throw ee("baddir",a);if(a!==a.trim())throw ee("baddir",a)}function h(a){var b=a.require||a.controller&&a.name;return!nd(b)&&s(b)&&d(b,function(a,c){var d=a.match(v);a.substring(d[0].length)||(b[c]=d[0]+c)}),b}var j={},k=/^\s*directive:\s*([\w-]+)\s+(.*)$/,p=/(([\w-]+)(?::([^;]+))?;?)/,t=E("ngSrc,ngSrcset,src,srcset"),v=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,w=/^(on[a-z]+|formaction)$/,y=fa();this.directive=function a(c,e){return aa(c,"name"),ca(c,"directive"),u(c)?(g(c),aa(e,"directiveFactory"),j.hasOwnProperty(c)||(j[c]=[],b.factory(c+"Directive",["$injector","$exceptionHandler",function(a,b){var e=[];return d(j[c],function(d,f){try{var g=a.invoke(d);x(g)?g={compile:o(g)}:!g.compile&&g.link&&(g.compile=o(g.link)),g.priority=g.priority||0,g.index=f,g.name=g.name||c,g.require=h(g);var i=g,j=g.restrict;if(j&&(!u(j)||!/[EACM]/.test(j)))throw ee("badrestrict",j,c);i.restrict=j||"EA",g.$$moduleName=d.$$moduleName,e.push(g)}catch(a){b(a)}}),e}])),j[c].push(e)):d(c,f(a)),this},this.component=function(a,b){function c(a){function c(b){return x(b)||nd(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:e,controllerAs:ab(b.controller)||b.controllerAs||"$ctrl",template:c(f),templateUrl:c(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};return d(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)}),g}var e=b.controller||function(){};return d(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,x(e)&&(e[b]=a))}),c.$inject=["$injector"],this.directive(a,c)},this.aHrefSanitizationWhitelist=function(a){return r(a)?(c.aHrefSanitizationWhitelist(a),this):c.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return r(a)?(c.imgSrcSanitizationWhitelist(a),this):c.imgSrcSanitizationWhitelist()};var z=!0;this.debugInfoEnabled=function(a){return r(a)?(z=a,this):z};var C=!1;this.preAssignBindingsEnabled=function(a){return r(a)?(C=a,this):C};var D=10;this.onChangesTtl=function(a){return arguments.length?(D=a,this):D};var H=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(H=a,this):H};var J=!0;this.cssClassDirectivesEnabled=function(a){return arguments.length?(J=a,this):J},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(b,c,f,g,h,o,y,E,L,M){function N(){try{if(!--Aa)throw va=void 0,ee("infchng",D);y.$apply(function(){for(var a=[],b=0,c=va.length;b<c;++b)try{va[b]()}catch(b){a.push(b)}if(va=void 0,a.length)throw a})}finally{Aa++}}function O(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;c<d;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a}function P(a,b,c){xa.innerHTML="<span "+b+">",b=xa.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name),d.value=c,a.attributes.setNamedItem(d)}function R(a,b){try{a.addClass(b)}catch(a){}}function S(a,b,c,d,e){a instanceof Zc||(a=Zc(a));var f=T(a,b,a,c,d,e);S.$$addScopeClass(a);var g=null;return function(b,c,d){if(!a)throw ee("multilink");aa(b,"scope"),e&&e.needsNewScope&&(b=b.$parent.$new()),d=d||{};var h=d.parentBoundTranscludeFn,i=d.transcludeControllers;if(d=d.futureParentElement,h&&h.$$boundTransclude&&(h=h.$$boundTransclude),g||(g=(d=d&&d[0])&&"foreignobject"!==F(d)&&hd.call(d).match(/SVG/)?"svg":"html"),d="html"!==g?Zc(na(g,Zc("<div>").append(a).html())):c?Md.clone.call(a):a,i)for(var j in i)d.data("$"+j+"Controller",i[j].instance);return S.$$addScopeInfo(d,b),c&&c(d,b),f&&f(b,d,d,h),c||(a=f=null),d}}function T(a,b,c,d,e,f){function g(a,c,d,e){var f,g,h,i,j,k,n;if(l)for(n=Array(c.length),i=0;i<m.length;i+=3)f=m[i],n[f]=c[f];else n=c;for(i=0,j=m.length;i<j;)g=n[m[i++]],c=m[i++],f=m[i++],c?(c.scope?(h=a.$new(),S.$$addScopeInfo(Zc(g),h)):h=a,k=c.transcludeOnThisElement?V(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?V(a,b):null,c(f,h,g,d,k)):f&&f(a,g.childNodes,void 0,e)}for(var h,i,j,k,l,m=[],n=nd(a)||a instanceof Zc,o=0;o<a.length;o++)h=new O,11===Yc&&U(a,o,n),i=W(a[o],[],h,0===o?d:void 0,e),(f=i.length?ba(i,a[o],h,b,c,null,[],[],f):null)&&f.scope&&S.$$addScopeClass(h.$$element),h=f&&f.terminal||!(j=a[o].childNodes)||!j.length?null:T(j,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b),(f||h)&&(m.push(o,f,h),k=!0,l=l||f),f=null;return k?g:null}function U(a,b,c){var d,e=a[b],f=e.parentNode;if(e.nodeType===yd)for(;(d=f?e.nextSibling:a[b+1])&&d.nodeType===yd;)e.nodeValue+=d.nodeValue,d.parentNode&&d.parentNode.removeChild(d),c&&d===a[b+1]&&a.splice(b+1,1)}function V(a,b,c){function d(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})}var e,f=d.$$slots=fa();for(e in b.$$slots)f[e]=b.$$slots[e]?V(a,b.$$slots[e],c):null;return d}function W(a,b,c,d,e){var f,g=c.$attr;switch(a.nodeType){case 1:f=F(a),ga(b,Za(f),"E",d,e);for(var h,i,j,k,l=a.attributes,m=0,n=l&&l.length;m<n;m++){var o=!1,q=!1;h=l[m],i=h.name,j=h.value,h=Za(i),(k=Ea.test(h))&&(i=i.replace(ge,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()})),(h=h.match(Ga))&&ha(h[1])&&(o=i,q=i.substr(0,i.length-5)+"end",i=i.substr(0,i.length-6)),h=Za(i.toLowerCase()),g[h]=i,!k&&c.hasOwnProperty(h)||(c[h]=j,Fa(a,h)&&(c[h]=!0)),qa(a,b,j,h,k),ga(b,h,"A",d,e,o,q)}if("input"===f&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete","off"),!za)break;if(g=a.className,s(g)&&(g=g.animVal),u(g)&&""!==g)for(;a=p.exec(g);)h=Za(a[2]),ga(b,h,"C",d,e)&&(c[h]=pd(a[3])),g=g.substr(a.index+a[0].length);break;case yd:ma(b,a.nodeValue);break;case 8:if(!ya)break;X(a,b,c,d,e)}return b.sort(ka),b}function X(a,b,c,d,e){try{var f=k.exec(a.nodeValue);if(f){var g=Za(f[1]);ga(b,g,"M",d,e)&&(c[g]=pd(f[2]))}}catch(a){}}function Y(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b))do{if(!a)throw ee("uterdir",b,c);1===a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(0<e);else d.push(a);return Zc(d)}function Z(a,b,c){return function(d,e,f,g,h){return e=Y(e[0],b,c),a(d,e,f,g,h)}}function $(a,b,c,d,e,f){var g;return a?S(b,c,d,e,f):function(){return g||(g=S(b,c,d,e,f),b=c=f=null),g.apply(this,arguments)}}function ba(a,b,c,e,g,h,j,k,l){function m(a,b,c,d){a&&(c&&(a=Z(a,c,d)),a.require=o.require,a.directiveName=p,(z===o||o.$$isolateScope)&&(a=sa(a,{isolateScope:!0})),j.push(a)),b&&(c&&(b=Z(b,c,d)),b.require=o.require,b.directiveName=p,(z===o||o.$$isolateScope)&&(b=sa(b,{isolateScope:!0})),k.push(b))}function n(a,e,g,h,l){function m(a,b,c,d){var e;if(A(a)||(d=c,c=b,b=a,a=void 0),H&&(e=u),c||(c=H?D.parent():D),!d)return l(a,b,e,c,G);var f=l.$$slots[d];if(f)return f(a,b,e,c,G);if(q(f))throw ee("noslot",d,Q(D))}var n,o,p,r,t,u,v,D;b===g?(h=c,D=c.$$element):(D=Zc(g),h=new O(D,c)),t=e,z?r=e.$new(!0):w&&(t=e.$parent),l&&(v=m,v.$$boundTransclude=l,v.isSlotFilled=function(a){return!!l.$$slots[a]}),y&&(u=da(D,h,v,y,r,e,z)),z&&(S.$$addScopeInfo(D,r,!0,!(B&&(B===z||B===z.$$originalDirective))),S.$$addScopeClass(D,!0),r.$$isolateBindings=z.$$isolateBindings,o=ua(e,h,r,r.$$isolateBindings,z),o.removeWatches&&r.$on("$destroy",o.removeWatches));for(n in u){o=y[n],p=u[n];var E=o.$$bindings.bindToController;if(C){p.bindingInfo=E?ua(t,h,p.instance,E,o):{};var F=p();F!==p.instance&&(p.instance=F,D.data("$"+o.name+"Controller",F),p.bindingInfo.removeWatches&&p.bindingInfo.removeWatches(),p.bindingInfo=ua(t,h,p.instance,E,o))}else p.instance=p(),D.data("$"+o.name+"Controller",p.instance),p.bindingInfo=ua(t,h,p.instance,E,o)}for(d(y,function(a,b){var c=a.require;a.bindToController&&!nd(c)&&s(c)&&i(u[b].instance,ca(b,c,D,u))}),d(u,function(a){var b=a.instance;if(x(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(a){f(a)}if(x(b.$onInit))try{b.$onInit()}catch(a){f(a)}x(b.$doCheck)&&(t.$watch(function(){b.$doCheck()}),b.$doCheck()),x(b.$onDestroy)&&t.$on("$destroy",function(){b.$onDestroy()})}),n=0,o=j.length;n<o;n++)p=j[n],ta(p,p.isolateScope?r:e,D,h,p.require&&ca(p.directiveName,p.require,D,u),v);var G=e;for(z&&(z.template||null===z.templateUrl)&&(G=r),a&&a(G,g.childNodes,void 0,l),n=k.length-1;0<=n;n--)p=k[n],ta(p,p.isolateScope?r:e,D,h,p.require&&ca(p.directiveName,p.require,D,u),v);d(u,function(a){a=a.instance,x(a.$postLink)&&a.$postLink()})}l=l||{};for(var o,p,r,t,u,v=-Number.MAX_VALUE,w=l.newScopeDirective,y=l.controllerDirectives,z=l.newIsolateScopeDirective,B=l.templateDirective,D=l.nonTlbTranscludeDirective,E=!1,G=!1,H=l.hasElementTranscludeDirective,I=c.$$element=Zc(b),J=e,L=!1,M=!1,N=0,P=a.length;N<P;N++){o=a[N];var R=o.$$start,T=o.$$end;if(R&&(I=Y(b,R,T)),r=void 0,v>o.priority)break;if((u=o.scope)&&(o.templateUrl||(s(u)?(la("new/isolated scope",z||w,o,I),z=o):la("new/isolated scope",z,o,I)),w=w||o),p=o.name,!L&&(o.replace&&(o.templateUrl||o.template)||o.transclude&&!o.$$tlb)){for(u=N+1;L=a[u++];)if(L.transclude&&!L.$$tlb||L.replace&&(L.templateUrl||L.template)){M=!0;break}L=!0}if(!o.templateUrl&&o.controller&&(y=y||fa(),la("'"+p+"' controller",y[p],o,I),y[p]=o),u=o.transclude)if(E=!0,o.$$tlb||(la("transclusion",D,o,I),D=o),"element"===u)H=!0,v=o.priority,r=I,I=c.$$element=Zc(S.$$createComment(p,c[p])),b=I[0],ra(g,ed.call(r,0),b),r[0].$$parentNode=r[0].parentNode,J=$(M,r,e,v,h&&h.name,{nonTlbTranscludeDirective:D});else{var U=fa();if(s(u)){r=[];var V=fa(),X=fa();d(u,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a,V[a]=b,U[b]=null,X[b]=c}),d(I.contents(),function(a){var b=V[Za(F(a))];b?(X[b]=!0,U[b]=U[b]||[],U[b].push(a)):r.push(a)}),d(X,function(a,b){if(!a)throw ee("reqslot",b)});for(var _ in U)U[_]&&(U[_]=$(M,U[_],e))}else r=Zc(pa(b)).contents();I.empty(),J=$(M,r,e,void 0,void 0,{needsNewScope:o.$$isolateScope||o.$$newScope}),J.$$slots=U}if(o.template)if(G=!0,la("template",B,o,I),B=o,u=x(o.template)?o.template(I,c):o.template,u=Da(u),o.replace){if(h=o,r=Hd.test(u)?_a(na(o.templateNamespace,pd(u))):[],b=r[0],1!==r.length||1!==b.nodeType)throw ee("tplrt",p,"");ra(g,I,b),P={$attr:{}},u=W(b,[],P);var aa=a.splice(N+1,a.length-(N+1));(z||w)&&ea(u,z,w),a=a.concat(u).concat(aa),ia(c,P),P=a.length}else I.html(u);if(o.templateUrl)G=!0,la("template",B,o,I),B=o,o.replace&&(h=o),n=ja(a.splice(N,a.length-N),I,c,g,E&&J,j,k,{controllerDirectives:y,newScopeDirective:w!==o&&w,newIsolateScopeDirective:z,templateDirective:B,nonTlbTranscludeDirective:D}),P=a.length;else if(o.compile)try{t=o.compile(I,c,J);var ba=o.$$originalDirective||o;x(t)?m(null,K(ba,t),R,T):t&&m(K(ba,t.pre),K(ba,t.post),R,T)}catch(a){f(a,Q(I))}o.terminal&&(n.terminal=!0,v=Math.max(v,o.priority))}return n.scope=w&&!0===w.scope,n.transcludeOnThisElement=E,n.templateOnThisElement=G,n.transclude=J,l.hasElementTranscludeDirective=H,n}function ca(a,b,c,e){var f;if(u(b)){var g=b.match(v);b=b.substring(g[0].length);var h=g[1]||g[3],g="?"===g[2];if("^^"===h?c=c.parent():f=(f=e&&e[b])&&f.instance,!f){var i="$"+b+"Controller";f=h?c.inheritedData(i):c.data(i)}if(!f&&!g)throw ee("ctreq",b,a)}else if(nd(b))for(f=[],h=0,g=b.length;h<g;h++)f[h]=ca(a,b[h],c,e);else s(b)&&(f={},d(b,function(b,d){f[d]=ca(a,b,c,e)}));return f||null}function da(a,b,c,d,e,f,g){var h,i=fa();for(h in d){var j=d[h],k={$scope:j===g||j.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},l=j.controller;"@"===l&&(l=b[j.name]),k=o(l,k,!0,j.controllerAs),i[j.name]=k,a.data("$"+j.name+"Controller",k.instance)}return i}function ea(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=l(a[d],{$$isolateScope:b,$$newScope:c})}function ga(a,c,d,f,g,h,i){if(c===g)return null;var k=null;if(j.hasOwnProperty(c)){g=b.get(c+"Directive");for(var m=0,n=g.length;m<n;m++)if(c=g[m],(q(f)||f>c.priority)&&-1!==c.restrict.indexOf(d)){if(h&&(c=l(c,{$$start:h,$$end:i})),!c.$$bindings){var o=k=c,p=c.name,r={isolateScope:null,bindToController:null};if(s(o.scope)&&(!0===o.bindToController?(r.bindToController=e(o.scope,p,!0),r.isolateScope={}):r.isolateScope=e(o.scope,p,!1)),s(o.bindToController)&&(r.bindToController=e(o.bindToController,p,!0)),r.bindToController&&!o.controller)throw ee("noctrl",p);k=k.$$bindings=r,s(k.isolateScope)&&(c.$$isolateBindings=k.isolateScope)}a.push(c),k=c}}return k}function ha(a){if(j.hasOwnProperty(a))for(var c=b.get(a+"Directive"),d=0,e=c.length;d<e;d++)if(a=c[d],a.multiElement)return!0;return!1}function ia(a,b){var c=b.$attr,e=a.$attr;d(a,function(d,e){"$"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d=d.length?d+("style"===e?";":" ")+b[e]:b[e]),a.$set(e,d,!0,c[e]))}),d(b,function(b,d){a.hasOwnProperty(d)||"$"===d.charAt(0)||(a[d]=b,"class"!==d&&"style"!==d&&(e[d]=c[d]))})}function ja(a,b,c,e,h,i,j,k){var m,n,o=[],p=b[0],q=a.shift(),r=l(q,{templateUrl:null,transclude:null,replace:null,$$originalDirective:q}),t=x(q.templateUrl)?q.templateUrl(b,c):q.templateUrl,u=q.templateNamespace;return b.empty(),g(t).then(function(f){var g,l;if(f=Da(f),q.replace){if(f=Hd.test(f)?_a(na(u,pd(f))):[],g=f[0],1!==f.length||1!==g.nodeType)throw ee("tplrt",q.name,t);f={$attr:{}},ra(e,b,g);var v=W(g,[],f);s(q.scope)&&ea(v,!0),a=v.concat(a),ia(c,f)}else g=p,b.html(f);for(a.unshift(r),m=ba(a,g,c,h,b,q,i,j,k),d(e,function(a,c){a===g&&(e[c]=b[0])}),n=T(b[0].childNodes,h);o.length;){f=o.shift(),l=o.shift();var w=o.shift(),x=o.shift(),v=b[0];if(!f.$$destroyed){if(l!==p){var y=l.className;k.hasElementTranscludeDirective&&q.replace||(v=pa(g)),ra(w,Zc(l),v),R(Zc(v),y)}l=m.transcludeOnThisElement?V(f,m.transclude,x):x,m(n,f,v,e,l)}}o=null}).catch(function(a){a instanceof Error&&f(a)}),function(a,b,c,d,e){a=e,b.$$destroyed||(o?o.push(b,c,d,a):(m.transcludeOnThisElement&&(a=V(b,m.transclude,e)),m(n,b,c,d,a)))}}function ka(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function la(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw ee("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,Q(d))}function ma(a,b){var d=c(b,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;return b&&S.$$addBindingClass(a),function(a,c){var e=c.parent();b||S.$$addBindingClass(e),S.$$addBindingInfo(e,d.expressions),a.$watch(d,function(a){c[0].nodeValue=a})}}})}function na(b,c){switch(b=cd(b||"html")){case"svg":case"math":var d=a.document.createElement("div");return d.innerHTML="<"+b+">"+c+"</"+b+">",d.childNodes[0].childNodes;default:return c}}function oa(a,b){if("srcdoc"===b)return E.HTML;var c=F(a);if("src"===b||"ngSrc"===b){if(-1===["img","video","audio","source","track"].indexOf(c))return E.RESOURCE_URL}else if("xlinkHref"===b||"form"===c&&"action"===b||"link"===c&&"href"===b)return E.RESOURCE_URL}function qa(a,b,d,e,f){var g=oa(a,e),h=t[e]||f,i=c(d,!f,g,h);if(i){if("multiple"===e&&"select"===F(a))throw ee("selmulti",Q(a));if(w.test(e))throw ee("nodomevents");b.push({priority:100,compile:function(){return{pre:function(a,b,f){b=f.$$observers||(f.$$observers=fa());var j=f[e];j!==d&&(i=j&&c(j,!0,g,h),d=j),i&&(f[e]=i(a),(b[e]||(b[e]=[])).$$inter=!0,(f.$$observers&&f.$$observers[e].$$scope||a).$watch(i,function(a,b){"class"===e&&a!==b?f.$updateClass(a,b):f.$set(e,a)}))}}}})}}function ra(b,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(b)for(e=0,f=b.length;e<f;e++)if(b[e]===g){b[e++]=d,f=e+h-1;for(var j=b.length;e<j;e++,f++)f<j?b[e]=b[f]:delete b[e];b.length-=h-1,b.context===g&&(b.context=d);break}for(i&&i.replaceChild(d,g),b=a.document.createDocumentFragment(),e=0;e<h;e++)b.appendChild(c[e]);for(Zc.hasData(g)&&(Zc.data(d,Zc.data(g)),Zc(g).off("$destroy")),Zc.cleanData(b.querySelectorAll("*")),e=1;e<h;e++)delete c[e];c[0]=d,c.length=1}function sa(a,b){return i(function(){return a.apply(null,arguments)},a,b)}function ta(a,b,c,d,e,g){try{a(b,c,d,e,g)}catch(a){f(a,Q(c))}}function ua(a,b,e,f,g){function i(b,c,d){!x(e.$onChanges)||c===d||c!==c&&d!==d||(va||(a.$$postDigest(N),va=[]),k||(k={},va.push(j)),k[b]&&(d=k[b].previousValue),k[b]=new Ya(d,c))}function j(){e.$onChanges(k),k=void 0}var k,l=[],n={};return d(f,function(d,f){var j,k,o,p,q=d.attrName,r=d.optional;switch(d.mode){case"@":r||bd.call(b,q)||(e[f]=b[q]=void 0),r=b.$observe(q,function(a){(u(a)||B(a))&&(i(f,a,e[f]),e[f]=a)}),b.$$observers[q].$$scope=a,j=b[q],u(j)?e[f]=c(j)(a):B(j)&&(e[f]=j),n[f]=new Ya(fe,e[f]),l.push(r);break;case"=":if(!bd.call(b,q)){if(r)break;b[q]=void 0}if(r&&!b[q])break;k=h(b[q]),p=k.literal?I:function(a,b){return a===b||a!==a&&b!==b},o=k.assign||function(){throw j=e[f]=k(a),ee("nonassign",b[q],q,g.name)},j=e[f]=k(a),r=function(b){return p(b,e[f])||(p(b,j)?o(a,b=e[f]):e[f]=b),j=b},r.$stateful=!0,r=d.collection?a.$watchCollection(b[q],r):a.$watch(h(b[q],r),null,k.literal),l.push(r);break;case"<":if(!bd.call(b,q)){if(r)break;b[q]=void 0}if(r&&!b[q])break;k=h(b[q]);var s=k.literal,t=e[f]=k(a);n[f]=new Ya(fe,e[f]),r=a.$watch(k,function(a,b){if(b===a){if(b===t||s&&I(b,t))return;b=t}i(f,a,b),e[f]=a},s),l.push(r);break;case"&":if((k=b.hasOwnProperty(q)?h(b[q]):m)===m&&r)break;e[f]=function(b){return k(a,b)}}}),{initialChanges:n,removeWatches:l.length&&function(){for(var a=0,b=l.length;a<b;++a)l[a]()}}}var va,wa=/^\w/,xa=a.document.createElement("div"),ya=H,za=J,Aa=D;O.prototype={$normalize:Za,$addClass:function(a){a&&0<a.length&&L.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&L.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=$a(a,b);c&&c.length&&L.addClass(this.$$element,c),(c=$a(b,a))&&c.length&&L.removeClass(this.$$element,c)},$set:function(a,b,c,e){var g=Fa(this.$$element[0],a),h=Pd[a],i=a;if(g?(this.$$element.prop(a,b),e=g):h&&(this[h]=b,i=h),this[a]=b,e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=_(a,"-")),"a"===(g=F(this.$$element))&&("href"===a||"xlinkHref"===a)||"img"===g&&"src"===a)this[a]=b=M(b,"src"===a);else if("img"===g&&"srcset"===a&&r(b)){for(var g="",h=pd(b),j=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,j=/\s/.test(h)?j:/(,)/,h=h.split(j),j=Math.floor(h.length/2),k=0;k<j;k++)var l=2*k,g=g+M(pd(h[l]),!0),g=g+" "+pd(h[l+1]);h=pd(h[2*k]).split(/\s/),g+=M(pd(h[0]),!0),2===h.length&&(g+=" "+pd(h[1])),this[a]=b=g}!1!==c&&(null===b||q(b)?this.$$element.removeAttr(e):wa.test(e)?this.$$element.attr(e,b):P(this.$$element[0],e,b)),(a=this.$$observers)&&d(a[i],function(a){try{a(b)}catch(a){f(a)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=fa()),e=d[a]||(d[a]=[]);return e.push(b),y.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||q(c[a])||b(c[a])}),function(){G(e,b)}}};var Ba=c.startSymbol(),Ca=c.endSymbol(),Da="{{"===Ba&&"}}"===Ca?n:function(a){return a.replace(/\{\{/g,Ba).replace(/}}/g,Ca)},Ea=/^ngAttr[A-Z]/,Ga=/^(.+)Start$/;return S.$$addBindingInfo=z?function(a,b){var c=a.data("$binding")||[];nd(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:m,S.$$addBindingClass=z?function(a){R(a,"ng-binding")}:m,S.$$addScopeInfo=z?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:m,S.$$addScopeClass=z?function(a,b){R(a,b?"ng-isolate-scope":"ng-scope")}:m,S.$$createComment=function(b,c){var d="";return z&&(d=" "+(b||"")+": ",c&&(d+=c+" ")),a.document.createComment(d)},S}]}
function Ya(a,b){this.previousValue=a,this.currentValue=b}function Za(a){return a.replace(ge,"").replace(he,ka)}function $a(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g===e[h])continue a;c+=(0<c.length?" ":"")+g}return c}function _a(a){a=Zc(a);var b=a.length;if(1>=b)return a;for(;b--;){var c=a[b];(8===c.nodeType||c.nodeType===yd&&""===c.nodeValue.trim())&&fd.call(a,b,1)}return a}function ab(a,b){if(b&&u(b))return b;if(u(a)){var c=je.exec(a);if(c)return c[3]}}function bb(){var a={},c=!1;this.has=function(b){return a.hasOwnProperty(b)},this.register=function(b,c){ca(b,"controller"),s(b)?i(a,b):a[b]=c},this.allowGlobals=function(){c=!0},this.$get=["$injector","$window",function(d,e){function f(a,c,d,e){if(!a||!s(a.$scope))throw b("$controller")("noscp",e,c);a.$scope[c]=d}return function(b,g,h,j){var k,l,m;if(h=!0===h,j&&u(j)&&(m=j),u(b)){if(!(j=b.match(je)))throw ie("ctrlfmt",b);if(l=j[1],m=m||j[3],!(b=a.hasOwnProperty(l)?a[l]:da(g.$scope,l,!0)||(c?da(e,l,!0):void 0)))throw ie("ctrlreg",l);ba(b,l,!0)}return h?(h=(nd(b)?b[b.length-1]:b).prototype,k=Object.create(h||null),m&&f(g,m,k,l||b.name),i(function(){var a=d.invoke(b,k,g,l);return a!==k&&(s(a)||x(a))&&(k=a,m&&f(g,m,k,l||b.name)),k},{instance:k,identifier:m})):(k=d.instantiate(b,g,l),m&&f(g,m,k,l||b.name),k)}}]}function cb(){this.$get=["$window",function(a){return Zc(a.document)}]}function db(){this.$get=["$document","$rootScope",function(a,b){function c(){e=d.hidden}var d=a[0],e=d&&d.hidden;return a.on("visibilitychange",c),b.$on("$destroy",function(){a.off("visibilitychange",c)}),function(){return e}}]}function eb(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function fb(a){return s(a)?w(a)?a.toISOString():M(a):a}function gb(){this.$get=function(){return function(a){if(!a)return"";var b=[];return e(a,function(a,c){null===a||q(a)||(nd(a)?d(a,function(a){b.push(V(c)+"="+V(fb(a)))}):b.push(V(c)+"="+V(fb(a))))}),b.join("&")}}}function hb(){this.$get=function(){return function(a){function b(a,f,g){null===a||q(a)||(nd(a)?d(a,function(a,c){b(a,f+"["+(s(a)?c:"")+"]")}):s(a)&&!w(a)?e(a,function(a,c){b(a,f+(g?"":"[")+c+(g?"":"]"))}):c.push(V(f)+"="+V(fb(a))))}if(!a)return"";var c=[];return b(a,"",!0),c.join("&")}}}function ib(a,b){if(u(a)){var c=a.replace(pe,"").trim();if(c){var d=b("Content-Type");(d=d&&0===d.indexOf(le))||(d=(d=c.match(ne))&&oe[d[0]].test(c)),d&&(a=N(c))}}return a}function jb(a){var b,c=fa();return u(a)?d(a.split("\n"),function(a){b=a.indexOf(":");var d=cd(pd(a.substr(0,b)));a=pd(a.substr(b+1)),d&&(c[d]=c[d]?c[d]+", "+a:a)}):s(a)&&d(a,function(a,b){var d=cd(b),e=pd(a);d&&(c[d]=c[d]?c[d]+", "+e:e)}),c}function kb(a){var b;return function(c){return b||(b=jb(a)),c?(c=b[cd(c)],void 0===c&&(c=null),c):b}}function lb(a,b,c,e){return x(e)?e(a,b,c):(d(e,function(d){a=d(a,b,c)}),a)}function mb(){var a=this.defaults={transformResponse:[ib],transformRequest:[function(a){return s(a)&&"[object File]"!==hd.call(a)&&"[object Blob]"!==hd.call(a)&&"[object FormData]"!==hd.call(a)?M(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ia(me),put:ia(me),patch:ia(me)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},c=!1;this.useApplyAsync=function(a){return r(a)?(c=!!a,this):c};var e=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(f,g,h,j,k,l,n,o){function p(c){function e(a,b){for(var c=0,d=b.length;c<d;){var e=b[c++],f=b[c++];a=a.then(e,f)}return b.length=0,a}function g(a,b){var c,e={};return d(a,function(a,d){x(a)?null!=(c=a(b))&&(e[d]=c):e[d]=a}),e}function h(a){var b=i({},a);return b.data=lb(a.data,a.headers,a.status,j.transformResponse),a=a.status,200<=a&&300>a?b:l.reject(b)}if(!s(c))throw b("$http")("badreq",c);if(!u(o.valueOf(c.url)))throw b("$http")("badreq",c.url);var j=i({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer,jsonpCallbackParam:a.jsonpCallbackParam},c);j.headers=function(b){var c,d,e,f=a.headers,h=i({},b.headers),f=i({},f.common,f[cd(b.method)]);a:for(c in f){d=cd(c);for(e in h)if(cd(e)===d)continue a;h[c]=f[c]}return g(h,ia(b))}(c),j.method=dd(j.method),j.paramSerializer=u(j.paramSerializer)?n.get(j.paramSerializer):j.paramSerializer,f.$$incOutstandingRequestCount();var k=[],p=[];return c=l.resolve(j),d(z,function(a){(a.request||a.requestError)&&k.unshift(a.request,a.requestError),(a.response||a.responseError)&&p.push(a.response,a.responseError)}),c=e(c,k),c=c.then(function(b){var c=b.headers,e=lb(b.data,kb(c),void 0,b.transformRequest);return q(e)&&d(c,function(a,b){"content-type"===cd(b)&&delete c[b]}),q(b.withCredentials)&&!q(a.withCredentials)&&(b.withCredentials=a.withCredentials),t(b,e).then(h,h)}),c=e(c,p),c=c.finally(function(){f.$$completeOutstandingRequest(m)})}function t(b,e){function f(a){if(a){var b={};return d(a,function(a,d){b[d]=function(b){function d(){a(b)}c?k.$applyAsync(d):k.$$phase?d():k.$apply(d)}}),b}}function i(a,b,d,e){function f(){j(b,a,d,e)}t&&(200<=a&&300>a?t.put(E,[a,b,jb(d),e]):t.remove(E)),c?k.$applyAsync(f):(f(),k.$$phase||k.$apply())}function j(a,c,d,e){c=-1<=c?c:0,(200<=c&&300>c?A.resolve:A.reject)({data:a,status:c,headers:kb(d),config:b,statusText:e})}function m(a){j(a.data,a.status,ia(a.headers()),a.statusText)}function n(){var a=p.pendingRequests.indexOf(b);-1!==a&&p.pendingRequests.splice(a,1)}var t,z,A=l.defer(),B=A.promise,C=b.headers,D="jsonp"===cd(b.method),E=b.url;return D?E=o.getTrustedResourceUrl(E):u(E)||(E=o.valueOf(E)),E=v(E,b.paramSerializer(b.params)),D&&(E=w(E,b.jsonpCallbackParam)),p.pendingRequests.push(b),B.then(n,n),!b.cache&&!a.cache||!1===b.cache||"GET"!==b.method&&"JSONP"!==b.method||(t=s(b.cache)?b.cache:s(a.cache)?a.cache:y),t&&(z=t.get(E),r(z)?z&&x(z.then)?z.then(m,m):nd(z)?j(z[1],z[0],ia(z[2]),z[3]):j(z,200,{},"OK"):t.put(E,B)),q(z)&&((z=fc(b.url)?h()[b.xsrfCookieName||a.xsrfCookieName]:void 0)&&(C[b.xsrfHeaderName||a.xsrfHeaderName]=z),g(b.method,E,e,i,C,b.timeout,b.withCredentials,b.responseType,f(b.eventHandlers),f(b.uploadEventHandlers))),B}function v(a,b){return 0<b.length&&(a+=(-1===a.indexOf("?")?"?":"&")+b),a}function w(a,b){if(/[&?][^=]+=JSON_CALLBACK/.test(a))throw qe("badjsonp",a);if(new RegExp("[&?]"+b+"=").test(a))throw qe("badjsonp",b,a);return a+=(-1===a.indexOf("?")?"?":"&")+b+"=JSON_CALLBACK"}var y=j("$http");a.paramSerializer=u(a.paramSerializer)?n.get(a.paramSerializer):a.paramSerializer;var z=[];return d(e,function(a){z.unshift(u(a)?n.get(a):n.invoke(a))}),p.pendingRequests=[],function(a){d(arguments,function(a){p[a]=function(b,c){return p(i({},c||{},{method:a,url:b}))}})}("get","delete","head","jsonp"),function(a){d(arguments,function(a){p[a]=function(b,c,d){return p(i({},d||{},{method:a,url:b,data:c}))}})}("post","put","patch"),p.defaults=a,p}]}function nb(){this.$get=function(){return function(){return new a.XMLHttpRequest}}}function ob(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,c,d){return pb(a,d,a.defer,b,c[0])}]}function pb(a,b,c,e,f){function g(a,b,c){a=a.replace("JSON_CALLBACK",b);var d=f.createElement("script"),g=null;return d.type="text/javascript",d.src=a,d.async=!0,g=function(a){d.removeEventListener("load",g),d.removeEventListener("error",g),f.body.removeChild(d),d=null;var h=-1,i="unknown";a&&("load"!==a.type||e.wasCalled(b)||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},d.addEventListener("load",g),d.addEventListener("error",g),f.body.appendChild(d),g}return function(f,h,i,j,k,l,m,n,o,p){function s(){u&&u(),v&&v.abort()}if(h=h||a.url(),"jsonp"===cd(f))var t=e.createCallback(h),u=g(h,t,function(a,b){var d=200===a&&e.getResponse(t);r(w)&&c.cancel(w),u=v=null,j(a,d,"",b),e.removeCallback(t)});else{var v=b(f,h);if(v.open(f,h,!0),d(k,function(a,b){r(a)&&v.setRequestHeader(b,a)}),v.onload=function(){var a=v.statusText||"",b="response"in v?v.response:v.responseText,d=1223===v.status?204:v.status;0===d&&(d=b?200:"file"===ec(h).protocol?404:0);var e=v.getAllResponseHeaders();r(w)&&c.cancel(w),u=v=null,j(d,b,e,a)},f=function(){r(w)&&c.cancel(w),u=v=null,j(-1,null,null,"")},v.onerror=f,v.onabort=f,v.ontimeout=f,d(o,function(a,b){v.addEventListener(b,a)}),d(p,function(a,b){v.upload.addEventListener(b,a)}),m&&(v.withCredentials=!0),n)try{v.responseType=n}catch(a){if("json"!==n)throw a}v.send(q(i)?null:i)}if(0<l)var w=c(s,l);else l&&x(l.then)&&l.then(s)}}function qb(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(m,a).replace(n,b)}function h(a,b,c,d){var e=a.$watch(function(a){return e(),d(a)},b,c);return e}function j(f,j,m,n){function p(a){try{var b=a;return a=m?e.getTrusted(m,b):e.valueOf(b),n&&!r(a)?a:ga(a)}catch(a){d(re.interr(f,a))}}if(!f.length||-1===f.indexOf(a)){var s;return j||(j=g(f),s=o(j),s.exp=f,s.expressions=[],s.$$watchDelegate=h),s}n=!!n;var t,u,v=0,w=[],y=[];s=f.length;for(var z=[],A=[];v<s;){if(-1===(t=f.indexOf(a,v))||-1===(u=f.indexOf(b,t+k))){v!==s&&z.push(g(f.substring(v)));break}v!==t&&z.push(g(f.substring(v,t))),v=f.substring(t+k,u),w.push(v),y.push(c(v,p)),v=u+l,A.push(z.length),z.push("")}if(m&&1<z.length&&re.throwNoconcat(f),!j||w.length){var B=function(a){for(var b=0,c=w.length;b<c;b++){if(n&&q(a[b]))return;z[A[b]]=a[b]}return z.join("")};return i(function(a){var b=0,c=w.length,e=Array(c);try{for(;b<c;b++)e[b]=y[b](a);return B(e)}catch(a){d(re.interr(f,a))}},{exp:f,expressions:w,$$watchDelegate:function(a,b){var c;return a.$watchGroup(y,function(d,e){var f=B(d);x(b)&&b.call(this,f,d!==e?c:f,a),c=f})}})}}var k=a.length,l=b.length,m=new RegExp(a.replace(/./g,f),"g"),n=new RegExp(b.replace(/./g,f),"g");return j.startSymbol=function(){return a},j.endSymbol=function(){return b},j}]}function rb(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,c,d,e){function f(f,h,i,j){function k(){l?f.apply(null,m):f(p)}var l=4<arguments.length,m=l?ed.call(arguments,4):[],n=b.setInterval,o=b.clearInterval,p=0,q=r(j)&&!j,s=(q?d:c).defer(),t=s.promise;return i=r(i)?i:0,t.$$intervalId=n(function(){q?e.defer(k):a.$evalAsync(k),s.notify(p++),0<i&&p>=i&&(s.resolve(p),o(t.$$intervalId),delete g[t.$$intervalId]),q||a.$apply()},h),g[t.$$intervalId]=s,t}var g={};return f.cancel=function(a){return!!(a&&a.$$intervalId in g)&&(g[a.$$intervalId].promise.catch(m),g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0)},f}]}function sb(a){a=a.split("/");for(var b=a.length;b--;)a[b]=U(a[b]);return a.join("/")}function tb(a,b){var c=ec(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=k(c.port)||ue[c.protocol]||null}function ub(a,b){if(we.test(a))throw ve("badpath",a);var c="/"!==a.charAt(0);c&&(a="/"+a);var d=ec(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=S(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!==b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function vb(a,b){return a.slice(0,b.length)===b}function wb(a,b){if(vb(b,a))return b.substr(a.length)}function xb(a){var b=a.indexOf("#");return-1===b?a:a.substr(0,b)}function yb(a){return a.replace(/(#.+)|#$/,"$1")}function zb(a,b,c){this.$$html5=!0,c=c||"",tb(a,this),this.$$parse=function(a){var c=wb(b,a);if(!u(c))throw ve("ipthprfx",a,b);ub(c,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=T(this.$$search),c=this.$$hash?"#"+U(this.$$hash):"";this.$$url=sb(this.$$path)+(a?"?"+a:"")+c,this.$$absUrl=b+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return r(f=wb(a,d))?(g=f,g=c&&r(f=wb(c,f))?b+(wb("/",f)||f):a+g):r(f=wb(b,d))?g=b+f:b===d+"/"&&(g=b),g&&this.$$parse(g),!!g}}function Ab(a,b,c){tb(a,this),this.$$parse=function(d){var e,f=wb(a,d)||wb(b,d);q(f)||"#"!==f.charAt(0)?this.$$html5?e=f:(e="",q(f)&&(a=d,this.replace())):(e=wb(c,f),q(e)&&(e=f)),ub(e,this),d=this.$$path;var f=a,g=/^\/[A-Z]:(\/.*)/;vb(e,f)&&(e=e.replace(f,"")),g.exec(e)||(d=(e=g.exec(d))?e[1]:d),this.$$path=d,this.$$compose()},this.$$compose=function(){var b=T(this.$$search),d=this.$$hash?"#"+U(this.$$hash):"";this.$$url=sb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+(this.$$url?c+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(b,c){return xb(a)===xb(b)&&(this.$$parse(b),!0)}}function Bb(a,b,c){this.$$html5=!0,Ab.apply(this,arguments),this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a===xb(d)?f=d:(g=wb(b,d))?f=a+c+g:b===d+"/"&&(f=b),f&&this.$$parse(f),!!f},this.$$compose=function(){var b=T(this.$$search),d=this.$$hash?"#"+U(this.$$hash):"";this.$$url=sb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+c+this.$$url,this.$$urlUpdatedByLocation=!0}}function Cb(a){return function(){return this[a]}}function Db(a,b){return function(c){return q(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function Eb(){var a="!",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return r(b)?(a=b,this):a},this.html5Mode=function(a){return B(a)?(b.enabled=a,this):s(a)?(B(a.enabled)&&(b.enabled=a.enabled),B(a.requireBase)&&(b.requireBase=a.requireBase),(B(a.rewriteLinks)||u(a.rewriteLinks))&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(a){throw j.url(e),j.$$state=f,a}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k;k=d.baseHref();var l,m=d.url();if(b.enabled){if(!k&&b.requireBase)throw ve("nobase");l=m.substring(0,m.indexOf("/",m.indexOf("//")+2))+(k||"/"),k=e.history?zb:Bb}else l=xb(m),k=Ab;var n=l.substr(0,xb(l).lastIndexOf("/")+1);j=new k(l,n,"#"+a),j.$$parseLinkUrl(m,m),j.$$state=d.state();var o=/^\s*(javascript|mailto):/i;f.on("click",function(a){var e=b.rewriteLinks;if(e&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!==a.which&&2!==a.button){for(var h=Zc(a.target);"a"!==F(h[0]);)if(h[0]===f[0]||!(h=h.parent())[0])return;if(!u(e)||!q(h.attr(e))){var e=h.prop("href"),i=h.attr("href")||h.attr("xlink:href");s(e)&&"[object SVGAnimatedString]"===e.toString()&&(e=ec(e.animVal).href),o.test(e)||!e||h.attr("target")||a.isDefaultPrevented()||!j.$$parseLinkUrl(e,i)||(a.preventDefault(),j.absUrl()!==d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}}),yb(j.absUrl())!==yb(m)&&d.url(j.absUrl(),!0);var p=!0;return d.onUrlChange(function(a,b){vb(a,n)?(c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;a=yb(a),j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(p=!1,i(e,f)))}),c.$$phase||c.$digest()):g.location.href=a}),c.$watch(function(){if(p||j.$$urlUpdatedByLocation){j.$$urlUpdatedByLocation=!1;var a=yb(d.url()),b=yb(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;(p||k)&&(p=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))}))}j.$$replace=!1}),j}]}function Fb(){var a=!0,b=this;this.debugEnabled=function(b){return r(b)?(a=b,this):a},this.$get=["$window",function(c){function e(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function f(a){var b=c.console||{},f=b[a]||b.log||m;a=!1;try{a=!!f.apply}catch(a){}return a?function(){var a=[];return d(arguments,function(b){a.push(e(b))}),f.apply(b,a)}:function(a,b){f(a,null==b?"":b)}}return{log:f("log"),info:f("info"),warn:f("warn"),error:f("error"),debug:function(){var c=f("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Gb(a){return a+""}function Hb(a,b){return void 0!==a?a:b}function Ib(a,b){return void 0===a?b:void 0===b?a:a+b}function Jb(a,b){var c,e,f;switch(a.type){case De.Program:c=!0,d(a.body,function(a){Jb(a.expression,b),c=c&&a.expression.constant}),a.constant=c;break;case De.Literal:a.constant=!0,a.toWatch=[];break;case De.UnaryExpression:Jb(a.argument,b),a.constant=a.argument.constant,a.toWatch=a.argument.toWatch;break;case De.BinaryExpression:Jb(a.left,b),Jb(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case De.LogicalExpression:Jb(a.left,b),Jb(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.constant?[]:[a];break;case De.ConditionalExpression:Jb(a.test,b),Jb(a.alternate,b),Jb(a.consequent,b),a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant,a.toWatch=a.constant?[]:[a];break;case De.Identifier:a.constant=!1,a.toWatch=[a];break;case De.MemberExpression:Jb(a.object,b),a.computed&&Jb(a.property,b),a.constant=a.object.constant&&(!a.computed||a.property.constant),a.toWatch=[a];break;case De.CallExpression:c=f=!!a.filter&&!b(a.callee.name).$stateful,e=[],d(a.arguments,function(a){Jb(a,b),c=c&&a.constant,a.constant||e.push.apply(e,a.toWatch)}),a.constant=c,a.toWatch=f?e:[a];break;case De.AssignmentExpression:Jb(a.left,b),Jb(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=[a];break;case De.ArrayExpression:c=!0,e=[],d(a.elements,function(a){Jb(a,b),c=c&&a.constant,a.constant||e.push.apply(e,a.toWatch)}),a.constant=c,a.toWatch=e;break;case De.ObjectExpression:c=!0,e=[],d(a.properties,function(a){Jb(a.value,b),c=c&&a.value.constant&&!a.computed,a.value.constant||e.push.apply(e,a.value.toWatch),a.computed&&(Jb(a.key,b),a.key.constant||e.push.apply(e,a.key.toWatch))}),a.constant=c,a.toWatch=e;break;case De.ThisExpression:a.constant=!1,a.toWatch=[];break;case De.LocalsExpression:a.constant=!1,a.toWatch=[]}}function Kb(a){if(1===a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function Lb(a){return a.type===De.Identifier||a.type===De.MemberExpression}function Mb(a){if(1===a.body.length&&Lb(a.body[0].expression))return{type:De.AssignmentExpression,left:a.body[0].expression,right:{type:De.NGValueParameter},operator:"="}}function Nb(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===De.Literal||a.body[0].expression.type===De.ArrayExpression||a.body[0].expression.type===De.ObjectExpression)}function Ob(a,b){this.astBuilder=a,this.$filter=b}function Pb(a,b){this.astBuilder=a,this.$filter=b}function Qb(a){return x(a.valueOf)?a.valueOf():ze.call(a)}function Rb(){var a,b,c=fa(),e={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(a,b){e[a]=b},this.setIdentifierFns=function(c,d){return a=c,b=d,this},this.$get=["$filter",function(f){function g(a,b,c){return null==a||null==b?a===b:!("object"==typeof a&&!c&&"object"==typeof(a=Qb(a)))&&(a===b||a!==a&&b!==b)}function h(a,b,c,d,e){var f,h=d.inputs;if(1===h.length){var i=g,h=h[0];return a.$watch(function(a){var b=h(a);return g(b,i,d.literal)||(f=d(a,void 0,void 0,[b]),i=b&&Qb(b)),f},b,c,e)}for(var j=[],k=[],l=0,m=h.length;l<m;l++)j[l]=g,k[l]=null;return a.$watch(function(a){for(var b=!1,c=0,e=h.length;c<e;c++){var i=h[c](a);(b||(b=!g(i,j[c],d.literal)))&&(k[c]=i,j[c]=i&&Qb(i))}return b&&(f=d(a,void 0,void 0,k)),f},b,c,e)}function i(a,b,c,d,e){function f(a){return d(a)}function g(a,c,d){j=a,x(b)&&b(a,c,d),r(a)&&d.$$postDigest(function(){r(j)&&i()})}var i,j;return i=d.inputs?h(a,g,c,d,e):a.$watch(f,g,c)}function j(a,b,c,e){function f(a){var b=!0;return d(a,function(a){r(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return e(a)},function(a,c,d){h=a,x(b)&&b(a,c,d),f(a)&&d.$$postDigest(function(){f(h)&&g()})},c)}function k(a,b,c,d){var e=a.$watch(function(a){return e(),d(a)},b,c);return e}function l(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,c=c!==j&&c!==i?function(c,e,f,g){return f=d&&g?g[0]:a(c,e,f,g),b(f,c,e)}:function(c,d,e,f){return e=a(c,d,e,f),c=b(e,c,d),r(e)?c:e},d=!a.inputs;return a.$$watchDelegate&&a.$$watchDelegate!==h?(c.$$watchDelegate=a.$$watchDelegate,c.inputs=a.inputs):b.$stateful||(c.$$watchDelegate=h,c.inputs=a.inputs?a.inputs:[a]),c}var n={csp:rd().noUnsafeEval,literals:H(e),isIdentifierStart:x(a)&&a,isIdentifierContinue:x(b)&&b};return function(a,b){var d,e,g;switch(typeof a){case"string":return g=a=a.trim(),d=c[g],d||(":"===a.charAt(0)&&":"===a.charAt(1)&&(e=!0,a=a.substring(2)),d=new Ce(n),d=new Ee(d,f,n).parse(a),d.constant?d.$$watchDelegate=k:e?d.$$watchDelegate=d.literal?j:i:d.inputs&&(d.$$watchDelegate=h),c[g]=d),l(d,b);case"function":return l(a,b);default:return l(m,b)}}}]}function Sb(){var a=!0;this.$get=["$rootScope","$exceptionHandler",function(b,c){return Ub(function(a){b.$evalAsync(a)},c,a)}],this.errorOnUnhandledRejections=function(b){return r(b)?(a=b,this):a}}function Tb(){var a=!0;this.$get=["$browser","$exceptionHandler",function(b,c){return Ub(function(a){b.defer(a)},c,a)}],this.errorOnUnhandledRejections=function(b){return r(b)?(a=b,this):a}}function Ub(a,c,e){function f(){return new g}function g(){var a=this.promise=new h;this.resolve=function(b){l(a,b)},this.reject=function(b){n(a,b)},this.notify=function(b){p(a,b)}}function h(){this.$$state={status:0}}function j(){for(;!y&&z.length;){var a=z.shift();if(!a.pur){a.pur=!0;var b=a.value,b="Possibly unhandled rejection: "+("function"==typeof b?b.toString().replace(/ \{[\s\S]*$/,""):q(b)?"undefined":"string"!=typeof b?ja(b):b);a.value instanceof Error?c(a.value,b):c(b)}}}function k(b){!e||b.pending||2!==b.status||b.pur||(0===y&&0===z.length&&a(j),z.push(b)),!b.processScheduled&&b.pending&&(b.processScheduled=!0,++y,a(function(){var c,d,f;f=b.pending,b.processScheduled=!1,b.pending=void 0;try{for(var g=0,h=f.length;g<h;++g){b.pur=!0,d=f[g][0],c=f[g][b.status];try{x(c)?l(d,c(b.value)):1===b.status?l(d,b.value):n(d,b.value)}catch(a){n(d,a)}}}finally{--y,e&&0===y&&a(j)}}))}function l(a,b){a.$$state.status||(b===a?o(a,w("qcycle",b)):m(a,b))}function m(a,b){function c(b){g||(g=!0,m(a,b))}function d(b){g||(g=!0,o(a,b))}function e(b){p(a,b)}var f,g=!1;try{(s(b)||x(b))&&(f=b.then),x(f)?(a.$$state.status=-1,f.call(b,c,d,e)):(a.$$state.value=b,a.$$state.status=1,k(a.$$state))}catch(a){d(a)}}function n(a,b){a.$$state.status||o(a,b)}function o(a,b){a.$$state.value=b,a.$$state.status=2,k(a.$$state)}function p(b,d){var e=b.$$state.pending;0>=b.$$state.status&&e&&e.length&&a(function(){for(var a,b,f=0,g=e.length;f<g;f++){b=e[f][0],a=e[f][3];try{p(b,x(a)?a(d):d)}catch(a){c(a)}}})}function r(a){var b=new h;return n(b,a),b}function t(a,b,c){var d=null;try{x(c)&&(d=c())}catch(a){return r(a)}return d&&x(d.then)?d.then(function(){return b(a)},r):b(a)}function u(a,b,c,d){var e=new h;return l(e,a),e.then(b,c,d)}function v(a){if(!x(a))throw w("norslvr",a);var b=new h;return a(function(a){l(b,a)},function(a){n(b,a)}),b}var w=b("$q",TypeError),y=0,z=[];i(h.prototype,{then:function(a,b,c){if(q(a)&&q(b)&&q(c))return this;var d=new h;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),0<this.$$state.status&&k(this.$$state),d},catch:function(a){return this.then(null,a)},finally:function(a,b){return this.then(function(b){return t(b,A,a)},function(b){return t(b,r,a)},b)}});var A=u;return v.prototype=h.prototype,v.defer=f,v.reject=r,v.when=u,v.resolve=A,v.all=function(a){var b=new h,c=0,e=nd(a)?[]:{};return d(a,function(a,d){c++,u(a).then(function(a){e[d]=a,--c||l(b,e)},function(a){n(b,a)})}),0===c&&l(b,e),b},v.race=function(a){var b=f();return d(a,function(a){u(a).then(b.resolve,b.reject)}),b.promise},v}function Vb(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function Wb(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=++ld,this.$$ChildScope=null}return b.prototype=a,b}var e=10,f=b("$rootScope"),g=null,h=null;this.digestTtl=function(a){return arguments.length&&(e=a),e},this.$get=["$exceptionHandler","$parse","$browser",function(b,i,j){function k(a){a.currentScope.$$destroyed=!0}function l(a){9===Yc&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling)),a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function n(){this.$id=++ld,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function o(a){if(w.$$phase)throw f("inprog",w.$$phase);w.$$phase=a}function p(a,b){do{a.$$watchersCount+=b}while(a=a.$parent)}function r(a,b,c){do{a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c]}while(a=a.$parent)}function t(){}function u(){for(;A.length;)try{A.shift()()}catch(a){b(a)}h=null}function v(){null===h&&(h=j.defer(function(){w.$apply(u)}))}n.prototype={constructor:n,$new:function(b,c){var d;return c=c||this,b?(d=new n,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!==this)&&d.$on("$destroy",k),d},$watch:function(a,b,c,d){var e=i(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,c,e,a);var f=this,h=f.$$watchers,j={fn:b,last:t,get:e,exp:d||a,eq:!!c};return g=null,x(b)||(j.fn=m),h||(h=f.$$watchers=[],h.$$digestWatchIndex=-1),h.unshift(j),h.$$digestWatchIndex++,p(this,1),function(){var a=G(h,j);0<=a&&(p(f,-1),a<h.$$digestWatchIndex&&h.$$digestWatchIndex--),g=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(f,f,h)):b(f,e,h)}var e=Array(a.length),f=Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(f,f,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,d){f[0]=a,e[0]=c,b(f,a===c?f:e,d)}):(d(a,function(a,b){var d=h.$watch(a,function(a,d){f[b]=a,e[b]=d,i||(i=!0,h.$evalAsync(c))});g.push(d)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function d(a){e=a;var b,d,g;if(!q(e)){if(s(e))if(c(e))for(f!==m&&(f=m,p=f.length=0,k++),a=e.length,p!==a&&(k++,f.length=p=a),b=0;b<a;b++)g=f[b],d=e[b],g!==g&&d!==d||g===d||(k++,f[b]=d);else{f!==n&&(f=n={},p=0,k++),a=0;for(b in e)bd.call(e,b)&&(a++,d=e[b],g=f[b],b in f?g!==g&&d!==d||g===d||(k++,f[b]=d):(p++,f[b]=d,k++));if(p>a)for(b in k++,f)bd.call(e,b)||(p--,delete f[b])}else f!==e&&(f=e,k++);return k}}d.$stateful=!0;var e,f,g,h=this,j=1<b.length,k=0,l=i(a,d),m=[],n={},o=!0,p=0;return this.$watch(l,function(){if(o?(o=!1,b(e,e,h)):b(e,g,h),j)if(s(e))if(c(e)){g=Array(e.length);for(var a=0;a<e.length;a++)g[a]=e[a]}else for(a in g={},e)bd.call(e,a)&&(g[a]=e[a]);else g=e})},$digest:function(){var a,c,d,i,k,l,m,n,p,q,r=e,s=[];o("$digest"),j.$$checkUrlChange(),this===w&&null!==h&&(j.defer.cancel(h),u()),g=null;do{for(m=!1,n=this,l=0;l<y.length;l++){try{q=y[l],q.scope.$eval(q.expression,q.locals)}catch(a){b(a)}g=null}y.length=0;a:do{if(l=n.$$watchers)for(l.$$digestWatchIndex=l.length;l.$$digestWatchIndex--;)try{if(a=l[l.$$digestWatchIndex])if(k=a.get,(c=k(n))===(d=a.last)||(a.eq?I(c,d):md(c)&&md(d))){if(a===g){m=!1;break a}}else m=!0,g=a,a.last=a.eq?H(c,null):c,i=a.fn,i(c,d===t?c:d,n),5>r&&(p=4-r,s[p]||(s[p]=[]),s[p].push({msg:x(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:c,oldVal:d}))}catch(a){b(a)}if(!(l=n.$$watchersCount&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(l=n.$$nextSibling);)n=n.$parent}while(n=l);if((m||y.length)&&!r--)throw w.$$phase=null,f("infdig",e,s)}while(m||y.length);for(w.$$phase=null;B<z.length;)try{z[B++]()}catch(a){b(a)}z.length=B=0,j.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===w&&j.$$applicationDestroyed(),p(this,-this.$$watchersCount);for(var b in this.$$listenerCount)r(this,this.$$listenerCount[b],b);a&&a.$$childHead===this&&(a.$$childHead=this.$$nextSibling),a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=m,this.$on=this.$watch=this.$watchGroup=function(){return m},this.$$listeners={},this.$$nextSibling=null,l(this)}},$eval:function(a,b){return i(a)(this,b)},$evalAsync:function(a,b){w.$$phase||y.length||j.defer(function(){y.length&&w.$digest()}),y.push({scope:this,expression:i(a),locals:b})},$$postDigest:function(a){z.push(a)},$apply:function(a){try{o("$apply");try{return this.$eval(a)}finally{w.$$phase=null}}catch(a){b(a)}finally{try{w.$digest()}catch(a){throw b(a),a}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&A.push(b),a=i(a),v()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do{d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++}while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,r(e,1,a))}},$emit:function(a,c){var d,e,f,g=[],h=this,i=!1,j={name:a,targetScope:h,stopPropagation:function(){i=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=J([j],arguments,1);do{for(d=h.$$listeners[a]||g,j.currentScope=h,e=0,f=d.length;e<f;e++)if(d[e])try{d[e].apply(null,k)}catch(a){b(a)}else d.splice(e,1),e--,f--;if(i)return j.currentScope=null,j;h=h.$parent}while(h);return j.currentScope=null,j},$broadcast:function(a,c){var d=this,e=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return f;for(var g,h,i=J([f],arguments,1);d=e;){for(f.currentScope=d,e=d.$$listeners[a]||[],g=0,h=e.length;g<h;g++)if(e[g])try{e[g].apply(null,i)}catch(a){b(a)}else e.splice(g,1),g--,h--;if(!(e=d.$$listenerCount[a]&&d.$$childHead||d!==this&&d.$$nextSibling))for(;d!==this&&!(e=d.$$nextSibling);)d=d.$parent}return f.currentScope=null,f}};var w=new n,y=w.$$asyncQueue=[],z=w.$$postDigestQueue=[],A=w.$$applyAsyncQueue=[],B=0;return w}]}function Xb(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return r(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return r(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=ec(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function Yb(a){if("self"===a)return a;if(u(a)){if(-1<a.indexOf("***"))throw Fe("iwcard",a);return a=qd(a).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+a+"$")}if(y(a))return new RegExp("^"+a.source+"$");throw Fe("imatcher")}function Zb(a){var b=[];return r(a)&&d(a,function(a){b.push(Yb(a))}),b}function $b(){this.SCE_CONTEXTS=Ge;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Zb(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Zb(a)),b},this.$get=["$injector",function(c){function d(a,b){return"self"===a?fc(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){
return this.$$unwrapTrustedValue().toString()},b}var f=function(a){throw Fe("unsafe")};c.has("$sanitize")&&(f=c.get("$sanitize"));var g=e(),h={};return h[Ge.HTML]=e(g),h[Ge.CSS]=e(g),h[Ge.URL]=e(g),h[Ge.JS]=e(g),h[Ge.RESOURCE_URL]=e(h[Ge.URL]),{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Fe("icontext",a,b);if(null===b||q(b)||""===b)return b;if("string"!=typeof b)throw Fe("itype",a);return new c(b)},getTrusted:function(c,e){if(null===e||q(e)||""===e)return e;var g=h.hasOwnProperty(c)?h[c]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(c===Ge.RESOURCE_URL){var i,j,g=ec(e.toString()),k=!1;for(i=0,j=a.length;i<j;i++)if(d(a[i],g)){k=!0;break}if(k)for(i=0,j=b.length;i<j;i++)if(d(b[i],g)){k=!1;break}if(k)return e;throw Fe("insecurl",e.toString())}if(c===Ge.HTML)return f(e);throw Fe("unsafe")},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}function _b(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>Yc)throw Fe("iequirks");var e=ia(Ge);e.isEnabled=function(){return a},e.trustAs=c.trustAs,e.getTrusted=c.getTrusted,e.valueOf=c.valueOf,a||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=n),e.parseAs=function(a,c){var d=b(c);return d.literal&&d.constant?d:b(c,function(b){return e.getTrusted(a,b)})};var f=e.parseAs,g=e.getTrusted,h=e.trustAs;return d(Ge,function(a,b){var c=cd(b);e[("parse_as_"+c).replace(He,ka)]=function(b){return f(a,b)},e[("get_trusted_"+c).replace(He,ka)]=function(b){return g(a,b)},e[("trust_as_"+c).replace(He,ka)]=function(b){return h(a,b)}}),e}]}function ac(){this.$get=["$window","$document",function(a,b){var c={},d=!((!a.nw||!a.nw.process)&&a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id))&&a.history&&a.history.pushState,e=k((/android (\d+)/.exec(cd((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},h=g.body&&g.body.style,i=!1,j=!1;return h&&(i=!!("transition"in h||"webkitTransition"in h),j=!!("animation"in h||"webkitAnimation"in h)),{history:!(!d||4>e||f),hasEvent:function(a){if("input"===a&&Yc)return!1;if(q(c[a])){var b=g.createElement("div");c[a]="on"+a in b}return c[a]},csp:rd(),transitions:i,animations:j,android:e}}]}function bc(){var a;this.httpOptions=function(b){return b?(a=b,this):a},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(b,c,d,e,f){function g(h,j){g.totalPendingRequests++,u(h)&&!q(c.get(h))||(h=f.getTrustedResourceUrl(h));var k=d.defaults&&d.defaults.transformResponse;return nd(k)?k=k.filter(function(a){return a!==ib}):k===ib&&(k=null),d.get(h,i({cache:c,transformResponse:k},a)).finally(function(){g.totalPendingRequests--}).then(function(a){return c.put(h,a.data),a.data},function(a){return j||(a=Ie("tpload",h,a.status,a.statusText),b(a)),e.reject(a)})}return g.totalPendingRequests=0,g}]}function cc(){this.$get=["$rootScope","$browser","$location",function(a,b,c){return{findBindings:function(a,b,c){a=a.getElementsByClassName("ng-binding");var e=[];return d(a,function(a){var f=kd.element(a).data("$binding");f&&d(f,function(d){c?new RegExp("(^|\\s)"+qd(b)+"(\\s|\\||$)").test(d)&&e.push(a):-1!==d.indexOf(b)&&e.push(a)})}),e},findModels:function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=a.querySelectorAll("["+d[e]+"model"+(c?"=":"*=")+'"'+b+'"]');if(f.length)return f}},getLocation:function(){return c.url()},setLocation:function(b){b!==c.url()&&(c.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function dc(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){x(f)||(i=h,h=f,f=m);var j,k=ed.call(arguments,3),l=r(i)&&!i,n=(l?d:c).defer(),o=n.promise;return j=b.defer(function(){try{n.resolve(f.apply(null,k))}catch(a){n.reject(a),e(a)}finally{delete g[o.$$timeoutId]}l||a.$apply()},h),o.$$timeoutId=j,g[j]=n,o}var g={};return f.cancel=function(a){return!!(a&&a.$$timeoutId in g)&&(g[a.$$timeoutId].promise.catch(m),g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId))},f}]}function ec(a){return Yc&&(Je.setAttribute("href",a),a=Je.href),Je.setAttribute("href",a),{href:Je.href,protocol:Je.protocol?Je.protocol.replace(/:$/,""):"",host:Je.host,search:Je.search?Je.search.replace(/^\?/,""):"",hash:Je.hash?Je.hash.replace(/^#/,""):"",hostname:Je.hostname,port:Je.port,pathname:"/"===Je.pathname.charAt(0)?Je.pathname:"/"+Je.pathname}}function fc(a){return a=u(a)?ec(a):a,a.protocol===Ke.protocol&&a.host===Ke.host}function gc(){this.$get=o(a)}function hc(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var c=a[0]||{},d={},e="";return function(){var a,f,g,h,i;try{a=c.cookie||""}catch(b){a=""}if(a!==e)for(e=a,a=e.split("; "),d={},g=0;g<a.length;g++)f=a[g],0<(h=f.indexOf("="))&&(i=b(f.substring(0,h)),q(d[i])&&(d[i]=b(f.substring(h+1))));return d}}function ic(){this.$get=hc}function jc(a){function b(c,e){if(s(c)){var f={};return d(c,function(a,c){f[c]=b(c,a)}),f}return a.factory(c+"Filter",e)}this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}],b("currency",oc),b("date",zc),b("filter",kc),b("json",Ac),b("limitTo",Bc),b("lowercase",Re),b("number",pc),b("orderBy",Dc),b("uppercase",Se)}function kc(){return function(a,d,e,f){if(!c(a)){if(null==a)return a;throw b("filter")("notarray",a)}f=f||"$";var g;switch(nc(d)){case"function":break;case"boolean":case"null":case"number":case"string":g=!0;case"object":d=lc(d,e,f,g);break;default:return a}return Array.prototype.filter.call(a,d)}}function lc(a,b,c,d){var e=s(a)&&c in a;return!0===b?b=I:x(b)||(b=function(a,b){return!q(a)&&(null===a||null===b?a===b:!(s(b)||s(a)&&!p(a))&&(a=cd(""+a),b=cd(""+b),-1!==a.indexOf(b)))}),function(f){return e&&!s(f)?mc(f,a[c],b,c,!1):mc(f,a,b,c,d)}}function mc(a,b,c,d,e,f){var g=nc(a),h=nc(b);if("string"===h&&"!"===b.charAt(0))return!mc(a,b.substring(1),c,d,e);if(nd(a))return a.some(function(a){return mc(a,b,c,d,e)});switch(g){case"object":var i;if(e){for(i in a)if("$"!==i.charAt(0)&&mc(a[i],b,c,d,!0))return!0;return!f&&mc(a,b,c,d,!1)}if("object"===h){for(i in b)if(f=b[i],!x(f)&&!q(f)&&(g=i===d,!mc(g?a:a[i],f,c,d,g,g)))return!1;return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function nc(a){return null===a?"null":typeof a}function oc(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return q(c)&&(c=b.CURRENCY_SYM),q(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:sc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function pc(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:sc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function qc(a){var b,c,d,e,f,g=0;for(-1<(c=a.indexOf(Me))&&(a=a.replace(Me,"")),0<(d=a.search(/e/i))?(0>c&&(c=d),c+=+a.slice(d+1),a=a.substring(0,d)):0>c&&(c=a.length),d=0;a.charAt(d)===Ne;d++);if(d===(f=a.length))b=[0],c=1;else{for(f--;a.charAt(f)===Ne;)f--;for(c-=d,b=[],e=0;d<=f;d++,e++)b[e]=+a.charAt(d)}return c>Le&&(b=b.splice(0,Le-1),g=c-1,c=1),{d:b,e:g,i:c}}function rc(a,b,c,d){var e=a.d,f=e.length-a.i;if(b=q(b)?Math.min(Math.max(c,f),d):+b,c=b+a.i,d=e[c],0<c){e.splice(Math.max(a.i,c));for(var g=c;g<e.length;g++)e[g]=0}else for(f=Math.max(0,f),a.i=1,e.length=Math.max(1,c=b+1),e[0]=0,g=1;g<c;g++)e[g]=0;if(5<=d)if(0>c-1){for(d=0;d>c;d--)e.unshift(0),a.i++;e.unshift(1),a.i++}else e[c-1]++;for(;f<Math.max(0,b);f++)e.push(0);(b=e.reduceRight(function(a,b,c,d){return b+=a,d[c]=b%10,Math.floor(b/10)},0))&&(e.unshift(b),a.i++)}function sc(a,b,c,d,e){if(!u(a)&&!v(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,h=Math.abs(a)+"",i="";if(f)i="∞";else{for(g=qc(h),rc(g,e,b.minFrac,b.maxFrac),i=g.d,h=g.i,e=g.e,f=[],g=i.reduce(function(a,b){return a&&!b},!0);0>h;)i.unshift(0),h++;for(0<h?f=i.splice(h,i.length):(f=i,i=[0]),h=[],i.length>=b.lgSize&&h.unshift(i.splice(-b.lgSize,i.length).join(""));i.length>b.gSize;)h.unshift(i.splice(-b.gSize,i.length).join(""));i.length&&h.unshift(i.join("")),i=h.join(c),f.length&&(i+=d+f.join("")),e&&(i+="e+"+e)}return 0>a&&!g?b.negPre+i+b.negSuf:b.posPre+i+b.posSuf}function tc(a,b,c,d){var e="";for((0>a||d&&0>=a)&&(d?a=1-a:(a=-a,e="-")),a=""+a;a.length<b;)a=Ne+a;return c&&(a=a.substr(a.length-b)),e+a}function uc(a,b,c,d,e){return c=c||0,function(f){return f=f["get"+a](),(0<c||f>-c)&&(f+=c),0===f&&-12===c&&(f=12),tc(f,b,d,e)}}function vc(a,b,c){return function(d,e){var f=d["get"+a]();return e[dd((c?"STANDALONE":"")+(b?"SHORT":"")+a)][f]}}function wc(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function xc(a){return function(b){var c=wc(b.getFullYear());return b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+c,b=1+Math.round(b/6048e5),tc(b,a)}}function yc(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function zc(a){function b(a){var b;if(b=a.match(c)){a=new Date(0);var d=0,e=0,f=b[8]?a.setUTCFullYear:a.setFullYear,g=b[8]?a.setUTCHours:a.setHours;b[9]&&(d=k(b[9]+b[10]),e=k(b[9]+b[11])),f.call(a,k(b[1]),k(b[2])-1,k(b[3])),d=k(b[4]||0)-d,e=k(b[5]||0)-e,f=k(b[6]||0),b=Math.round(1e3*parseFloat("0."+(b[7]||0))),g.call(a,d,e,f,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e,f){var g,h,i="",j=[];if(e=e||"mediumDate",e=a.DATETIME_FORMATS[e]||e,u(c)&&(c=Qe.test(c)?k(c):b(c)),v(c)&&(c=new Date(c)),!w(c)||!isFinite(c.getTime()))return c;for(;e;)(h=Pe.exec(e))?(j=J(j,h,1),e=j.pop()):(j.push(e),e=null);var l=c.getTimezoneOffset();return f&&(l=O(f,l),c=P(c,f,!0)),d(j,function(b){g=Oe[b],i+=g?g(c,a.DATETIME_FORMATS,l):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function Ac(){return function(a,b){return q(b)&&(b=2),M(a,b)}}function Bc(){return function(a,b,d){return b=1/0===Math.abs(Number(b))?Number(b):k(b),md(b)?a:(v(a)&&(a=a.toString()),c(a)?(d=!d||isNaN(d)?0:k(d),d=0>d?Math.max(0,a.length+d):d,0<=b?Cc(a,d,d+b):0===d?Cc(a,b,a.length):Cc(a,Math.max(0,d+b),d)):a)}}function Cc(a,b,c){return u(a)?a.slice(b,c):ed.call(a,b,c)}function Dc(a){function d(b){return b.map(function(b){var c=1,d=n;if(x(b))d=b;else if(u(b)&&("+"!==b.charAt(0)&&"-"!==b.charAt(0)||(c="-"===b.charAt(0)?-1:1,b=b.substring(1)),""!==b&&(d=a(b),d.constant)))var e=d(),d=function(a){return a[e]};return{get:d,descending:c}})}function e(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function f(a,b){var c=0,d=a.type,e=b.type;if(d===e){var e=a.value,f=b.value;"string"===d?(e=e.toLowerCase(),f=f.toLowerCase()):"object"===d&&(s(e)&&(e=a.index),s(f)&&(f=b.index)),e!==f&&(c=e<f?-1:1)}else c=d<e?-1:1;return c}return function(a,g,h,i){if(null==a)return a;if(!c(a))throw b("orderBy")("notarray",a);nd(g)||(g=[g]),0===g.length&&(g=["+"]);var j=d(g),k=h?-1:1,l=x(i)?i:f;return a=Array.prototype.map.call(a,function(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:j.map(function(c){var d=c.get(a);return c=typeof d,null===d?(c="string",d="null"):"object"===c&&(x(d.valueOf)&&(d=d.valueOf(),e(d))||p(d)&&(d=d.toString(),e(d))),{value:d,type:c,index:b}})}}),a.sort(function(a,b){for(var c=0,d=j.length;c<d;c++){var e=l(a.predicateValues[c],b.predicateValues[c]);if(e)return e*j[c].descending*k}return l(a.tieBreaker,b.tieBreaker)*k}),a=a.map(function(a){return a.value})}}function Ec(a){return x(a)&&(a={link:a}),a.restrict=a.restrict||"AC",o(a)}function Fc(a,b,c,d,e){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=e(b.name||b.ngForm||"")(c),this.$dirty=!1,this.$valid=this.$pristine=!0,this.$submitted=this.$invalid=!1,this.$$parentForm=Ve,this.$$element=a,this.$$animate=d,Gc(this)}function Gc(a){a.$$classCache={},a.$$classCache[Df]=!(a.$$classCache[Cf]=a.$$element.hasClass(Cf))}function Hc(a){function b(a,b,c){c&&!a.$$classCache[b]?(a.$$animate.addClass(a.$$element,b),a.$$classCache[b]=!0):!c&&a.$$classCache[b]&&(a.$$animate.removeClass(a.$$element,b),a.$$classCache[b]=!1)}function c(a,c,d){c=c?"-"+_(c,"-"):"",b(a,Cf+c,!0===d),b(a,Df+c,!1===d)}var d=a.set,e=a.unset;a.clazz.prototype.$setValidity=function(a,f,g){q(f)?(this.$pending||(this.$pending={}),d(this.$pending,a,g)):(this.$pending&&e(this.$pending,a,g),Ic(this.$pending)&&(this.$pending=void 0)),B(f)?f?(e(this.$error,a,g),d(this.$$success,a,g)):(d(this.$error,a,g),e(this.$$success,a,g)):(e(this.$error,a,g),e(this.$$success,a,g)),this.$pending?(b(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,c(this,"",null)):(b(this,"ng-pending",!1),this.$valid=Ic(this.$error),this.$invalid=!this.$valid,c(this,"",this.$valid)),f=this.$pending&&this.$pending[a]?void 0:!this.$error[a]&&(!!this.$$success[a]||null),c(this,a,f),this.$$parentForm.$setValidity(a,f,this)}}function Ic(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Jc(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Kc(a,b,c,d,e,f){var g=cd(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(){h=!0}),b.on("compositionend",function(){h=!1,j()})}var i,j=function(a){if(i&&(f.defer.cancel(i),i=null),!h){var e=b.val();a=a&&a.type,"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=pd(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",j);else{var k=function(a,b,c){i||(i=f.defer(function(){i=null,b&&b.value===c||j(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",j),gf[g]&&d.$$hasNativeValidators&&g===c.type&&b.on("keydown wheel mousedown",function(a){if(!i){var b=this.validity,c=b.badInput,d=b.typeMismatch;i=f.defer(function(){i=null,b.badInput===c&&b.typeMismatch===d||j(a)})}}),d.$render=function(){var a=d.$isEmpty(d.$viewValue)?"":d.$viewValue;b.val()!==a&&b.val(a)}}function Lc(a,b){return function(c,e){var f,g;if(w(c))return c;if(u(c)){if('"'===c.charAt(0)&&'"'===c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),Ze.test(c))return new Date(c);if(a.lastIndex=0,f=a.exec(c))return f.shift(),g=e?{yyyy:e.getFullYear(),MM:e.getMonth()+1,dd:e.getDate(),HH:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds(),sss:e.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},d(f,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return NaN}}function Mc(a,b,c,d){return function(e,f,g,h,i,j,k){function l(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function m(a){return r(a)&&!w(a)?c(a)||void 0:a}Nc(e,f,g,h),Kc(e,f,g,h,i,j);var n,o=h&&h.$options.getOption("timezone");if(h.$$parserName=a,h.$parsers.push(function(a){return h.$isEmpty(a)?null:b.test(a)?(a=c(a,n),o&&(a=P(a,o)),a):void 0}),h.$formatters.push(function(a){if(a&&!w(a))throw Gf("datefmt",a);return l(a)?((n=a)&&o&&(n=P(n,o,!0)),k("date")(a,d,o)):(n=null,"")}),r(g.min)||g.ngMin){var p;h.$validators.min=function(a){return!l(a)||q(p)||c(a)>=p},g.$observe("min",function(a){p=m(a),h.$validate()})}if(r(g.max)||g.ngMax){var s;h.$validators.max=function(a){return!l(a)||q(s)||c(a)<=s},g.$observe("max",function(a){s=m(a),h.$validate()})}}}function Nc(a,b,c,d){(d.$$hasNativeValidators=s(b[0].validity))&&d.$parsers.push(function(a){var c=b.prop("validity")||{};return c.badInput||c.typeMismatch?void 0:a})}function Oc(a){a.$$parserName="number",a.$parsers.push(function(b){return a.$isEmpty(b)?null:af.test(b)?parseFloat(b):void 0}),a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!v(b))throw Gf("numfmt",b);b=b.toString()}return b})}function Pc(a){return r(a)&&!v(a)&&(a=parseFloat(a)),md(a)?void 0:a}function Qc(a){var b=a.toString(),c=b.indexOf(".");return-1===c?-1<a&&1>a&&(a=/e-(\d+)$/.exec(b))?Number(a[1]):0:b.length-c-1}function Rc(a,b,c){a=Number(a);var d=(0|a)!==a,e=(0|b)!==b,f=(0|c)!==c;if(d||e||f){var g=d?Qc(a):0,h=e?Qc(b):0,i=f?Qc(c):0,g=Math.max(g,h,i),g=Math.pow(10,g);a*=g,b*=g,c*=g,d&&(a=Math.round(a)),e&&(b=Math.round(b)),f&&(c=Math.round(c))}return 0==(a-b)%c}function Sc(a,b,c,d,e){if(r(d)){if(a=a(d),!a.constant)throw Gf("constexpr",c,d);return a(b)}return e}function Tc(a,b){function c(a,b){if(!a||!a.length)return[];if(!b||!b.length)return a;var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e===b[f])continue a;c.push(e)}return c}function e(a){var b=a;return nd(a)?b=a.map(e).join(" "):s(a)&&(b=Object.keys(a).filter(function(b){return a[b]}).join(" ")),b}function f(a){var b=a;if(nd(a))b=a.map(f);else if(s(a)){var c=!1,b=Object.keys(a).filter(function(b){return b=a[b],!c&&q(b)&&(c=!0),b});c&&b.push(void 0)}return b}a="ngClass"+a;var g;return["$parse",function(h){return{restrict:"AC",link:function(i,j,k){function l(a,b){var c=[];return d(a,function(a){(0<b||t[a])&&(t[a]=(t[a]||0)+b,t[a]===+(0<b)&&c.push(a))}),c.join(" ")}function m(a){if(a===b){var c=p,c=l(c&&c.split(" "),1);k.$addClass(c)}else c=p,c=l(c&&c.split(" "),-1),k.$removeClass(c);u=a}function n(a){(a=e(a))!==p&&o(a)}function o(a){if(u===b){var d=p&&p.split(" "),e=a&&a.split(" "),f=c(d,e),d=c(e,d),f=l(f,-1),d=l(d,1);k.$addClass(d),k.$removeClass(f)}p=a}var p,q=k[a].trim(),r=":"===q.charAt(0)&&":"===q.charAt(1),q=h(q,r?f:e),s=r?n:o,t=j.data("$classCounts"),u=!0;t||(t=fa(),j.data("$classCounts",t)),"ngClass"!==a&&(g||(g=h("$index",function(a){return 1&a})),i.$watch(g,m)),i.$watch(q,s,r)}}}]}function Uc(a,b,c,d,e,f,g,h,i){this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(c.name||"",!1)(a),this.$$parentForm=Ve,this.$options=Hf,this.$$parsedNgModel=e(c.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,this.$$scope=a,this.$$attr=c,this.$$element=d,this.$$animate=f,this.$$timeout=g,this.$$parse=e,this.$$q=h,this.$$exceptionHandler=b,Gc(this),Vc(this)}function Vc(a){a.$$scope.$watch(function(){var b=a.$$ngModelGet(a.$$scope);if(b!==a.$modelValue&&(a.$modelValue===a.$modelValue||b===b)){a.$modelValue=a.$$rawModelValue=b,a.$$parserValid=void 0;for(var c=a.$formatters,d=c.length,e=b;d--;)e=c[d](e);a.$viewValue!==e&&(a.$$updateEmptyClasses(e),a.$viewValue=a.$$lastCommittedViewValue=e,a.$render(),a.$$runValidators(a.$modelValue,a.$viewValue,m))}return b})}function Wc(a){this.$$options=a}function Xc(a,b){d(b,function(b,c){r(a[c])||(a[c]=b)})}var Yc,Zc,$c,_c,ad=/^\/(.+)\/([a-z]*)$/,bd=Object.prototype.hasOwnProperty,cd=function(a){return u(a)?a.toLowerCase():a},dd=function(a){return u(a)?a.toUpperCase():a},ed=[].slice,fd=[].splice,gd=[].push,hd=Object.prototype.toString,id=Object.getPrototypeOf,jd=b("ng"),kd=a.angular||(a.angular={}),ld=0;Yc=a.document.documentMode;var md=Number.isNaN||function(a){return a!==a};m.$inject=[],n.$inject=[];var nd=Array.isArray,od=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,pd=function(a){return u(a)?a.trim():a},qd=function(a){return a.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},rd=function(){if(!r(rd.rules)){var b=a.document.querySelector("[ng-csp]")||a.document.querySelector("[data-ng-csp]");if(b){var c=b.getAttribute("ng-csp")||b.getAttribute("data-ng-csp");rd.rules={noUnsafeEval:!c||-1!==c.indexOf("no-unsafe-eval"),noInlineStyle:!c||-1!==c.indexOf("no-inline-style")}}else{b=rd;try{new Function(""),c=!1}catch(a){c=!0}b.rules={noUnsafeEval:c,noInlineStyle:!1}}}return rd.rules},sd=function(){if(r(sd.name_))return sd.name_;var b,c,d,e,f=ud.length;for(c=0;c<f;++c)if(d=ud[c],b=a.document.querySelector("["+d.replace(":","\\:")+"jq]")){e=b.getAttribute(d+"jq");break}return sd.name_=e},td=/:/g,ud=["ng-","data-ng-","ng:","x-ng-"],vd=function(a){var b=a.currentScript,b=b&&b.getAttribute("src");if(!b)return!0;var c=a.createElement("a");if(c.href=b,a.location.origin===c.origin)return!0;switch(c.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}(a.document),wd=/[A-Z]/g,xd=!1,yd=3,zd={full:"1.6.2",major:1,minor:6,dot:2,codeName:"llamacorn-lovehug"};oa.expando="ng339";var Ad=oa.cache={},Bd=1;oa._data=function(a){return this.cache[a[this.expando]]||{}};var Cd=/-([a-z])/g,Dd=/^-ms-/,Ed={mouseleave:"mouseout",mouseenter:"mouseover"},Fd=b("jqLite"),Gd=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Hd=/<|&#?\w+;/,Id=/<([\w:-]+)/,Jd=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Kd={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Kd.optgroup=Kd.option,Kd.tbody=Kd.tfoot=Kd.colgroup=Kd.caption=Kd.thead,Kd.th=Kd.td;var Ld=a.Node.prototype.contains||function(a){return!!(16&this.compareDocumentPosition(a))},Md=oa.prototype={ready:Ea,toString:function(){var a=[];return d(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return Zc(0<=a?this[a]:this[this.length+a])},length:0,push:gd,sort:[].sort,splice:[].splice},Nd={};d("multiple selected checked disabled readOnly required open".split(" "),function(a){Nd[cd(a)]=a});var Od={};d("input select option textarea button form details".split(" "),function(a){Od[a]=!0});var Pd={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};d({data:ua,removeData:sa,hasData:function(a){for(var b in Ad[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,c=a.length;b<c;b++)sa(a[b])}},function(a,b){oa[b]=a}),d({data:ua,inheritedData:Aa,scope:function(a){return Zc.data(a,"$scope")||Aa(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return Zc.data(a,"$isolateScope")||Zc.data(a,"$isolateScopeNoTemplate")},controller:za,injector:function(a){return Aa(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:va,css:function(a,b,c){if(b=la(b.replace(Dd,"ms-")),!r(c))return a.style[b];a.style[b]=c},attr:function(a,b,c){var d=a.nodeType;if(d!==yd&&2!==d&&8!==d&&a.getAttribute){var d=cd(b),e=Nd[d];if(!r(c))return a=a.getAttribute(b),e&&null!==a&&(a=d),null===a?void 0:a;null===c||!1===c&&e?a.removeAttribute(b):a.setAttribute(b,e?d:c)}},prop:function(a,b,c){if(!r(c))return a[b];a[b]=c},text:function(){function a(a,b){if(q(b)){var c=a.nodeType;return 1===c||c===yd?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(q(b)){if(a.multiple&&"select"===F(a)){var c=[];return d(a.options,function(a){a.selected&&c.push(a.value||a.text)}),c}return a.value}a.value=b},html:function(a,b){if(q(b))return a.innerHTML;qa(a,!0),a.innerHTML=b},empty:Ba},function(a,b){oa.prototype[b]=function(b,c){var d,e,f=this.length;if(a!==Ba&&q(2===a.length&&a!==va&&a!==za?b:c)){if(s(b)){for(d=0;d<f;d++)if(a===ua)a(this[d],b);else for(e in b)a(this[d],e,b[e]);return this}for(d=a.$dv,f=q(d)?Math.min(f,1):f,e=0;e<f;e++){var g=a(this[e],b,c);d=d?d+g:g}return d}for(d=0;d<f;d++)a(this[d],b,c);return this}}),d({removeData:sa,on:function(a,b,c,d){if(r(d))throw Fd("onargs");if(ma(a)){d=ta(a,!0);var e=d.events,f=d.handle;f||(f=d.handle=Ga(a,e)),d=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=d.length,h=function(b,d,g){var h=e[b];h||(h=e[b]=[],h.specialHandlerWrapper=d,"$destroy"===b||g||a.addEventListener(b,f)),h.push(c)};g--;)b=d[g],Ed[b]?(h(Ed[b],Ia),h(b,void 0,!0)):h(b)}},off:ra,one:function(a,b,c){a=Zc(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,e=a.parentNode;qa(a),d(new oa(b),function(b){c?e.insertBefore(b,c.nextSibling):e.replaceChild(b,a),c=b})},children:function(a){var b=[];return d(a.childNodes,function(a){1===a.nodeType&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(1===c||11===c){b=new oa(b);for(var c=0,d=b.length;c<d;c++)a.appendChild(b[c])}},prepend:function(a,b){if(1===a.nodeType){var c=a.firstChild;d(new oa(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){var c=Zc(b).eq(0).clone()[0],d=a.parentNode;d&&d.replaceChild(c,a),c.appendChild(a)},remove:Ca,detach:function(a){Ca(a,!0)},after:function(a,b){var c=a,d=a.parentNode;if(d){b=new oa(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}}},addClass:xa,removeClass:wa,toggleClass:function(a,b,c){b&&d(b.split(" "),function(b){var d=c;q(d)&&(d=!va(a,b)),(d?xa:wa)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:pa,triggerHandler:function(a,b,c){var e,f,g=b.type||b,h=ta(a);(h=(h=h&&h.events)&&h[g])&&(e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:m,type:g,target:a},b.type&&(e=i(e,b)),b=ia(h),f=c?[e].concat(c):[e],d(b,function(b){e.isImmediatePropagationStopped()||b.apply(a,f)}))}},function(a,b){oa.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;f<g;f++)q(e)?(e=a(this[f],b,c,d),r(e)&&(e=Zc(e))):ya(e,a(this[f],b,c,d));return r(e)?e:this}}),oa.prototype.bind=oa.prototype.on,oa.prototype.unbind=oa.prototype.off;var Qd=Object.create(null);La.prototype={_idx:function(a){return a===this._lastKey?this._lastIndex:(this._lastKey=a,this._lastIndex=this._keys.indexOf(a))},_transformKey:function(a){return md(a)?Qd:a},get:function(a){if(a=this._transformKey(a),-1!==(a=this._idx(a)))return this._values[a]},set:function(a,b){a=this._transformKey(a);var c=this._idx(a);-1===c&&(c=this._lastIndex=this._keys.length),this._keys[c]=a,this._values[c]=b},delete:function(a){return a=this._transformKey(a),-1!==(a=this._idx(a))&&(this._keys.splice(a,1),this._values.splice(a,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Rd=La,Sd=[function(){this.$get=[function(){return Rd}]}],Td=/^([^(]+?)=>/,Ud=/^[^(]*\(\s*([^)]*)\)/m,Vd=/,/,Wd=/^\s*(_?)(\S+?)\1\s*$/,Xd=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Yd=b("$injector");Oa.$$annotate=function(a,b,c){var e;if("function"==typeof a){if(!(e=a.$inject)){if(e=[],a.length){if(b)throw u(c)&&c||(c=a.name||Na(a)),Yd("strictdi",c);b=Ma(a),d(b[1].split(Vd),function(a){a.replace(Wd,function(a,b,c){e.push(c)})})}a.$inject=e}}else nd(a)?(b=a.length-1,ba(a[b],"fn"),e=a.slice(0,b)):ba(a,"fn",!0);return e};var Zd=b("$animate"),$d=function(){this.$get=m},_d=function(){var a=new Rd,b=[];this.$get=["$$AnimateRunner","$rootScope",function(c,e){function f(a,b,c){var e=!1;return b&&(b=u(b)?b.split(" "):nd(b)?b:[],d(b,function(b){b&&(e=!0,a[b]=c)})),e}function g(){d(b,function(b){var c=a.get(b);if(c){var e=Ra(b.attr("class")),f="",g="";d(c,function(a,b){a!==!!e[b]&&(a?f+=(f.length?" ":"")+b:g+=(g.length?" ":"")+b)}),d(b,function(a){f&&xa(a,f),g&&wa(a,g)}),a.delete(b)}}),b.length=0}return{enabled:m,on:m,off:m,pin:m,push:function(d,h,i,j){return j&&j(),i=i||{},i.from&&d.css(i.from),i.to&&d.css(i.to),(i.addClass||i.removeClass)&&(h=i.addClass,j=i.removeClass,i=a.get(d)||{},h=f(i,h,!0),j=f(i,j,!1),(h||j)&&(a.set(d,i),b.push(d),1===b.length&&e.$$postDigest(g))),d=new c,d.complete(),d}}}]},ae=["$provide",function(a){var b=this;this.$$registeredAnimations=Object.create(null),this.register=function(c,d){if(c&&"."!==c.charAt(0))throw Zd("notcsel",c);var e=c+"-animation";b.$$registeredAnimations[c.substr(1)]=e,a.factory(e,d)},this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw Zd("nongcls","ng-animate");return this.$$classNameFilter},this.$get=["$$animateQueue",function(a){function b(a,b,c){if(c){var d;a:{for(d=0;d<c.length;d++){var e=c[d];if(1===e.nodeType){d=e;break a}}d=void 0}!d||d.parentNode||d.previousElementSibling||(c=null)}c?c.after(a):b.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(c,d,e,f){return d=d&&Zc(d),e=e&&Zc(e),d=d||e.parent(),b(c,d,e),a.push(c,"enter",Sa(f))},move:function(c,d,e,f){return d=d&&Zc(d),e=e&&Zc(e),d=d||e.parent(),b(c,d,e),a.push(c,"move",Sa(f))},leave:function(b,c){return a.push(b,"leave",Sa(c),function(){b.remove()})},addClass:function(b,c,d){return d=Sa(d),d.addClass=Qa(d.addclass,c),a.push(b,"addClass",d)},removeClass:function(b,c,d){return d=Sa(d),d.removeClass=Qa(d.removeClass,c),a.push(b,"removeClass",d)},setClass:function(b,c,d,e){return e=Sa(e),e.addClass=Qa(e.addClass,c),e.removeClass=Qa(e.removeClass,d),a.push(b,"setClass",e)},animate:function(b,c,d,e,f){return f=Sa(f),f.from=f.from?i(f.from,c):c,f.to=f.to?i(f.to,d):d,f.tempClasses=Qa(f.tempClasses,e||"ng-inline-animate"),a.push(b,"animate",f)}}}]}],be=function(){this.$get=["$$rAF",function(a){function b(b){c.push(b),1<c.length||a(function(){for(var a=0;a<c.length;a++)c[a]();c=[]})}var c=[];return function(){var a=!1;return b(function(){a=!0}),function(c){a?c():b(c)}}}]},ce=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(a,b,c,e,f){function g(a){this.setHost(a);var b=c();this._doneCallbacks=[],this._tick=function(a){e()?f(a,0,!1):b(a)},this._state=0}return g.chain=function(a,b){function c(){d===a.length?b(!0):a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()},g.all=function(a,b){function c(c){f=f&&c,++e===a.length&&b(f)}var e=0,f=!0;d(a,function(a){a.done(c)})},g.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:m,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},catch:function(a){return this.getPromise().catch(a)},finally:function(a){return this.getPromise().finally(a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(d(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}},g}]},de=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,c){return function(b,d){function e(){return a(function(){f.addClass&&(b.addClass(f.addClass),f.addClass=null),f.removeClass&&(b.removeClass(f.removeClass),f.removeClass=null),f.to&&(b.css(f.to),f.to=null),g||h.complete(),g=!0}),h}var f=d||{};f.$$prepared||(f=H(f)),f.cleanupStyles&&(f.from=f.to=null),f.from&&(b.css(f.from),f.from=null);var g,h=new c;return{start:e,end:e}}}]},ee=b("$compile"),fe=new function(){};Xa.$inject=["$provide","$$sanitizeUriProvider"],Ya.prototype.isFirstChange=function(){return this.previousValue===fe};var ge=/^((?:x|data)[:\-_])/i,he=/[:\-_]+(.)/g,ie=b("$controller"),je=/^(\S+)(\s+as\s+([\w$]+))?$/,ke=function(){this.$get=["$document",function(a){return function(b){return b?!b.nodeType&&b instanceof Zc&&(b=b[0]):b=a[0].body,b.offsetWidth+1}}]},le="application/json",me={"Content-Type":le+";charset=utf-8"},ne=/^\[|^\{(?!\{)/,oe={"[":/]$/,"{":/}$/},pe=/^\)]\}',?\n/,qe=b("$http"),re=kd.$interpolateMinErr=b("$interpolate");re.throwNoconcat=function(a){throw re("noconcat",a)},re.interr=function(a,b){return re("interr",a,b.toString())};var se=function(){this.$get=["$window",function(a){function b(a){var b=function(a){b.data=a,b.called=!0}
;return b.id=a,b}var c=a.angular.callbacks,d={};return{createCallback:function(a){a="_"+(c.$$counter++).toString(36);var e="angular.callbacks."+a,f=b(a);return d[e]=c[a]=f,e},wasCalled:function(a){return d[a].called},getResponse:function(a){return d[a].data},removeCallback:function(a){delete c[d[a].id],delete d[a]}}}]},te=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,ue={http:80,https:443,ftp:21},ve=b("$location"),we=/^\s*[\\\/]{2,}/,xe={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Cb("$$absUrl"),url:function(a){if(q(a))return this.$$url;var b=te.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Cb("$$protocol"),host:Cb("$$host"),port:Cb("$$port"),path:Db("$$path",function(a){return a=null!==a?a.toString():"","/"===a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(u(a)||v(a))a=a.toString(),this.$$search=S(a);else{if(!s(a))throw ve("isrcharg");a=H(a,{}),d(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:q(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Db("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};d([Bb,Ab,zb],function(a){a.prototype=Object.create(xe),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==zb||!this.$$html5)throw ve("nostate");return this.$$state=q(b)?null:b,this.$$urlUpdatedByLocation=!0,this}});var ye=b("$parse"),ze={}.constructor.prototype.valueOf,Ae=fa();d("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Ae[a]=!0});var Be={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Ce=function(a){this.options=a};Ce.prototype={constructor:Ce,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;)if('"'===(a=this.text.charAt(this.index))||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),c=b+this.peek(2),d=Ae[b],e=Ae[c];Ae[a]||d||e?(a=e?c:d?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){return a=a||1,this.index+a<this.text.length&&this.text.charAt(this.index+a)},isNumber:function(a){return"0"<=a&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||" "===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var c=a.charCodeAt(0),d=b.charCodeAt(0);return 55296<=c&&56319>=c&&56320<=d&&57343>=d?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){throw c=c||this.index,b=r(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c,ye("lexerr",a,b,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=cd(this.text.charAt(this.index));if("."===c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"===c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"===a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!==a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),d=d+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,c+=String.fromCharCode(parseInt(e,16))):c+=Be[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var De=function(a,b){this.lexer=a,this.options=b};De.Program="Program",De.ExpressionStatement="ExpressionStatement",De.AssignmentExpression="AssignmentExpression",De.ConditionalExpression="ConditionalExpression",De.LogicalExpression="LogicalExpression",De.BinaryExpression="BinaryExpression",De.UnaryExpression="UnaryExpression",De.CallExpression="CallExpression",De.MemberExpression="MemberExpression",De.Identifier="Identifier",De.Literal="Literal",De.ArrayExpression="ArrayExpression",De.Property="Property",De.ObjectExpression="ObjectExpression",De.ThisExpression="ThisExpression",De.LocalsExpression="LocalsExpression",De.NGValueParameter="NGValueParameter",De.prototype={ast:function(a){return this.text=a,this.tokens=this.lexer.lex(a),a=this.program(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:De.Program,body:a}},expressionStatement:function(){return{type:De.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();if(this.expect("=")){if(!Lb(a))throw ye("lval");a={type:De.AssignmentExpression,left:a,right:this.assignment(),operator:"="}}return a},ternary:function(){var a,b,c=this.logicalOR();return this.expect("?")&&(a=this.expression(),this.consume(":"))?(b=this.expression(),{type:De.ConditionalExpression,test:c,alternate:a,consequent:b}):c},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:De.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:De.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b={type:De.BinaryExpression,operator:a.text,left:b,right:this.relational()};return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b={type:De.BinaryExpression,operator:a.text,left:b,right:this.additive()};return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b={type:De.BinaryExpression,operator:a.text,left:b,right:this.multiplicative()};return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b={type:De.BinaryExpression,operator:a.text,left:b,right:this.unary()};return b},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:De.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=H(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:De.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:De.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:De.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:De.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:De.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text)do{a.push(this.filterChain())}while(this.expect(","));return a},identifier:function(){var a=this.consume();return a.identifier||this.throwError("is not a valid identifier",a),{type:De.Identifier,name:a.text}},constant:function(){return{type:De.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:De.ArrayExpression,elements:a}},object:function(){var a,b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;a={type:De.Property,kind:"init"},this.peek().constant?(a.key=this.constant(),a.computed=!1,this.consume(":"),a.value=this.expression()):this.peek().identifier?(a.key=this.identifier(),a.computed=!1,this.peek(":")?(this.consume(":"),a.value=this.expression()):a.value=a.key):this.peek("[")?(this.consume("["),a.key=this.expression(),this.consume("]"),a.computed=!0,this.consume(":"),a.value=this.expression()):this.throwError("invalid key",this.peek()),b.push(a)}while(this.expect(","));return this.consume("}"),{type:De.ObjectExpression,properties:b}},throwError:function(a,b){throw ye("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index))},consume:function(a){if(0===this.tokens.length)throw ye("ueoe",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},peekToken:function(){if(0===this.tokens.length)throw ye("ueoe",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===c||f===d||f===e||!(b||c||d||e))return a}return!1},expect:function(a,b,c,d){return!!(a=this.peek(a,b,c,d))&&(this.tokens.shift(),a)},selfReferential:{this:{type:De.ThisExpression},$locals:{type:De.LocalsExpression}}},Ob.prototype={compile:function(a){var b=this;a=this.astBuilder.ast(a),this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Jb(a,b.$filter);var c,e="";return this.stage="assign",(c=Mb(a))&&(this.state.computing="assign",e=this.nextId(),this.recurse(c,e),this.return_(e),e="fn.assign="+this.generateFunction("assign","s,v,l")),c=Kb(a.body),b.stage="inputs",d(c,function(a,c){var d="fn"+c;b.state[d]={vars:[],body:[],own:{}},b.state.computing=d;var e=b.nextId();b.recurse(a,e),b.return_(e),b.state.inputs.push(d),a.watchId=c}),this.state.computing="fn",this.stage="main",this.recurse(a),e='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+e+this.watchFns()+"return fn;",e=new Function("$filter","getStringValue","ifDefined","plus",e)(this.$filter,Gb,Hb,Ib),this.state=this.stage=void 0,e.literal=Nb(a),e.constant=a.constant,e},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,c=this;return d(b,function(b){a.push("var "+b+"="+c.generateFunction(b,"s"))}),b.length&&a.push("fn.inputs=["+b.join(",")+"];"),a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;return d(this.state.filters,function(c,d){a.push(c+"=$filter("+b.escape(d)+")")}),a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,c,e,f,g){var h,i,j,k,l,n=this;if(e=e||m,!g&&r(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,c,e,f,!0));else switch(a.type){case De.Program:d(a.body,function(b,c){n.recurse(b.expression,void 0,void 0,function(a){i=a}),c!==a.body.length-1?n.current().body.push(i,";"):n.return_(i)});break;case De.Literal:k=this.escape(a.value),this.assign(b,k),e(b||k);break;case De.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){i=a}),k=a.operator+"("+this.ifDefined(i,0)+")",this.assign(b,k),e(k);break;case De.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){h=a}),this.recurse(a.right,void 0,void 0,function(a){i=a}),k="+"===a.operator?this.plus(h,i):"-"===a.operator?this.ifDefined(h,0)+a.operator+this.ifDefined(i,0):"("+h+")"+a.operator+"("+i+")",this.assign(b,k),e(k);break;case De.LogicalExpression:b=b||this.nextId(),n.recurse(a.left,b),n.if_("&&"===a.operator?b:n.not(b),n.lazyRecurse(a.right,b)),e(b);break;case De.ConditionalExpression:b=b||this.nextId(),n.recurse(a.test,b),n.if_(b,n.lazyRecurse(a.alternate,b),n.lazyRecurse(a.consequent,b)),e(b);break;case De.Identifier:b=b||this.nextId(),c&&(c.context="inputs"===n.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),c.computed=!1,c.name=a.name),n.if_("inputs"===n.stage||n.not(n.getHasOwnProperty("l",a.name)),function(){n.if_("inputs"===n.stage||"s",function(){f&&1!==f&&n.if_(n.isNull(n.nonComputedMember("s",a.name)),n.lazyAssign(n.nonComputedMember("s",a.name),"{}")),n.assign(b,n.nonComputedMember("s",a.name))})},b&&n.lazyAssign(b,n.nonComputedMember("l",a.name))),e(b);break;case De.MemberExpression:h=c&&(c.context=this.nextId())||this.nextId(),b=b||this.nextId(),n.recurse(a.object,h,void 0,function(){n.if_(n.notNull(h),function(){a.computed?(i=n.nextId(),n.recurse(a.property,i),n.getStringValue(i),f&&1!==f&&n.if_(n.not(n.computedMember(h,i)),n.lazyAssign(n.computedMember(h,i),"{}")),k=n.computedMember(h,i),n.assign(b,k),c&&(c.computed=!0,c.name=i)):(f&&1!==f&&n.if_(n.isNull(n.nonComputedMember(h,a.property.name)),n.lazyAssign(n.nonComputedMember(h,a.property.name),"{}")),k=n.nonComputedMember(h,a.property.name),n.assign(b,k),c&&(c.computed=!1,c.name=a.property.name))},function(){n.assign(b,"undefined")}),e(b)},!!f);break;case De.CallExpression:b=b||this.nextId(),a.filter?(i=n.filter(a.callee.name),j=[],d(a.arguments,function(a){var b=n.nextId();n.recurse(a,b),j.push(b)}),k=i+"("+j.join(",")+")",n.assign(b,k),e(b)):(i=n.nextId(),h={},j=[],n.recurse(a.callee,i,h,function(){n.if_(n.notNull(i),function(){d(a.arguments,function(b){n.recurse(b,a.constant?void 0:n.nextId(),void 0,function(a){j.push(a)})}),k=h.name?n.member(h.context,h.name,h.computed)+"("+j.join(",")+")":i+"("+j.join(",")+")",n.assign(b,k)},function(){n.assign(b,"undefined")}),e(b)}));break;case De.AssignmentExpression:i=this.nextId(),h={},this.recurse(a.left,void 0,h,function(){n.if_(n.notNull(h.context),function(){n.recurse(a.right,i),k=n.member(h.context,h.name,h.computed)+a.operator+i,n.assign(b,k),e(b||k)})},1);break;case De.ArrayExpression:j=[],d(a.elements,function(b){n.recurse(b,a.constant?void 0:n.nextId(),void 0,function(a){j.push(a)})}),k="["+j.join(",")+"]",this.assign(b,k),e(b||k);break;case De.ObjectExpression:j=[],l=!1,d(a.properties,function(a){a.computed&&(l=!0)}),l?(b=b||this.nextId(),this.assign(b,"{}"),d(a.properties,function(a){a.computed?(h=n.nextId(),n.recurse(a.key,h)):h=a.key.type===De.Identifier?a.key.name:""+a.key.value,i=n.nextId(),n.recurse(a.value,i),n.assign(n.member(b,h,a.computed),i)})):(d(a.properties,function(b){n.recurse(b.value,a.constant?void 0:n.nextId(),void 0,function(a){j.push(n.escape(b.key.type===De.Identifier?b.key.name:""+b.key.value)+":"+a)})}),k="{"+j.join(",")+"}",this.assign(b,k)),e(b||k);break;case De.ThisExpression:this.assign(b,"s"),e(b||"s");break;case De.LocalsExpression:this.assign(b,"l"),e(b||"l");break;case De.NGValueParameter:this.assign(b,"v"),e(b||"v")}},getHasOwnProperty:function(a,b){var c=a+"."+b,d=this.current().own;return d.hasOwnProperty(c)||(d[c]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")")),d[c]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){return this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0)),this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,c){if(!0===a)b();else{var d=this.current().body;d.push("if(",a,"){"),b(),d.push("}"),c&&(d.push("else{"),c(),d.push("}"))}},not:function(a){return"!("+a+")"},isNull:function(a){return a+"==null"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var c=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(b)?a+"."+b:a+'["'+b.replace(c,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,c){return c?this.computedMember(a,b):this.nonComputedMember(a,b)},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},lazyRecurse:function(a,b,c,d,e,f){var g=this;return function(){g.recurse(a,b,c,d,e,f)}},lazyAssign:function(a,b){var c=this;return function(){c.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(u(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(v(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if(void 0===a)return"undefined";throw ye("esc")},nextId:function(a,b){var c="v"+this.state.nextId++;return a||this.current().vars.push(c+(b?"="+b:"")),c},current:function(){return this.state[this.state.computing]}},Pb.prototype={compile:function(a){var b=this;a=this.astBuilder.ast(a),Jb(a,b.$filter);var c,e;(c=Mb(a))&&(e=this.recurse(c)),c=Kb(a.body);var f;c&&(f=[],d(c,function(a,c){var d=b.recurse(a);a.input=d,f.push(d),a.watchId=c}));var g=[];return d(a.body,function(a){g.push(b.recurse(a.expression))}),c=0===a.body.length?m:1===a.body.length?g[0]:function(a,b){var c;return d(g,function(d){c=d(a,b)}),c},e&&(c.assign=function(a,b,c){return e(a,c,b)}),f&&(c.inputs=f),c.literal=Nb(a),c.constant=a.constant,c},recurse:function(a,b,c){var e,f,g,h=this;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case De.Literal:return this.value(a.value,b);case De.UnaryExpression:return f=this.recurse(a.argument),this["unary"+a.operator](f,b);case De.BinaryExpression:case De.LogicalExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,b);case De.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case De.Identifier:return h.identifier(a.name,b,c);case De.MemberExpression:return e=this.recurse(a.object,!1,!!c),a.computed||(f=a.property.name),a.computed&&(f=this.recurse(a.property)),a.computed?this.computedMember(e,f,b,c):this.nonComputedMember(e,f,b,c);case De.CallExpression:return g=[],d(a.arguments,function(a){g.push(h.recurse(a))}),a.filter&&(f=this.$filter(a.callee.name)),a.filter||(f=this.recurse(a.callee,!0)),a.filter?function(a,c,d,e){for(var h=[],i=0;i<g.length;++i)h.push(g[i](a,c,d,e));return a=f.apply(void 0,h,e),b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,e){var h,i=f(a,c,d,e);if(null!=i.value){h=[];for(var j=0;j<g.length;++j)h.push(g[j](a,c,d,e));h=i.value.apply(i.context,h)}return b?{value:h}:h};case De.AssignmentExpression:return e=this.recurse(a.left,!0,1),f=this.recurse(a.right),function(a,c,d,g){var h=e(a,c,d,g);return a=f(a,c,d,g),h.context[h.name]=a,b?{value:a}:a};case De.ArrayExpression:return g=[],d(a.elements,function(a){g.push(h.recurse(a))}),function(a,c,d,e){for(var f=[],h=0;h<g.length;++h)f.push(g[h](a,c,d,e));return b?{value:f}:f};case De.ObjectExpression:return g=[],d(a.properties,function(a){a.computed?g.push({key:h.recurse(a.key),computed:!0,value:h.recurse(a.value)}):g.push({key:a.key.type===De.Identifier?a.key.name:""+a.key.value,computed:!1,value:h.recurse(a.value)})}),function(a,c,d,e){for(var f={},h=0;h<g.length;++h)g[h].computed?f[g[h].key(a,c,d,e)]=g[h].value(a,c,d,e):f[g[h].key]=g[h].value(a,c,d,e);return b?{value:f}:f};case De.ThisExpression:return function(a){return b?{value:a}:a};case De.LocalsExpression:return function(a,c){return b?{value:c}:c};case De.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(c,d,e,f){return c=a(c,d,e,f),c=r(c)?+c:0,b?{value:c}:c}},"unary-":function(a,b){return function(c,d,e,f){return c=a(c,d,e,f),c=r(c)?-c:-0,b?{value:c}:c}},"unary!":function(a,b){return function(c,d,e,f){return c=!a(c,d,e,f),b?{value:c}:c}},"binary+":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g);return d=b(d,e,f,g),h=Ib(h,d),c?{value:h}:h}},"binary-":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g);return d=b(d,e,f,g),h=(r(h)?h:0)-(r(d)?d:0),c?{value:h}:h}},"binary*":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)*b(d,e,f,g),c?{value:d}:d}},"binary/":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)/b(d,e,f,g),c?{value:d}:d}},"binary%":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)%b(d,e,f,g),c?{value:d}:d}},"binary===":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)===b(d,e,f,g),c?{value:d}:d}},"binary!==":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)!==b(d,e,f,g),c?{value:d}:d}},"binary==":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)==b(d,e,f,g),c?{value:d}:d}},"binary!=":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)!=b(d,e,f,g),c?{value:d}:d}},"binary<":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)<b(d,e,f,g),c?{value:d}:d}},"binary>":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)>b(d,e,f,g),c?{value:d}:d}},"binary<=":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)<=b(d,e,f,g),c?{value:d}:d}},"binary>=":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)>=b(d,e,f,g),c?{value:d}:d}},"binary&&":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)&&b(d,e,f,g),c?{value:d}:d}},"binary||":function(a,b,c){return function(d,e,f,g){return d=a(d,e,f,g)||b(d,e,f,g),c?{value:d}:d}},"ternary?:":function(a,b,c,d){return function(e,f,g,h){return e=a(e,f,g,h)?b(e,f,g,h):c(e,f,g,h),d?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,c){return function(d,e,f,g){return d=e&&a in e?e:d,c&&1!==c&&d&&null==d[a]&&(d[a]={}),e=d?d[a]:void 0,b?{context:d,name:a,value:e}:e}},computedMember:function(a,b,c,d){return function(e,f,g,h){var i,j,k=a(e,f,g,h);return null!=k&&(i=b(e,f,g,h),i+="",d&&1!==d&&k&&!k[i]&&(k[i]={}),j=k[i]),c?{context:k,name:i,value:j}:j}},nonComputedMember:function(a,b,c,d){return function(e,f,g,h){return e=a(e,f,g,h),d&&1!==d&&e&&null==e[b]&&(e[b]={}),f=null!=e?e[b]:void 0,c?{context:e,name:b,value:f}:f}},inputs:function(a,b){return function(c,d,e,f){return f?f[b]:a(c,d,e)}}};var Ee=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c,this.ast=new De(a,c),this.astCompiler=c.csp?new Pb(this.ast,b):new Ob(this.ast,b)};Ee.prototype={constructor:Ee,parse:function(a){return this.astCompiler.compile(a)}};var Fe=b("$sce"),Ge={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},He=/_([a-z])/g,Ie=b("$compile"),Je=a.document.createElement("a"),Ke=ec(a.location.href);hc.$inject=["$document"],jc.$inject=["$provide"];var Le=22,Me=".",Ne="0";oc.$inject=["$locale"],pc.$inject=["$locale"];var Oe={yyyy:uc("FullYear",4,0,!1,!0),yy:uc("FullYear",2,0,!0,!0),y:uc("FullYear",1,0,!1,!0),MMMM:vc("Month"),MMM:vc("Month",!0),MM:uc("Month",2,1),M:uc("Month",1,1),LLLL:vc("Month",!1,!0),dd:uc("Date",2),d:uc("Date",1),HH:uc("Hours",2),H:uc("Hours",1),hh:uc("Hours",2,-12),h:uc("Hours",1,-12),mm:uc("Minutes",2),m:uc("Minutes",1),ss:uc("Seconds",2),s:uc("Seconds",1),sss:uc("Milliseconds",3),EEEE:vc("Day"),EEE:vc("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,c){return a=-1*c,a=(0<=a?"+":"")+(tc(Math[0<a?"floor":"ceil"](a/60),2)+tc(Math.abs(a%60),2))},ww:xc(2),w:xc(1),G:yc,GG:yc,GGG:yc,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},Pe=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Qe=/^-?\d+$/;zc.$inject=["$locale"];var Re=o(cd),Se=o(dd);Dc.$inject=["$parse"];var Te=o({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===hd.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),Ue={};d(Nd,function(a,b){function c(a,c,e){a.$watch(e[d],function(a){e.$set(b,!!a)})}if("multiple"!==a){var d=Za("ng-"+b),e=c;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[d]&&c(a,b,e)}),Ue[d]=function(){return{restrict:"A",priority:100,link:e}}}}),d(Pd,function(a,b){Ue[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"===d.ngPattern.charAt(0)&&(c=d.ngPattern.match(ad)))return void d.$set("ngPattern",new RegExp(c[1],c[2]));a.$watch(d[b],function(a){d.$set(b,a)})}}}}),d(["src","srcset","href"],function(a){var b=Za("ng-"+a);Ue[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===hd.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){b?(e.$set(g,b),Yc&&f&&d.prop(f,e[g])):"href"===a&&e.$set(g,null)})}}}});var Ve={$addControl:m,$$renameControl:function(a,b){a.$name=b},$removeControl:m,$setValidity:m,$setDirty:m,$setPristine:m,$setSubmitted:m};Fc.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Fc.prototype={$rollbackViewValue:function(){d(this.$$controls,function(a){a.$rollbackViewValue()})},$commitViewValue:function(){d(this.$$controls,function(a){a.$commitViewValue()})},$addControl:function(a){ca(a.$name,"input"),this.$$controls.push(a),a.$name&&(this[a.$name]=a),a.$$parentForm=this},$$renameControl:function(a,b){var c=a.$name;this[c]===a&&delete this[c],this[b]=a,a.$name=b},$removeControl:function(a){a.$name&&this[a.$name]===a&&delete this[a.$name],d(this.$pending,function(b,c){this.$setValidity(c,null,a)},this),d(this.$error,function(b,c){this.$setValidity(c,null,a)},this),d(this.$$success,function(b,c){this.$setValidity(c,null,a)},this),G(this.$$controls,a),a.$$parentForm=Ve},$setDirty:function(){this.$$animate.removeClass(this.$$element,Ef),this.$$animate.addClass(this.$$element,Ff),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Ef,Ff+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,d(this.$$controls,function(a){a.$setPristine()})},$setUntouched:function(){d(this.$$controls,function(a){a.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},Hc({clazz:Fc,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(G(d,c),0===d.length&&delete a[b])}});var We=function(a){return["$timeout","$parse",function(b,c){function d(a){return""===a?c('this[""]').assign:c(a).assign||m}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Fc,compile:function(c,e){c.addClass(Ef).addClass(Cf);var f=e.name?"name":!(!a||!e.ngForm)&&"ngForm";return{pre:function(a,c,e,g){var h=g[0];if(!("action"in e)){var j=function(b){a.$apply(function(){h.$commitViewValue(),h.$setSubmitted()}),b.preventDefault()};c[0].addEventListener("submit",j),c.on("$destroy",function(){b(function(){c[0].removeEventListener("submit",j)},0,!1)})}(g[1]||h.$$parentForm).$addControl(h);var k=f?d(h.$name):m;f&&(k(a,h),e.$observe(f,function(b){h.$name!==b&&(k(a,void 0),h.$$parentForm.$$renameControl(h,b),(k=d(h.$name))(a,h))})),c.on("$destroy",function(){h.$$parentForm.$removeControl(h),k(a,void 0),i(h,Ve)})}}}}}]},Xe=We(),Ye=We(!0),Ze=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,$e=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,_e=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,af=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,bf=/^(\d{4,})-(\d{2})-(\d{2})$/,cf=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,df=/^(\d{4,})-W(\d\d)$/,ef=/^(\d{4,})-(\d\d)$/,ff=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,gf=fa();d(["date","datetime-local","month","time","week"],function(a){gf[a]=!0});var hf={text:function(a,b,c,d,e,f){Kc(a,b,c,d,e,f),Jc(d)},date:Mc("date",bf,Lc(bf,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Mc("datetimelocal",cf,Lc(cf,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:Mc("time",ff,Lc(ff,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Mc("week",df,function(a,b){if(w(a))return a;if(u(a)){df.lastIndex=0;var c=df.exec(a);if(c){var d=+c[1],e=+c[2],f=c=0,g=0,h=0,i=wc(d),e=7*(e-1);return b&&(c=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),h=b.getMilliseconds()),new Date(d,0,i.getDate()+e,c,f,g,h)}}return NaN},"yyyy-Www"),month:Mc("month",ef,Lc(ef,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,c,d,e,f){Nc(a,b,c,d),Oc(d),Kc(a,b,c,d,e,f);var g,h;if((r(c.min)||c.ngMin)&&(d.$validators.min=function(a){return d.$isEmpty(a)||q(g)||a>=g},c.$observe("min",function(a){g=Pc(a),d.$validate()})),(r(c.max)||c.ngMax)&&(d.$validators.max=function(a){return d.$isEmpty(a)||q(h)||a<=h},c.$observe("max",function(a){h=Pc(a),d.$validate()})),r(c.step)||c.ngStep){var i;d.$validators.step=function(a,b){return d.$isEmpty(b)||q(i)||Rc(b,g||0,i)},c.$observe("step",function(a){i=Pc(a),d.$validate()})}},url:function(a,b,c,d,e,f){Kc(a,b,c,d,e,f),Jc(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||$e.test(c)}},email:function(a,b,c,d,e,f){Kc(a,b,c,d,e,f),Jc(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||_e.test(c)}},radio:function(a,b,c,d){var e=!c.ngTrim||"false"!==pd(c.ngTrim);q(c.name)&&b.attr("name",++ld),b.on("click",function(a){var f;b[0].checked&&(f=c.value,e&&(f=pd(f)),d.$setViewValue(f,a&&a.type))}),d.$render=function(){var a=c.value;e&&(a=pd(a)),b[0].checked=a===d.$viewValue},c.$observe("value",d.$render)},range:function(a,b,c,d,e,f){function g(a,d){b.attr(a,c[a]),c.$observe(a,d)}function h(a){l=Pc(a),md(d.$modelValue)||(k?(a=b.val(),l>a&&(a=l,b.val(a)),d.$setViewValue(a)):d.$validate())}function i(a){m=Pc(a),md(d.$modelValue)||(k?(a=b.val(),m<a&&(b.val(m),a=m<l?l:m),d.$setViewValue(a)):d.$validate())}function j(a){n=Pc(a),md(d.$modelValue)||(k&&d.$viewValue!==b.val()?d.$setViewValue(b.val()):d.$validate())}Nc(a,b,c,d),Oc(d),Kc(a,b,c,d,e,f);var k=d.$$hasNativeValidators&&"range"===b[0].type,l=k?0:void 0,m=k?100:void 0,n=k?1:void 0,o=b[0].validity;a=r(c.min),e=r(c.max),f=r(c.step);var p=d.$render;d.$render=k&&r(o.rangeUnderflow)&&r(o.rangeOverflow)?function(){p(),d.$setViewValue(b.val())}:p,a&&(d.$validators.min=k?function(){return!0}:function(a,b){return d.$isEmpty(b)||q(l)||b>=l},g("min",h)),e&&(d.$validators.max=k?function(){return!0}:function(a,b){return d.$isEmpty(b)||q(m)||b<=m},g("max",i)),
f&&(d.$validators.step=k?function(){return!o.stepMismatch}:function(a,b){return d.$isEmpty(b)||q(n)||Rc(b,l||0,n)},g("step",j))},checkbox:function(a,b,c,d,e,f,g,h){var i=Sc(h,a,"ngTrueValue",c.ngTrueValue,!0),j=Sc(h,a,"ngFalseValue",c.ngFalseValue,!1);b.on("click",function(a){d.$setViewValue(b[0].checked,a&&a.type)}),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return!1===a},d.$formatters.push(function(a){return I(a,i)}),d.$parsers.push(function(a){return a?i:j})},hidden:m,button:m,submit:m,reset:m,file:m},jf=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(hf[cd(g.type)]||hf.text)(e,f,g,h[0],b,a,c,d)}}}}],kf=/^(true|false|\d+)$/,lf=function(){function a(a,b,c){var d=r(c)?c:9===Yc?"":null;a.prop("value",d),b.$set("value",c)}return{restrict:"A",priority:100,compile:function(b,c){return kf.test(c.ngValue)?function(b,c,d){b=b.$eval(d.ngValue),a(c,d,b)}:function(b,c,d){b.$watch(d.ngValue,function(b){a(c,d,b)})}}}},mf=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,c,d){a.$$addBindingInfo(c,d.ngBind),c=c[0],b.$watch(d.ngBind,function(a){c.textContent=ga(a)})}}}}],nf=["$interpolate","$compile",function(a,b){return{compile:function(c){return b.$$addBindingClass(c),function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate)),b.$$addBindingInfo(d,c.expressions),d=d[0],e.$observe("ngBindTemplate",function(a){d.textContent=q(a)?"":a})}}}}],of=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){var c=f(b);d.html(a.getTrustedHtml(c)||"")})}}}}],pf=o({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),qf=Tc("",!0),rf=Tc("Odd",0),sf=Tc("Even",1),tf=Ec({compile:function(a,b){b.$set("ngCloak",void 0),a.removeClass("ng-cloak")}}),uf=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],vf={},wf={blur:!0,focus:!0};d("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=Za("ng-"+a);vf[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b]);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};wf[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var xf=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.$$createComment("end ngIf",e.ngIf),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=ea(h.clone),a.leave(j).done(function(a){!1!==a&&(j=null)}),h=null))})}}}],yf=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:kd.noop,compile:function(d,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(d,e,i,j,k){var l,m,n,o=0,p=function(){m&&(m.remove(),m=null),l&&(l.$destroy(),l=null),n&&(c.leave(n).done(function(a){!1!==a&&(m=null)}),m=n,n=null)};d.$watch(f,function(f){var i=function(a){!1===a||!r(h)||h&&!d.$eval(h)||b()},m=++o;f?(a(f,!0).then(function(a){if(!d.$$destroyed&&m===o){var b=d.$new();j.template=a,a=k(b,function(a){p(),c.enter(a,null,e).done(i)}),l=b,n=a,l.$emit("$includeContentLoaded",f),d.$eval(g)}},function(){d.$$destroyed||m!==o||(p(),d.$emit("$includeContentError",f))}),d.$emit("$includeContentRequested",f)):(p(),j.template=null)})}}}}],zf=["$compile",function(b){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){hd.call(d[0]).match(/SVG/)?(d.empty(),b(na(f.template,a.document).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),b(d.contents())(c))}}}],Af=Ec({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),Bf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,c,e){var f=c.ngList||", ",g="false"!==c.ngTrim,h=g?pd(f):f;e.$parsers.push(function(a){if(!q(a)){var b=[];return a&&d(a.split(h),function(a){a&&b.push(g?pd(a):a)}),b}}),e.$formatters.push(function(a){if(nd(a))return a.join(f)}),e.$isEmpty=function(a){return!a||!a.length}}}},Cf="ng-valid",Df="ng-invalid",Ef="ng-pristine",Ff="ng-dirty",Gf=b("ngModel");Uc.$inject="$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate".split(" "),Uc.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var a=this.$$parse(this.$$attr.ngModel+"()"),b=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(b){var c=this.$$parsedNgModel(b);return x(c)&&(c=a(b)),c},this.$$ngModelSet=function(a,c){x(this.$$parsedNgModel(a))?b(a,{$$$p:c}):this.$$parsedNgModelAssign(a,c)}}else if(!this.$$parsedNgModel.assign)throw Gf("nonassign",this.$$attr.ngModel,Q(this.$$element))},$render:m,$isEmpty:function(a){return q(a)||""===a||null===a||a!==a},$$updateEmptyClasses:function(a){this.$isEmpty(a)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Ff),this.$$animate.addClass(this.$$element,Ef)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Ef),this.$$animate.addClass(this.$$element,Ff),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!md(this.$modelValue)){var a=this.$$lastCommittedViewValue,b=this.$$rawModelValue,c=this.$valid,d=this.$modelValue,e=this.$options.getOption("allowInvalid"),f=this;this.$$runValidators(b,a,function(a){e||c===a||(f.$modelValue=a?b:void 0,f.$modelValue!==d&&f.$$writeModelToScope())})}},$$runValidators:function(a,b,c){function e(a,b){g===h.$$currentValidationRunId&&h.$setValidity(a,b)}function f(a){g===h.$$currentValidationRunId&&c(a)}this.$$currentValidationRunId++;var g=this.$$currentValidationRunId,h=this;!function(){var a=h.$$parserName||"parse";return q(h.$$parserValid)?(e(a,null),!0):(h.$$parserValid||(d(h.$validators,function(a,b){e(b,null)}),d(h.$asyncValidators,function(a,b){e(b,null)})),e(a,h.$$parserValid),h.$$parserValid)}()?f(!1):function(){var c=!0;return d(h.$validators,function(d,f){var g=Boolean(d(a,b));c=c&&g,e(f,g)}),!!c||(d(h.$asyncValidators,function(a,b){e(b,null)}),!1)}()?function(){var c=[],g=!0;d(h.$asyncValidators,function(d,f){var h=d(a,b);if(!h||!x(h.then))throw Gf("nopromise",h);e(f,void 0),c.push(h.then(function(){e(f,!0)},function(){g=!1,e(f,!1)}))}),c.length?h.$$q.all(c).then(function(){f(g)},m):f(!0)}():f(!1)},$commitViewValue:function(){var a=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==a||""===a&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(a),this.$$lastCommittedViewValue=a,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var a=this.$$lastCommittedViewValue,b=this;if(this.$$parserValid=!q(a)||void 0)for(var c=0;c<this.$parsers.length;c++)if(a=this.$parsers[c](a),q(a)){this.$$parserValid=!1;break}md(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var d=this.$modelValue,e=this.$options.getOption("allowInvalid");this.$$rawModelValue=a,e&&(this.$modelValue=a,b.$modelValue!==d&&b.$$writeModelToScope()),this.$$runValidators(a,this.$$lastCommittedViewValue,function(c){e||(b.$modelValue=c?a:void 0,b.$modelValue!==d&&b.$$writeModelToScope())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),d(this.$viewChangeListeners,function(a){try{a()}catch(a){this.$$exceptionHandler(a)}},this)},$setViewValue:function(a,b){this.$viewValue=a,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(b)},$$debounceViewValueCommit:function(a){var b=this.$options.getOption("debounce");v(b[a])?b=b[a]:v(b.default)&&(b=b.default),this.$$timeout.cancel(this.$$pendingDebounce);var c=this;0<b?this.$$pendingDebounce=this.$$timeout(function(){c.$commitViewValue()},b):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){c.$commitViewValue()})},$overrideModelOptions:function(a){this.$options=this.$options.createChild(a)}},Hc({clazz:Uc,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]}});var Hf,If=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Uc,priority:1,compile:function(b){return b.addClass(Ef).addClass("ng-untouched").addClass(Cf),{pre:function(a,b,c,d){var e=d[0];b=d[1]||e.$$parentForm,(d=d[2])&&(e.$options=d.$options),e.$$initGetterSetters(),b.$addControl(e),c.$observe("name",function(a){e.$name!==a&&e.$$parentForm.$$renameControl(e,a)}),a.$on("$destroy",function(){e.$$parentForm.$removeControl(e)})},post:function(b,c,d,e){function f(){g.$setTouched()}var g=e[0];g.$options.getOption("updateOn")&&c.on(g.$options.getOption("updateOn"),function(a){g.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(){g.$touched||(a.$$phase?b.$evalAsync(f):b.$apply(f))})}}}}}],Jf=/(\s+|^)default(\s+|$)/;Wc.prototype={getOption:function(a){return this.$$options[a]},createChild:function(a){var b=!1;return a=i({},a),d(a,function(c,d){"$inherit"===c?"*"===d?b=!0:(a[d]=this.$$options[d],"updateOn"===d&&(a.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===d&&(a.updateOnDefault=!1,a[d]=pd(c.replace(Jf,function(){return a.updateOnDefault=!0," "})))},this),b&&(delete a["*"],Xc(a,this.$$options)),Xc(a,Hf.$$options),new Wc(a)}},Hf=new Wc({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Kf=function(){function a(a,b){this.$$attrs=a,this.$$scope=b}return a.$inject=["$attrs","$scope"],a.prototype={$onInit:function(){var a=this.parentCtrl?this.parentCtrl.$options:Hf,b=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=a.createChild(b)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:a}},Lf=Ec({terminal:!0,priority:1e3}),Mf=b("ngOptions"),Nf=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Of=["$compile","$document","$parse",function(b,e,f){function g(a,b,d){function e(a,b,c,d,e){this.selectValue=a,this.viewValue=b,this.label=c,this.group=d,this.disabled=e}function g(a){var b;if(!j&&c(a))b=a;else{b=[];for(var d in a)a.hasOwnProperty(d)&&"$"!==d.charAt(0)&&b.push(d)}return b}var h=a.match(Nf);if(!h)throw Mf("iexp",a,Q(b));var i=h[5]||h[7],j=h[6];a=/ as /.test(h[0])&&h[1];var k=h[9];b=f(h[2]?h[1]:i);var l=a&&f(a)||b,m=k&&f(k),n=k?function(a,b){return m(d,b)}:function(a){return Ka(a)},o=function(a,b){return n(a,u(a,b))},p=f(h[2]||h[1]),q=f(h[3]||""),r=f(h[4]||""),s=f(h[8]),t={},u=j?function(a,b){return t[j]=b,t[i]=a,t}:function(a){return t[i]=a,t};return{trackBy:k,getTrackByValue:o,getWatchables:f(s,function(a){var b=[];a=a||[];for(var c=g(a),e=c.length,f=0;f<e;f++){var i=a===c?f:c[f],j=a[i],i=u(j,i),j=n(j,i);b.push(j),(h[2]||h[1])&&(j=p(d,i),b.push(j)),h[4]&&(i=r(d,i),b.push(i))}return b}),getOptions:function(){for(var a=[],b={},c=s(d)||[],f=g(c),h=f.length,i=0;i<h;i++){var j=c===f?i:f[i],m=u(c[j],j),t=l(d,m),j=n(t,m),v=p(d,m),w=q(d,m),m=r(d,m),t=new e(j,t,v,w,m);a.push(t),b[j]=t}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[o(a)]},getViewValueFromOption:function(a){return k?H(a.viewValue):a.viewValue}}}}}var h=a.document.createElement("option"),i=a.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=m},post:function(a,c,f,j){function k(a){var b=(a=u.getOptionFromViewValue(a))&&a.element;return b&&!b.selected&&(b.selected=!0),a}function l(a,b){a.element=b,b.disabled=a.disabled,a.label!==b.label&&(b.label=a.label,b.textContent=a.label),b.value=a.selectValue}function m(){var a=u&&n.readValue();if(u)for(var b=u.items.length-1;0<=b;b--){var d=u.items[b];Ca(r(d.group)?d.element.parentNode:d.element)}u=v.getOptions();var e={};t&&c.prepend(n.emptyOption),u.items.forEach(function(a){var b;if(r(a.group)){b=e[a.group],b||(b=i.cloneNode(!1),w.appendChild(b),b.label=null===a.group?"null":a.group,e[a.group]=b);var c=h.cloneNode(!1)}else b=w,c=h.cloneNode(!1);b.appendChild(c),l(a,c)}),c[0].appendChild(w),o.$render(),o.$isEmpty(a)||(b=n.readValue(),(v.trackBy||p?I(a,b):a===b)||(o.$setViewValue(b),o.$render()))}var n=j[0],o=j[1],p=f.multiple;j=0;for(var q=c.children(),s=q.length;j<s;j++)if(""===q[j].value){n.hasEmptyOption=!0,n.emptyOption=q.eq(j);break}var t=!!n.emptyOption;Zc(h.cloneNode(!1)).val("?");var u,v=g(f.ngOptions,c,a),w=e[0].createDocumentFragment();n.generateUnknownOptionValue=function(a){return"?"},p?(n.writeValue=function(a){var b=a&&a.map(k)||[];u.items.forEach(function(a){a.element.selected&&-1===Array.prototype.indexOf.call(b,a)&&(a.element.selected=!1)})},n.readValue=function(){var a=c.val()||[],b=[];return d(a,function(a){(a=u.selectValueMap[a])&&!a.disabled&&b.push(u.getViewValueFromOption(a))}),b},v.trackBy&&a.$watchCollection(function(){if(nd(o.$viewValue))return o.$viewValue.map(function(a){return v.getTrackByValue(a)})},function(){o.$render()})):(n.writeValue=function(a){var b=u.selectValueMap[c.val()],d=u.getOptionFromViewValue(a);b&&b.element.removeAttribute("selected"),d?(c[0].value!==d.selectValue&&(n.removeUnknownOption(),n.unselectEmptyOption(),c[0].value=d.selectValue,d.element.selected=!0),d.element.setAttribute("selected","selected")):t?n.selectEmptyOption():n.unknownOption.parent().length?n.updateUnknownOption(a):n.renderUnknownOption(a)},n.readValue=function(){var a=u.selectValueMap[c.val()];return a&&!a.disabled?(n.unselectEmptyOption(),n.removeUnknownOption(),u.getViewValueFromOption(a)):null},v.trackBy&&a.$watch(function(){return v.getTrackByValue(o.$viewValue)},function(){o.$render()})),t&&(n.emptyOption.remove(),b(n.emptyOption)(a),8===n.emptyOption[0].nodeType?(n.hasEmptyOption=!1,n.registerOption=function(a,b){""===b.val()&&(n.hasEmptyOption=!0,n.emptyOption=b,n.emptyOption.removeClass("ng-scope"),o.$render(),b.on("$destroy",function(){n.hasEmptyOption=!1,n.emptyOption=void 0}))}):n.emptyOption.removeClass("ng-scope")),c.empty(),m(),a.$watchCollection(v.getWatchables,m)}}}}],Pf=["$locale","$interpolate","$log",function(a,b,c){var e=/{}/g,f=/^when(Minus)?(.+)$/;return{link:function(g,h,i){function j(a){h.text(a||"")}var k,l=i.count,n=i.$attr.when&&h.attr(i.$attr.when),o=i.offset||0,p=g.$eval(n)||{},r={},s=b.startSymbol(),t=b.endSymbol(),u=s+l+"-"+o+t,v=kd.noop;d(i,function(a,b){var c=f.exec(b);c&&(c=(c[1]?"-":"")+cd(c[2]),p[c]=h.attr(i.$attr[b]))}),d(p,function(a,c){r[c]=b(a.replace(e,u))}),g.$watch(l,function(b){var d=parseFloat(b),e=md(d);e||d in p||(d=a.pluralCat(d-o)),d===k||e&&md(k)||(v(),e=r[d],q(e)?(null!=b&&c.debug("ngPluralize: no rule defined for '"+d+"' in "+n),v=m,j()):v=g.$watch(e,j),k=d)})}}}],Qf=["$parse","$animate","$compile",function(a,e,f){var g=b("ngRepeat"),h=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0==(1&b))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(b,i){var j=i.ngRepeat,k=f.$$createComment("end ngRepeat",j),l=j.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!l)throw g("iexp",j);var m=l[1],n=l[2],o=l[3],p=l[4],l=m.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!l)throw g("iidexp",m);var q=l[3]||l[1],r=l[2];if(o&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(o)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(o)))throw g("badident",o);var s,t,u,v,w={$id:Ka};return p?s=a(p):(u=function(a,b){return Ka(b)},v=function(a){return a}),function(a,b,f,i,l){s&&(t=function(b,c,d){return r&&(w[r]=b),w[q]=c,w.$index=d,s(a,w)});var m=fa();a.$watchCollection(n,function(f){var i,n,p,s,w,x,y,z,A,B,C=b[0],D=fa();if(o&&(a[o]=f),c(f))z=f,n=t||u;else for(B in n=t||v,z=[],f)bd.call(f,B)&&"$"!==B.charAt(0)&&z.push(B);for(s=z.length,B=Array(s),i=0;i<s;i++)if(w=f===z?i:z[i],x=f[w],y=n(w,x,i),m[y])A=m[y],delete m[y],D[y]=A,B[i]=A;else{if(D[y])throw d(B,function(a){a&&a.scope&&(m[a.id]=a)}),g("dupes",j,y,x);B[i]={id:y,scope:void 0,clone:void 0},D[y]=!0}for(p in m){if(A=m[p],y=ea(A.clone),e.leave(y),y[0].parentNode)for(i=0,n=y.length;i<n;i++)y[i].$$NG_REMOVED=!0;A.scope.$destroy()}for(i=0;i<s;i++)if(w=f===z?i:z[i],x=f[w],A=B[i],A.scope){p=C;do{p=p.nextSibling}while(p&&p.$$NG_REMOVED);A.clone[0]!==p&&e.move(ea(A.clone),null,C),C=A.clone[A.clone.length-1],h(A.scope,i,q,x,r,w,s)}else l(function(a,b){A.scope=b;var c=k.cloneNode(!1);a[a.length++]=c,e.enter(a,null,C),C=c,A.clone=a,D[A.id]=A,h(A.scope,i,q,x,r,w,s)});m=D})}}}}],Rf=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Sf=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Tf=Ec(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&d(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),Uf=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,e,f,g){var h=[],i=[],j=[],k=[],l=function(a,b){return function(c){!1!==c&&a.splice(b,1)}};c.$watch(f.ngSwitch||f.on,function(c){for(var e,f;j.length;)a.cancel(j.pop());for(e=0,f=k.length;e<f;++e){var m=ea(i[e].clone);k[e].$destroy(),(j[e]=a.leave(m)).done(l(j,e))}i.length=0,k.length=0,(h=g.cases["!"+c]||g.cases["?"])&&d(h,function(c){c.transclude(function(d,e){k.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen"),i.push({clone:d}),a.enter(d,f.parent(),f)})})})}}}],Vf=Ec({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,e,f){a=c.ngSwitchWhen.split(c.ngSwitchWhenSeparator).sort().filter(function(a,b,c){return c[b-1]!==a}),d(a,function(a){e.cases["!"+a]=e.cases["!"+a]||[],e.cases["!"+a].push({transclude:f,element:b})})}}),Wf=Ec({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),Xf=b("ngTransclude"),Yf=["$compile",function(a){return{restrict:"EAC",terminal:!0,compile:function(b){var c=a(b.contents());return b.empty(),function(a,b,d,e,f){function g(){c(a,function(a){b.append(a)})}if(!f)throw Xf("orphan",Q(b));d.ngTransclude===d.$attr.ngTransclude&&(d.ngTransclude=""),d=d.ngTransclude||d.ngTranscludeSlot,f(function(a,c){var d;if(d=a.length)a:{d=0;for(var e=a.length;d<e;d++){var f=a[d];if(f.nodeType!==yd||f.nodeValue.trim()){d=!0;break a}}d=void 0}d?b.append(a):(g(),c.$destroy())},null,d),d&&!f.isSlotFilled(d)&&g()}}}}],Zf=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){"text/ng-template"===c.type&&a.put(c.id,b[0].text)}}}],$f={$setViewValue:m,$render:m},_f=["$element","$scope",function(b,c){function d(){i||(i=!0,c.$$postDigest(function(){i=!1,g.ngModelCtrl.$render()}))}function e(a){j||(j=!0,c.$$postDigest(function(){c.$$destroyed||(j=!1,g.ngModelCtrl.$setViewValue(g.readValue()),a&&g.ngModelCtrl.$render())}))}function f(a){a.prop("selected",!0),a.attr("selected",!0)}var g=this,h=new Rd;g.selectValueMap={},g.ngModelCtrl=$f,g.multiple=!1,g.unknownOption=Zc(a.document.createElement("option")),g.hasEmptyOption=!1,g.emptyOption=void 0,g.renderUnknownOption=function(a){a=g.generateUnknownOptionValue(a),g.unknownOption.val(a),b.prepend(g.unknownOption),f(g.unknownOption),b.val(a)},g.updateUnknownOption=function(a){a=g.generateUnknownOptionValue(a),g.unknownOption.val(a),f(g.unknownOption),b.val(a)},g.generateUnknownOptionValue=function(a){return"? "+Ka(a)+" ?"},g.removeUnknownOption=function(){g.unknownOption.parent()&&g.unknownOption.remove()},g.selectEmptyOption=function(){g.emptyOption&&(b.val(""),f(g.emptyOption))},g.unselectEmptyOption=function(){g.hasEmptyOption&&g.emptyOption.removeAttr("selected")},c.$on("$destroy",function(){g.renderUnknownOption=m}),g.readValue=function(){var a=b.val(),a=a in g.selectValueMap?g.selectValueMap[a]:a;return g.hasOption(a)?a:null},g.writeValue=function(a){var c=b[0].options[b[0].selectedIndex];c&&c.removeAttribute("selected"),g.hasOption(a)?(g.removeUnknownOption(),c=Ka(a),b.val(c in g.selectValueMap?c:a),f(Zc(b[0].options[b[0].selectedIndex]))):null==a&&g.emptyOption?(g.removeUnknownOption(),g.selectEmptyOption()):g.unknownOption.parent().length?g.updateUnknownOption(a):g.renderUnknownOption(a)},g.addOption=function(a,b){if(8!==b[0].nodeType){ca(a,'"option value"'),""===a&&(g.hasEmptyOption=!0,g.emptyOption=b);var c=h.get(a)||0;h.set(a,c+1),d()}},g.removeOption=function(a){var b=h.get(a);b&&(1===b?(h.delete(a),""===a&&(g.hasEmptyOption=!1,g.emptyOption=void 0)):h.set(a,b-1))},g.hasOption=function(a){return!!h.get(a)};var i=!1,j=!1;g.registerOption=function(a,b,c,f,h){if(c.$attr.ngValue){var i,j=NaN;c.$observe("value",function(a){var c,d=b.prop("selected");r(j)&&(g.removeOption(i),delete g.selectValueMap[j],c=!0),j=Ka(a),i=a,g.selectValueMap[j]=a,g.addOption(a,b),b.attr("value",j),c&&d&&e()})}else f?c.$observe("value",function(a){g.readValue();var c,d=b.prop("selected");r(i)&&(g.removeOption(i),c=!0),i=a,g.addOption(a,b),c&&d&&e()}):h?a.$watch(h,function(a,d){c.$set("value",a);var f=b.prop("selected");d!==a&&g.removeOption(d),g.addOption(a,b),d&&f&&e()}):g.addOption(c.value,b);c.$observe("disabled",function(a){("true"===a||a&&b.prop("selected"))&&(g.multiple?e(!0):(g.ngModelCtrl.$setViewValue(null),g.ngModelCtrl.$render()))}),b.on("$destroy",function(){var a=g.readValue(),b=c.value;g.removeOption(b),d(),(g.multiple&&a&&-1!==a.indexOf(b)||a===b)&&e(!0)})}}],ag=function(){return{restrict:"E",require:["select","?ngModel"],controller:_f,priority:1,link:{pre:function(a,b,c,e){var f=e[0],g=e[1];if(g){if(f.ngModelCtrl=g,b.on("change",function(){f.removeUnknownOption(),a.$apply(function(){g.$setViewValue(f.readValue())})}),c.multiple){f.multiple=!0,f.readValue=function(){var a=[];return d(b.find("option"),function(b){b.selected&&!b.disabled&&(b=b.value,a.push(b in f.selectValueMap?f.selectValueMap[b]:b))}),a},f.writeValue=function(a){d(b.find("option"),function(b){b.selected=!!a&&(-1!==Array.prototype.indexOf.call(a,b.value)||-1!==Array.prototype.indexOf.call(a,f.selectValueMap[b.value]))})};var h,i=NaN;a.$watch(function(){i!==g.$viewValue||I(h,g.$viewValue)||(h=ia(g.$viewValue),g.$render()),i=g.$viewValue}),g.$isEmpty=function(a){return!a||0===a.length}}}else f.registerOption=m},post:function(a,b,c,d){var e=d[1];if(e){var f=d[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},bg=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,c){var d,e;return r(c.ngValue)||(r(c.value)?d=a(c.value,!0):(e=a(b.text(),!0))||c.$set("value",b.text())),function(a,b,c){var f=b.parent();(f=f.data("$selectController")||f.parent().data("$selectController"))&&f.registerOption(a,b,c,d,e)}}}}],cg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},dg=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){if(u(a)&&0<a.length&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw b("ngPattern")("noregexp",g,a,Q(c));f=a||void 0,e.$validate()}),e.$validators.pattern=function(a,b){return e.$isEmpty(b)||q(f)||f.test(b)}}}}},eg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){a=k(a),e=md(a)?-1:a,d.$validate()}),d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},fg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=k(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};a.angular.bootstrap?a.console&&console.log("WARNING: Tried to load angular more than once."):(function(){var b;if(!xd){var c=sd();($c=q(c)?a.jQuery:c?a[c]:void 0)&&$c.fn.on?(Zc=$c,i($c.fn,{scope:Md.scope,isolateScope:Md.isolateScope,controller:Md.controller,injector:Md.injector,inheritedData:Md.inheritedData}),b=$c.cleanData,$c.cleanData=function(a){for(var c,d,e=0;null!=(d=a[e]);e++)(c=$c._data(d,"events"))&&c.$destroy&&$c(d).triggerHandler("$destroy");b(a)}):Zc=oa,kd.element=Zc,xd=!0}}(),function(c){i(c,{bootstrap:Y,copy:H,extend:i,merge:j,equals:I,element:Zc,forEach:d,injector:Oa,noop:m,bind:K,toJson:M,fromJson:N,identity:n,isUndefined:q,isDefined:r,isString:u,isFunction:x,isObject:s,isNumber:v,isElement:D,isArray:nd,version:zd,isDate:w,lowercase:cd,uppercase:dd,callbacks:{$$counter:0},getTestability:$,reloadWithDebugInfo:Z,$$minErr:b,$$csp:rd,$$encodeUriSegment:U,$$encodeUriQuery:V,$$stringify:ga}),(_c=ha(a))("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Xb}),a.provider("$compile",Xa).directive({a:Te,input:jf,textarea:jf,form:Xe,script:Zf,select:ag,option:bg,ngBind:mf,ngBindHtml:of,ngBindTemplate:nf,ngClass:qf,ngClassEven:sf,ngClassOdd:rf,ngCloak:tf,ngController:uf,ngForm:Ye,ngHide:Sf,ngIf:xf,ngInclude:yf,ngInit:Af,ngNonBindable:Lf,ngPluralize:Pf,ngRepeat:Qf,ngShow:Rf,ngStyle:Tf,ngSwitch:Uf,ngSwitchWhen:Vf,ngSwitchDefault:Wf,ngOptions:Of,ngTransclude:Yf,ngModel:If,ngList:Bf,ngChange:pf,pattern:dg,ngPattern:dg,required:cg,ngRequired:cg,minlength:fg,ngMinlength:fg,maxlength:eg,ngMaxlength:eg,ngValue:lf,ngModelOptions:Kf}).directive({ngInclude:zf}).directive(Ue).directive(vf),a.provider({$anchorScroll:Pa,$animate:ae,$animateCss:de,$$animateJs:$d,$$animateQueue:_d,$$AnimateRunner:ce,$$animateAsyncRun:be,$browser:Ua,$cacheFactory:Va,$controller:bb,$document:cb,$$isDocumentHidden:db,$exceptionHandler:eb,$filter:jc,$$forceReflow:ke,$interpolate:qb,$interval:rb,$http:mb,$httpParamSerializer:gb,$httpParamSerializerJQLike:hb,$httpBackend:ob,$xhrFactory:nb,$jsonpCallbacks:se,$location:Eb,$log:Fb,$parse:Rb,$rootScope:Wb,$q:Sb,$$q:Tb,$sce:_b,$sceDelegate:$b,$sniffer:ac,$templateCache:Wa,$templateRequest:bc,$$testability:cc,$timeout:dc,$window:gc,$$rAF:Vb,$$jqLite:Ja,$$Map:Sd,$$cookieReader:ic})}])}(kd),kd.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,c){var d=0|a,e=c;return void 0===e&&(e=Math.min(b(a),3)),Math.pow(10,e),1==d&&0==e?"one":"other"}})}]),Zc(function(){X(a.document,Y)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return T(new(T(function(){},{prototype:a})),b)}function e(a){return S(arguments,function(b){b!==a&&S(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var b=[];return S(a,function(a,c){b.push(c)}),b}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for((d=d<0?Math.ceil(d):Math.floor(d))<0&&(d+=c);d<c;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l]&&i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return T({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return S(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return S(c,function(c){c in a&&(b[c]=a[c])}),b}function m(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function n(a,b){var c=R(a),d=c?[]:{};return S(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function o(a,b){var c=R(a)?[]:{};return S(a,function(a,d){c[d]=b(a,d)}),c}function p(a){return a.then(c,function(){})&&a}function q(a,b){var d=1,f=2,i={},j=[],k=i,l=T(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(t[c]!==f){if(s.push(c),t[c]===d)throw s.splice(0,h(s,c)),new Error("Cyclic dependency: "+s.join(" -> "));if(t[c]=d,P(a))r.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);S(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),r.push(c,a,e)}s.pop(),t[c]=f}}function o(a){return Q(a)&&a.then&&a.$$promises}if(!Q(i))throw new Error("'invocables' must be an object");var q=g(i||{}),r=[],s=[],t={};return S(i,n),i=s=t=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),n.$$values=t,n.$$promises=n.$$promises||!0,delete n.$$inheritedValues,j.resolve(t))}function i(a){n.$$failure=a,j.reject(a)}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!Q(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=l;var j=a.defer(),n=p(j.promise),s=n.$$promises={},t=T({},d),u=1+r.length/3,v=!1;if(p(n),N(f.$$failure))return i(f.$$failure),n;f.$$inheritedValues&&e(t,m(f.$$inheritedValues,q)),T(s,f.$$promises),f.$$values?(v=e(t,m(f.$$values,q)),n.$$inheritedValues=m(f.$$values,q),
h()):(f.$$inheritedValues&&(n.$$inheritedValues=m(f.$$inheritedValues,q)),f.then(h,i));for(var w=0,x=r.length;w<x;w+=3)d.hasOwnProperty(r[w])?h():function(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!N(n.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;S(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=p(l.promise)}(r[w],r[w+1],r[w+2]);return n}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function r(){var a=b.version.minor<3;this.shouldUnsafelyUseHttp=function(b){a=!!b},this.$get=["$http","$templateCache","$injector",function(b,c,d){return new s(b,c,d,a)}]}function s(a,b,c,d){this.fromConfig=function(a,b,c){return N(a.template)?this.fromString(a.template,b):N(a.templateUrl)?this.fromUrl(a.templateUrl,b):N(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return O(a)?a(b):a},this.fromUrl=function(e,f){return O(e)&&(e=e(f)),null==e?null:d?a.get(e,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data}):c.get("$templateRequest")(e)},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function t(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new W.Param(b,c,d,e),p[b]}function g(a,b,c,d){var e=["",""],f=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return f;switch(c){case!1:e=["(",")"+(d?"?":"")];break;case!0:f=f.replace(/\/$/,""),e=["(?:/(",")|/)?"];break;default:e=["("+c+"|",")?"]}return f+e[0]+b+e[1]}function h(e,f){var g,h,i,j,k;return g=e[2]||e[3],k=b.params[g],i=a.substring(m,e.index),h=f?e[4]:e[4]||("*"==e[1]?".*":null),h&&(j=W.type(h)||d(W.type("string"),{pattern:new RegExp(h,b.caseInsensitive?"i":c)})),{id:g,regexp:h,segment:i,type:j,cfg:k}}b=T({params:{}},Q(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new W.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash,s.isOptional),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(!1===b.strict?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function u(a){T(this,a)}function v(){function a(a){return null!=a?a.toString().replace(/(~|\/)/g,function(a){return{"~":"~~","/":"~2F"}[a]}):a}function e(a){return null!=a?a.toString().replace(/(~~|~2F)/g,function(a){return{"~~":"~","~2F":"/"}[a]}):a}function f(){return{strict:p,caseInsensitive:m}}function i(a){return O(a)||R(a)&&O(a[a.length-1])}function j(){for(;w.length;){var a=w.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(r[a.name],l.invoke(a.def))}}function k(a){T(this,a||{})}W=this;var l,m=!1,p=!0,q=!1,r={},s=!0,w=[],x={string:{encode:a,decode:e,is:function(a){return null==a||!N(a)||"string"==typeof a},pattern:/[^\/]*/},int:{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return a!==c&&null!==a&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return!0===a||!1===a},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^\/]*/},any:{encode:b.identity,decode:b.identity,equals:b.equals,pattern:/.*/}};v.$$getDefaultValue=function(a){if(!i(a.value))return a.value;if(!l)throw new Error("Injectable functions cannot be called at configuration time");return l.invoke(a.value)},this.caseInsensitive=function(a){return N(a)&&(m=a),m},this.strictMode=function(a){return N(a)&&(p=a),p},this.defaultSquashPolicy=function(a){if(!N(a))return q;if(!0!==a&&!1!==a&&!P(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return q=a,a},this.compile=function(a,b){return new t(a,T(f(),b))},this.isMatcher=function(a){if(!Q(a))return!1;var b=!0;return S(t.prototype,function(c,d){O(c)&&(b=b&&N(a[d])&&O(a[d]))}),b},this.type=function(a,b,c){if(!N(b))return r[a];if(r.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return r[a]=new u(T({name:a},b)),c&&(w.push({name:a,def:c}),s||j()),this},S(x,function(a,b){r[b]=new u(T({name:b},a))}),r=d(r,{}),this.$get=["$injector",function(a){return l=a,s=!1,j(),S(x,function(a,b){r[b]||(r[b]=new u(a))}),this}],this.Param=function(a,d,e,f){function j(){if(!l)throw new Error("Injectable functions cannot be called at configuration time");var a=l.invoke(e.$$fn);if(null!==a&&a!==c&&!p.type.is(a))throw new Error("Default value ("+a+") for parameter '"+p.id+"' is not an instance of Type ("+p.type.name+")");return a}function k(a){function b(a){return function(b){return b.from===a}}return a=function(a){var c=o(n(p.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}(a),N(a)?p.type.$normalize(a):j()}function m(){return"{Param:"+a+" "+d+" squash: '"+v+"' optional: "+t+"}"}var p=this;e=function(a){var b=Q(a)?g(a):[];return-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array")&&(a={value:a}),a.$$fn=i(a.value)?a.value:function(){return a.value},a}(e),d=function(c,d,e){if(c.type&&d)throw new Error("Param '"+a+"' has two type configurations.");return d||(c.type?b.isString(c.type)?r[c.type]:c.type instanceof u?c.type:new u(c.type):"config"===e?r.any:r.string)}(e,d,f);var s=function(){var b={array:"search"===f&&"auto"},c=a.match(/\[\]$/)?{array:!0}:{};return T(b,c,e).array}();d=s?d.$asArray(s,"search"===f):d,"string"!==d.name||s||"path"!==f||e.value!==c||(e.value="");var t=e.value!==c,v=function(a,b){var c=a.squash;if(!b||!1===c)return!1;if(!N(c)||null==c)return q;if(!0===c||P(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}(e,t),w=function(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=R(a.replace)?a.replace:[],P(e)&&f.push({from:e,to:c}),g=o(f,function(a){return a.from}),n(i,function(a){return-1===h(g,a.from)}).concat(f)}(e,s,t,v);T(this,{id:a,type:d,location:f,array:s,squash:v,replace:w,isOptional:t,value:k,dynamic:c,config:e,toString:m})},k.prototype={$$new:function(){return d(this,T(new k,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(k.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),S(b,function(b){S(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return S(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return S(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var d,e,f,g,h,i=this.$$keys();for(d=0;d<i.length&&(e=this[i[d]],(f=a[i[d]])!==c&&null!==f||!e.isOptional);d++){if(g=e.type.$normalize(f),!e.type.is(g))return!1;if(h=e.type.encode(g),b.isString(h)&&!e.type.pattern.exec(h))return!1}return!0},$$parent:c},this.ParamSet=k}function w(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return!N(d)||d}function h(d,e,f,g,h){function m(a,b,c){return"/"===q?a:b?q.slice(0,-1)+a:c?q.slice(1)+a:a}function n(a){function b(a){var b=a(f,d);return!!b&&(P(b)&&d.replace().url(b),!0)}if(!a||!a.defaultPrevented){p&&d.url(),p=c;var e,g=j.length;for(e=0;e<g;e++)if(b(j[e]))return;k&&b(k)}}function o(){return i=i||e.$on("$locationChangeSuccess",n)}var p,q=g.baseHref(),r=d.url();return l||o(),{sync:function(){n()},listen:function(){return o()},update:function(a){return a?void(r=d.url()):void(d.url()!==r&&(d.url(r),d.replace()))},push:function(a,b,e){var f=a.format(b||{});null!==f&&b&&b["#"]&&(f+="#"+b["#"]),d.url(f),p=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled),g=g&&h.history;var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),null!==i&&e&&e["#"]&&(i+="#"+e["#"]),i=m(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!O(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(P(a)){var b=a;a=function(){return b}}else if(!O(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=P(b);if(P(a)&&(a=d.compile(a)),!h&&!O(b)&&!R(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),T(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:P(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),T(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function x(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function m(a,b){if(!a)return c;var d=P(a),e=d?a:a.name;if(f(e)){if(!b)throw new Error("No reference point given for path '"+e+"'");b=m(b);for(var g=e.split("."),h=0,i=g.length,j=b;h<i;h++)if(""!==g[h]||0!==h){if("^"!==g[h])break;if(!j.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");j=j.parent}else j=b;g=g.slice(h).join("."),e=j.name+(j.name&&g?".":"")+g}var k=A[e];return!k||!d&&(d||k!==a&&k.self!==a)?c:k}function n(a,b){B[a]||(B[a]=[]),B[a].push(b)}function q(a){for(var b=B[a]||[];b.length;)r(b.shift())}function r(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!P(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(A.hasOwnProperty(c))throw new Error("State '"+c+"' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):P(b.parent)?b.parent:Q(b.parent)&&P(b.parent.name)?b.parent.name:"";if(e&&!A[e])return n(e,b.self);for(var f in D)O(D[f])&&(b[f]=D[f](b,D.$delegates[f]));return A[c]=b,!b[C]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){z.$current.navigable==b&&j(a,c)||z.transitionTo(b,a,{inherit:!0,location:!1})}]),q(c),b}function s(a){return a.indexOf("*")>-1}function t(a){for(var b=a.split("."),c=z.$current.name.split("."),d=0,e=b.length;d<e;d++)"*"===b[d]&&(c[d]="*");return"**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length==c.length&&c.join("")===b.join("")}function u(a,b){return P(a)&&!N(b)?D[a]:O(b)&&P(a)?(D[a]&&!D.$delegates[a]&&(D.$delegates[a]=D[a]),D[a]=b,this):this}function v(a,b){return Q(a)?b=a:b.name=a,r(b),this}function w(a,e,f,h,j,l,n,q,r){function u(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return n.update(),E;if(!g.retry)return null;if(f.$retry)return n.update(),F;var h=z.transition=e.when(g.retry);return h.then(function(){return h!==z.transition?(a.$broadcast("$stateChangeCancel",b.to,b.toParams,c,d),B):(b.options.$retry=!0,z.transitionTo(b.to,b.toParams,b.options))},function(){return E}),n.update(),h}function v(a,c,d,g,i,l){function m(){var c=[];return S(a.views,function(d,e){var g=d.resolve&&d.resolve!==a.resolve?d.resolve:{};g.$template=[function(){return f.load(e,{view:d,locals:i.globals,params:n,notify:l.notify})||""}],c.push(j.resolve(g,i.globals,i.resolve,a).then(function(c){if(O(d.controllerProvider)||R(d.controllerProvider)){var f=b.extend({},g,i.globals);c.$$controller=h.invoke(d.controllerProvider,null,f)}else c.$$controller=d.controller;c.$$state=a,c.$$controllerAs=d.controllerAs,c.$$resolveAs=d.resolveAs,i[e]=c}))}),e.all(c).then(function(){return i.globals})}var n=d?c:k(a.params.$$keys(),c),o={$stateParams:n};i.resolve=j.resolve(a.resolve,o,i.resolve,a);var p=[i.resolve.then(function(a){i.globals=a})];return g&&p.push(g),e.all(p).then(m).then(function(a){return i})}var w=new Error("transition superseded"),B=p(e.reject(w)),D=p(e.reject(new Error("transition prevented"))),E=p(e.reject(new Error("transition aborted"))),F=p(e.reject(new Error("transition failed")));return y.locals={resolve:null,globals:{$stateParams:{}}},z={params:{},current:y.self,$current:y,transition:null},z.reload=function(a){return z.transitionTo(z.current,l,{reload:a||!0,inherit:!1,notify:!0})},z.go=function(a,b,c){return z.transitionTo(a,b,T({inherit:!0,relative:z.$current},c))},z.transitionTo=function(b,c,f){c=c||{},f=T({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=z.$current,o=z.params,q=j.path,r=m(b,f.relative),s=c["#"];if(!N(r)){var t={to:b,toParams:c,options:f},A=u(t,j.self,o,f);if(A)return A;if(b=t.to,c=t.toParams,f=t.options,r=m(b,f.relative),!N(r)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(r[C])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(l,c||{},z.$current,r)),!r.params.$$validates(c))return F;c=r.params.$$values(c),b=r;var E=b.path,G=0,H=E[G],I=y.locals,J=[];if(f.reload){if(P(f.reload)||Q(f.reload)){if(Q(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");var K=!0===f.reload?q[0]:m(f.reload);if(f.reload&&!K)throw new Error("No such reload state '"+(P(f.reload)?f.reload:f.reload.name)+"'");for(;H&&H===q[G]&&H!==K;)I=J[G]=H.locals,G++,H=E[G]}}else for(;H&&H===q[G]&&H.ownParams.$$equals(c,o);)I=J[G]=H.locals,G++,H=E[G];if(x(b,c,j,o,I,f))return s&&(c["#"]=s),z.params=c,U(z.params,l),U(k(b.params.$$keys(),l),b.locals.globals.$stateParams),f.location&&b.navigable&&b.navigable.url&&(n.push(b.navigable.url,c,{$$avoidResync:!0,replace:"replace"===f.location}),n.update(!0)),z.transition=null,e.when(z.current);if(c=k(b.params.$$keys(),c||{}),s&&(c["#"]=s),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,o,f).defaultPrevented)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,o),null==z.transition&&n.update(),D;for(var L=e.when(I),M=G;M<E.length;M++,H=E[M])I=J[M]=d(I),L=v(H,c,H===b,L,I,f);var O=z.transition=L.then(function(){var d,e,g;if(z.transition!==O)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,o),B;for(d=q.length-1;d>=G;d--)g=q[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=G;d<E.length;d++)e=E[d],e.locals=J[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return z.transition!==O?(a.$broadcast("$stateChangeCancel",b.self,c,j.self,o),B):(z.$current=b,z.current=b.self,z.params=c,U(z.params,l),z.transition=null,f.location&&b.navigable&&n.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,o),n.update(!0),z.current)}).then(null,function(d){return d===w?B:z.transition!==O?(a.$broadcast("$stateChangeCancel",b.self,c,j.self,o),B):(z.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,o,d),g.defaultPrevented||n.update(),e.reject(d))});return p(O),O},z.is=function(a,b,d){d=T({relative:z.$current},d||{});var e=m(a,d.relative);return N(e)?z.$current===e&&(!b||g(b).reduce(function(a,c){var d=e.params[c];return a&&!d||d.type.equals(l[c],b[c])},!0)):c},z.includes=function(a,b,d){if(d=T({relative:z.$current},d||{}),P(a)&&s(a)){if(!t(a))return!1;a=z.$current.name}var e=m(a,d.relative);if(!N(e))return c;if(!N(z.$current.includes[e.name]))return!1;if(!b)return!0;for(var f=g(b),h=0;h<f.length;h++){var i=f[h],j=e.params[i];if(j&&!j.type.equals(l[i],b[i]))return!1}return g(b).reduce(function(a,c){var d=e.params[c];return a&&!d||d.type.equals(l[c],b[c])},!0)},z.href=function(a,b,d){d=T({lossy:!0,inherit:!0,absolute:!1,relative:z.$current},d||{});var e=m(a,d.relative);if(!N(e))return null;d.inherit&&(b=i(l,b||{},z.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?n.href(f.url,k(e.params.$$keys().concat("#"),b||{}),{absolute:d.absolute}):null},z.get=function(a,b){if(0===arguments.length)return o(g(A),function(a){return A[a].self});var c=m(a,b||z.$current);return c&&c.self?c.self:null},z}function x(a,b,c,d,e,f){if(!f.reload&&a===c&&(e===c.locals||!1===a.self.reloadOnSearch&&function(a,b,c){function d(b){return"search"!=a.params[b].location}var e=a.params.$$keys().filter(d),f=l.apply({},[a.params].concat(e));return new W.ParamSet(f).$$equals(b,c)}(c,d,b)))return!0}var y,z,A={},B={},C="abstract",D={parent:function(a){if(N(a.parent)&&a.parent)return m(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?m(b[1]):y},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=d(a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(P(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||y).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new W.ParamSet;return S(a.params||{},function(a,c){b[c]||(b[c]=new W.Param(c,null,a,"config"))}),b},params:function(a){var b=l(a.ownParams,a.ownParams.$$keys());return a.parent&&a.parent.params?T(a.parent.params.$$new(),b):new W.ParamSet},views:function(a){var b={};return S(N(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),c.resolveAs=c.resolveAs||a.resolveAs||"$resolve",b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?T({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};y=r({name:"",url:"^",views:null,abstract:!0}),y.navigable=null,this.decorator=u,this.state=v,this.$get=w,w.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function y(){function a(a,b){return{load:function(a,c){var d;return c=T({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},c),c.view&&(d=b.fromConfig(c.view,c.params,c.locals)),d}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function z(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}function A(a,c,d,e,f){function g(a,c){if(j)return{enter:function(a,c,d){b.version.minor>2?j.enter(a,null,c).then(d):j.enter(a,null,c,d)},leave:function(a,c){b.version.minor>2?j.leave(a).then(c):j.leave(a,c)}};if(i){var d=i&&i(c,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}}()}var h=function(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(a){return null}}}(),i=h("$animator"),j=h("$animate");return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,h,i){return function(c,h,j){function k(){if(m&&(m.remove(),m=null),o&&(o.$destroy(),o=null),n){var a=n.data("$uiViewAnim");s.leave(n,function(){a.$$animLeave.resolve(),m=null}),m=n,n=null}}function l(g){var l,m=C(c,j,h,e),t=m&&a.$current&&a.$current.locals[m];if(g||t!==p){l=c.$new(),p=a.$current.locals[m],l.$emit("$viewContentLoading",m);var u=i(l,function(a){var e=f.defer(),g=f.defer(),i={$animEnter:e.promise,$animLeave:g.promise,$$animLeave:g};a.data("$uiViewAnim",i),s.enter(a,h,function(){e.resolve(),o&&o.$emit("$viewContentAnimationEnded"),(b.isDefined(r)&&!r||c.$eval(r))&&d(a)}),k()});n=u,o=l,o.$emit("$viewContentLoaded",m),o.$eval(q)}}var m,n,o,p,q=j.onload||"",r=j.autoscroll,s=g(j,c);h.inheritedData("$uiView"),c.$on("$stateChangeSuccess",function(){l(!1)}),l(!0)}}}}function B(a,c,d,e){return{restrict:"ECA",priority:-400,compile:function(f){var g=f.html();return f.empty?f.empty():f[0].innerHTML=null,function(f,h,i){var j=d.$current,k=C(f,i,h,e),l=j&&j.locals[k];if(!l)return h.html(g),void a(h.contents())(f);h.data("$uiView",{name:k,state:l.$$state}),h.html(l.$template?l.$template:g);var m=b.extend({},l);f[l.$$resolveAs]=m;var n=a(h.contents());if(l.$$controller){l.$scope=f,l.$element=h;var o=c(l.$$controller,l);l.$$controllerAs&&(f[l.$$controllerAs]=o,f[l.$$controllerAs][l.$$resolveAs]=m),O(o.$onInit)&&o.$onInit(),h.data("$ngControllerController",o),h.children().data("$ngControllerController",o)}n(f)}}}}function C(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function D(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),!(c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/))||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function E(a){var b=a.parent().inheritedData("$uiView");if(b&&b.state&&b.state.name)return b.state}function F(a){var b="[object SVGAnimatedString]"===Object.prototype.toString.call(a.prop("href")),c="FORM"===a[0].nodeName;return{attr:c?"action":b?"xlink:href":"href",isAnchor:"A"===a.prop("tagName").toUpperCase(),clickable:!c}}function G(a,b,c,d,e){return function(f){var g=f.which||f.button,h=e();if(!(g>1||f.ctrlKey||f.metaKey||f.shiftKey||a.attr("target"))){var i=c(function(){b.go(h.state,h.params,h.options)});f.preventDefault();var j=d.isAnchor&&!h.href?1:0;f.preventDefault=function(){j--<=0&&c.cancel(i)}}}}function H(a,b){return{relative:E(a)||b.$current,inherit:!0}}function I(a,c){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(d,e,f,g){var h,i=D(f.uiSref,a.current.name),j={state:i.state,href:null,params:null},k=F(e),l=g[1]||g[0],m=null;j.options=T(H(e,a),f.uiSrefOpts?d.$eval(f.uiSrefOpts):{});var n=function(c){c&&(j.params=b.copy(c)),j.href=a.href(i.state,j.params,j.options),m&&m(),l&&(m=l.$$addStateInfo(i.state,j.params)),null!==j.href&&f.$set(k.attr,j.href)};i.paramExpr&&(d.$watch(i.paramExpr,function(a){a!==j.params&&n(a)},!0),j.params=b.copy(d.$eval(i.paramExpr))),n(),k.clickable&&(h=G(e,a,c,k,function(){return j}),e[e.on?"on":"bind"]("click",h),d.$on("$destroy",function(){e[e.off?"off":"unbind"]("click",h)}))}}}function J(a,b){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(c,d,e,f){function g(b){m.state=b[0],m.params=b[1],m.options=b[2],m.href=a.href(m.state,m.params,m.options),n&&n(),j&&(n=j.$$addStateInfo(m.state,m.params)),m.href&&e.$set(i.attr,m.href)}var h,i=F(d),j=f[1]||f[0],k=[e.uiState,e.uiStateParams||null,e.uiStateOpts||null],l="["+k.map(function(a){return a||"null"}).join(", ")+"]",m={state:null,params:null,options:null,href:null},n=null;c.$watch(l,g,!0),g(c.$eval(l)),i.clickable&&(h=G(d,a,b,i,function(){return m}),d[d.on?"on":"bind"]("click",h),c.$on("$destroy",function(){d[d.off?"off":"unbind"]("click",h)}))}}}function K(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(b,d,e,f){function g(b,c,e){var f=a.get(b,E(d)),g=h(b,c),i={state:f||{name:b},params:c,hash:g};return p.push(i),q[g]=e,function(){var a=p.indexOf(i);-1!==a&&p.splice(a,1)}}function h(a,c){if(!P(a))throw new Error("state should be a string");return Q(c)?a+V(c):(c=b.$eval(c),Q(c)?a+V(c):a)}function i(){for(var a=0;a<p.length;a++)l(p[a].state,p[a].params)?j(d,q[p[a].hash]):k(d,q[p[a].hash]),m(p[a].state,p[a].params)?j(d,n):k(d,n)}function j(a,b){f(function(){a.addClass(b)})}function k(a,b){a.removeClass(b)}function l(b,c){return a.includes(b.name,c)}function m(b,c){return a.is(b.name,c)}var n,o,p=[],q={};n=c(e.uiSrefActiveEq||"",!1)(b);try{o=b.$eval(e.uiSrefActive)}catch(a){}o=o||c(e.uiSrefActive||"",!1)(b),Q(o)&&S(o,function(c,d){if(P(c)){var e=D(c,a.current.name);g(e.state,b.$eval(e.paramExpr),d)}}),this.$$addStateInfo=function(a,b){if(!(Q(o)&&p.length>0)){var c=g(a,b,o);return i(),c}},b.$on("$stateChangeSuccess",i),i()}]}}function L(a){var b=function(b,c){return a.is(b,c)};return b.$stateful=!0,b}function M(a){var b=function(b,c,d){return a.includes(b,c,d)};return b.$stateful=!0,b}var N=b.isDefined,O=b.isFunction,P=b.isString,Q=b.isObject,R=b.isArray,S=b.forEach,T=b.extend,U=b.copy,V=b.toJson;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),q.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",q),b.module("ui.router.util").provider("$templateFactory",r);var W;t.prototype.concat=function(a,b){var c={caseInsensitive:W.caseInsensitive(),strict:W.strictMode(),squash:W.defaultSquashPolicy()};return new t(this.sourcePath+a+this.sourceSearch,T(c,b),this)},t.prototype.toString=function(){return this.source},t.prototype.exec=function(a,b){var c=this.regexp.exec(a);if(!c)return null;b=b||{};var d,e,f,g=this.parameters(),h=g.length,i=this.segments.length-1,j={};if(i!==c.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var k,l;for(d=0;d<i;d++){for(f=g[d],k=this.params[f],l=c[d+1],e=0;e<k.replace.length;e++)k.replace[e].from===l&&(l=k.replace[e].to);l&&!0===k.array&&(l=function(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/g,"-")}return o(o(b(a).split(/-(?!\\)/),b),c).reverse()}(l)),N(l)&&(l=k.type.decode(l)),j[f]=k.value(l)}for(;d<h;d++){for(f=g[d],j[f]=this.params[f].value(b[f]),k=this.params[f],l=b[f],e=0;e<k.replace.length;e++)k.replace[e].from===l&&(l=k.replace[e].to);N(l)&&(l=k.type.decode(l)),j[f]=k.value(l)}return j},t.prototype.parameters=function(a){return N(a)?this.params[a]||null:this.$$paramNames},t.prototype.validates=function(a){return this.params.$$validates(a)},t.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;f<i;f++){var k=f<h,l=d[f],m=e[l],n=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),n),q=!!p&&m.squash,r=m.type.encode(n);if(k){var s=c[f+1],t=f+1===h;if(!1===q)null!=r&&(j+=R(r)?o(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(!0===q){var u=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(u)[1]}else P(q)&&(j+=q+s);t&&!0===m.squash&&"/"===j.slice(-1)&&(j=j.slice(0,-1))}else{if(null==r||p&&!1!==q)continue;if(R(r)||(r=[r]),0===r.length)continue;r=o(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+l+"="+r,g=!0}}return j},u.prototype.is=function(a,b){return!0},u.prototype.encode=function(a,b){return a},u.prototype.decode=function(a,b){return a},u.prototype.equals=function(a,b){return a==b},u.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},u.prototype.pattern=/.*/,u.prototype.toString=function(){return"{Type:"+this.name+"}"},u.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},u.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return R(a)?a:N(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){if(R(c)&&0===c.length)return c;c=e(c);var d=o(c,a);return!0===b?0===n(d,g).length:f(d)}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=function(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}(d(a,"equals")),this.pattern=a.pattern,this.$normalize=h(d(a,"$normalize")),this.name=a.name,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",v),b.module("ui.router.util").run(["$urlMatcherFactory",function(a){}]),w.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",w),x.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",x).run(["$injector",function(a){a.get("$state.runtime").autoinject&&a.get("$state")}]),y.$inject=[],b.module("ui.router.state").provider("$view",y),b.module("ui.router.state").provider("$uiViewScroll",z),A.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],B.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",A),b.module("ui.router.state").directive("uiView",B),I.$inject=["$state","$timeout"],J.$inject=["$state","$timeout"],K.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",I).directive("uiSrefActive",K).directive("uiSrefActiveEq",K).directive("uiState",J),L.$inject=["$state"],M.$inject=["$state"],b.module("ui.router.state").filter("isState",L).filter("includedByState",M)}(window,window.angular),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}
var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b);if(("prev"==a&&0===c||"next"==a&&c==this.$items.length-1)&&!this.options.wrap)return b;var d="prev"==a?-1:1,e=(c+d)%this.$items.length;return this.$items.eq(e)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"))&&b.transitioning)){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=e.find(".dropdown-menu li:not(.disabled):visible a");if(h.length){var i=h.index(c.target);38==c.which&&i>0&&i--,40==c.which&&i<h.length-1&&i++,~i||(i=0),h.eq(i).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a=this.$element,b=this.options;return a.attr("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title)},c.prototype.getUID=function(a){do{a+=~~(1e6*Math.random())}while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&((c=a(b.currentTarget).data("bs."+this.type))||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),
b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);var fabric=fabric||{version:"1.7.3"};"undefined"!=typeof exports&&(exports.fabric=fabric),"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=require("jsdom").jsdom(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E")),fabric.document.createWindow?fabric.window=fabric.document.createWindow():fabric.window=fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",fabric.fontPaths={},fabric.charWidthsCache={},fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,function(){function a(a,b){if(this.__eventListeners[a]){var c=this.__eventListeners[a];b?c[c.indexOf(b)]=!1:fabric.util.array.fill(c,!1)}}function b(a,b){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var c in a)this.on(c,a[c]);else this.__eventListeners[a]||(this.__eventListeners[a]=[]),this.__eventListeners[a].push(b);return this}function c(b,c){if(this.__eventListeners){if(0===arguments.length)for(b in this.__eventListeners)a.call(this,b);else if(1===arguments.length&&"object"==typeof arguments[0])for(var d in b)a.call(this,d,b[d]);else a.call(this,b,c);return this}}function d(a,b){if(this.__eventListeners){var c=this.__eventListeners[a];if(c){for(var d=0,e=c.length;d<e;d++)c[d]&&c[d].call(this,b||{});return this.__eventListeners[a]=c.filter(function(a){return!1!==a}),this}}}fabric.Observable={observe:b,stopObserving:c,fire:d,on:b,off:c,trigger:d}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var a=0,b=arguments.length;a<b;a++)this._onObjectAdded(arguments[a]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(a,b,c){var d=this.getObjects();return c?d[b]=a:d.splice(b,0,a),this._onObjectAdded&&this._onObjectAdded(a),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var a,b=this.getObjects(),c=!1,d=0,e=arguments.length;d<e;d++)-1!==(a=b.indexOf(arguments[d]))&&(c=!0,b.splice(a,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[d]));return this.renderOnAddRemove&&c&&this.renderAll(),this},forEachObject:function(a,b){for(var c=this.getObjects(),d=0,e=c.length;d<e;d++)a.call(b,c[d],d,c);return this},getObjects:function(a){return void 0===a?this._objects:this._objects.filter(function(b){return b.type===a})},item:function(a){return this.getObjects()[a]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(a){return this.getObjects().indexOf(a)>-1},complexity:function(){return this.getObjects().reduce(function(a,b){return a+=b.complexity?b.complexity():0},0)}},fabric.CommonMethods={_setOptions:function(a){for(var b in a)this.set(b,a[b])},_initGradient:function(a,b){!a||!a.colorStops||a instanceof fabric.Gradient||this.set(b,new fabric.Gradient(a))},_initPattern:function(a,b,c){!a||!a.source||a instanceof fabric.Pattern?c&&c():this.set(b,new fabric.Pattern(a,c))},_initClipping:function(a){if(a.clipTo&&"string"==typeof a.clipTo){var b=fabric.util.getFunctionBody(a.clipTo);void 0!==b&&(this.clipTo=new Function("ctx",b))}},_setObject:function(a){for(var b in a)this._set(b,a[b])},set:function(a,b){return"object"==typeof a?this._setObject(a):"function"==typeof b&&"clipTo"!==a?this._set(a,b(this.get(a))):this._set(a,b),this},_set:function(a,b){this[a]=b},toggle:function(a){var b=this.get(a);return"boolean"==typeof b&&this.set(a,!b),this},get:function(a){return this[a]}},function(a){var b=Math.sqrt,c=Math.atan2,d=Math.pow,e=Math.abs,f=Math.PI/180;fabric.util={removeFromArray:function(a,b){var c=a.indexOf(b);return-1!==c&&a.splice(c,1),a},getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},degreesToRadians:function(a){return a*f},radiansToDegrees:function(a){return a/f},rotatePoint:function(a,b,c){a.subtractEquals(b);var d=fabric.util.rotateVector(a,c);return new fabric.Point(d.x,d.y).addEquals(b)},rotateVector:function(a,b){var c=Math.sin(b),d=Math.cos(b);return{x:a.x*d-a.y*c,y:a.x*c+a.y*d}},transformPoint:function(a,b,c){return c?new fabric.Point(b[0]*a.x+b[2]*a.y,b[1]*a.x+b[3]*a.y):new fabric.Point(b[0]*a.x+b[2]*a.y+b[4],b[1]*a.x+b[3]*a.y+b[5])},makeBoundingBoxFromPoints:function(a){var b=[a[0].x,a[1].x,a[2].x,a[3].x],c=fabric.util.array.min(b),d=fabric.util.array.max(b),e=Math.abs(c-d),f=[a[0].y,a[1].y,a[2].y,a[3].y],g=fabric.util.array.min(f),h=fabric.util.array.max(f);return{left:c,top:g,width:e,height:Math.abs(g-h)}},invertTransform:function(a){var b=1/(a[0]*a[3]-a[1]*a[2]),c=[b*a[3],-b*a[1],-b*a[2],b*a[0]],d=fabric.util.transformPoint({x:a[4],y:a[5]},c,!0);return c[4]=-d.x,c[5]=-d.y,c},toFixed:function(a,b){return parseFloat(Number(a).toFixed(b))},parseUnit:function(a,b){var c=/\D{0,2}$/.exec(a),d=parseFloat(a);switch(b||(b=fabric.Text.DEFAULT_SVG_FONT_SIZE),c[0]){case"mm":return d*fabric.DPI/25.4;case"cm":return d*fabric.DPI/2.54;case"in":return d*fabric.DPI;case"pt":return d*fabric.DPI/72;case"pc":return d*fabric.DPI/72*12;case"em":return d*b;default:return d}},falseFunction:function(){return!1},getKlass:function(a,b){return a=fabric.util.string.camelize(a.charAt(0).toUpperCase()+a.slice(1)),fabric.util.resolveNamespace(b)[a]},resolveNamespace:function(b){if(!b)return fabric;var c,d=b.split("."),e=d.length,f=a||fabric.window;for(c=0;c<e;++c)f=f[d[c]];return f},loadImage:function(a,b,c,d){if(!a)return void(b&&b.call(c,a));var e=fabric.util.createImage();e.onload=function(){b&&b.call(c,e),e=e.onload=e.onerror=null},e.onerror=function(){fabric.log("Error loading "+e.src),b&&b.call(c,null,!0),e=e.onload=e.onerror=null},0!==a.indexOf("data")&&d&&(e.crossOrigin=d),e.src=a},enlivenObjects:function(a,b,c,d){function e(){++g===h&&b&&b(f)}a=a||[];var f=[],g=0,h=a.length;return h?void a.forEach(function(a,b){if(!a||!a.type)return void e();fabric.util.getKlass(a.type,c).fromObject(a,function(c,g){g||(f[b]=c),d&&d(a,c,g),e()},!0)}):void(b&&b(f))},enlivenPatterns:function(a,b){function c(){++e===f&&b&&b(d)}a=a||[];var d=[],e=0,f=a.length;return f?void a.forEach(function(a,b){a&&a.source?new fabric.Pattern(a,function(a){d[b]=a,c()}):(d[b]=a,c())}):void(b&&b(d))},groupSVGElements:function(a,b,c){var d;return d=new fabric.PathGroup(a,b),void 0!==c&&d.setSourcePath(c),d},populateWithProperties:function(a,b,c){if(c&&"[object Array]"===Object.prototype.toString.call(c))for(var d=0,e=c.length;d<e;d++)c[d]in a&&(b[c[d]]=a[c[d]])},drawDashedLine:function(a,d,e,f,g,h){var i=f-d,j=g-e,k=b(i*i+j*j),l=c(j,i),m=h.length,n=0,o=!0;for(a.save(),a.translate(d,e),a.moveTo(0,0),a.rotate(l),d=0;k>d;)d+=h[n++%m],d>k&&(d=k),a[o?"lineTo":"moveTo"](d,0),o=!o;a.restore()},createCanvasElement:function(a){return a||(a=fabric.document.createElement("canvas")),a.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(a),a},createImage:function(){return fabric.isLikelyNode?new(require("canvas").Image):fabric.document.createElement("img")},createAccessors:function(a){var b,c,d,e,f,g=a.prototype;for(b=g.stateProperties.length;b--;)c=g.stateProperties[b],d=c.charAt(0).toUpperCase()+c.slice(1),e="set"+d,f="get"+d,g[f]||(g[f]=function(a){return new Function('return this.get("'+a+'")')}(c)),g[e]||(g[e]=function(a){return new Function("value",'return this.set("'+a+'", value)')}(c))},clipContext:function(a,b){b.save(),b.beginPath(),a.clipTo(b),b.clip()},multiplyTransformMatrices:function(a,b,c){return[a[0]*b[0]+a[2]*b[1],a[1]*b[0]+a[3]*b[1],a[0]*b[2]+a[2]*b[3],a[1]*b[2]+a[3]*b[3],c?0:a[0]*b[4]+a[2]*b[5]+a[4],c?0:a[1]*b[4]+a[3]*b[5]+a[5]]},qrDecompose:function(a){var e=c(a[1],a[0]),g=d(a[0],2)+d(a[1],2),h=b(g),i=(a[0]*a[3]-a[2]*a[1])/h,j=c(a[0]*a[2]+a[1]*a[3],g);return{angle:e/f,scaleX:h,scaleY:i,skewX:j/f,skewY:0,translateX:a[4],translateY:a[5]}},customTransformMatrix:function(a,b,c){var d=[1,0,e(Math.tan(c*f)),1],g=[e(a),0,0,e(b)];return fabric.util.multiplyTransformMatrices(g,d,!0)},resetObjectTransform:function(a){a.scaleX=1,a.scaleY=1,a.skewX=0,a.skewY=0,a.flipX=!1,a.flipY=!1,a.setAngle(0)},getFunctionBody:function(a){return(String(a).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(a,b,c,d){d>0&&(b>d?b-=d:b=0,c>d?c-=d:c=0);var e,f,g=!0,h=a.getImageData(b,c,2*d||1,2*d||1),i=h.data.length;for(e=3;e<i&&(f=h.data[e],!1!==(g=f<=0));e+=4);return h=null,g},parsePreserveAspectRatioAttribute:function(a){var b,c="meet",d="Mid",e="Mid",f=a.split(" ");return f&&f.length&&(c=f.pop(),"meet"!==c&&"slice"!==c?(b=c,c="meet"):f.length&&(b=f.pop())),d="none"!==b?b.slice(1,4):"none",e="none"!==b?b.slice(5,8):"none",{meetOrSlice:c,alignX:d,alignY:e}},clearFabricFontCache:function(a){a?fabric.charWidthsCache[a]&&delete fabric.charWidthsCache[a]:fabric.charWidthsCache={}}}}("undefined"!=typeof exports?exports:this),function(){function a(a,d,f,g,i,j,k){var l=h.call(arguments);if(e[l])return e[l];var m=Math.PI,n=k*m/180,o=Math.sin(n),p=Math.cos(n),q=0,r=0;f=Math.abs(f),g=Math.abs(g);var s=-p*a*.5-o*d*.5,t=-p*d*.5+o*a*.5,u=f*f,v=g*g,w=t*t,x=s*s,y=u*v-u*w-v*x,z=0;if(y<0){var A=Math.sqrt(1-y/(u*v));f*=A,g*=A}else z=(i===j?-1:1)*Math.sqrt(y/(u*w+v*x));var B=z*f*t/g,C=-z*g*s/f,D=p*B-o*C+.5*a,E=o*B+p*C+.5*d,F=c(1,0,(s-B)/f,(t-C)/g),G=c((s-B)/f,(t-C)/g,(-s-B)/f,(-t-C)/g);0===j&&G>0?G-=2*m:1===j&&G<0&&(G+=2*m);for(var H=Math.ceil(Math.abs(G/m*2)),I=[],J=G/H,K=8/3*Math.sin(J/4)*Math.sin(J/4)/Math.sin(J/2),L=F+J,M=0;M<H;M++)I[M]=b(F,L,p,o,f,g,D,E,K,q,r),q=I[M][4],r=I[M][5],F=L,L+=J;return e[l]=I,I}function b(a,b,c,d,e,g,i,j,k,l,m){var n=h.call(arguments);if(f[n])return f[n];var o=Math.cos(a),p=Math.sin(a),q=Math.cos(b),r=Math.sin(b),s=c*e*q-d*g*r+i,t=d*e*q+c*g*r+j,u=l+k*(-c*e*p-d*g*o),v=m+k*(-d*e*p+c*g*o),w=s+k*(c*e*r+d*g*q),x=t+k*(d*e*r-c*g*q);return f[n]=[u,v,w,x,s,t],f[n]}function c(a,b,c,d){var e=Math.atan2(b,a),f=Math.atan2(d,c);return f>=e?f-e:2*Math.PI-(e-f)}function d(a,b,c,d,e,f,i,j){var k=h.call(arguments);if(g[k])return g[k];var l,m,n,o,p,q,r,s,t=Math.sqrt,u=Math.min,v=Math.max,w=Math.abs,x=[],y=[[],[]];m=6*a-12*c+6*e,l=-3*a+9*c-9*e+3*i,n=3*c-3*a;for(var z=0;z<2;++z)if(z>0&&(m=6*b-12*d+6*f,l=-3*b+9*d-9*f+3*j,n=3*d-3*b),w(l)<1e-12){if(w(m)<1e-12)continue;0<(o=-n/m)&&o<1&&x.push(o)}else(r=m*m-4*n*l)<0||(s=t(r),p=(-m+s)/(2*l),0<p&&p<1&&x.push(p),0<(q=(-m-s)/(2*l))&&q<1&&x.push(q));for(var A,B,C,D=x.length,E=D;D--;)o=x[D],C=1-o,A=C*C*C*a+3*C*C*o*c+3*C*o*o*e+o*o*o*i,y[0][D]=A,B=C*C*C*b+3*C*C*o*d+3*C*o*o*f+o*o*o*j,y[1][D]=B;y[0][E]=a,y[1][E]=b,y[0][E+1]=i,y[1][E+1]=j;var F=[{x:u.apply(null,y[0]),y:u.apply(null,y[1])},{x:v.apply(null,y[0]),y:v.apply(null,y[1])}];return g[k]=F,F}var e={},f={},g={},h=Array.prototype.join;fabric.util.drawArc=function(b,c,d,e){for(var f=e[0],g=e[1],h=e[2],i=e[3],j=e[4],k=e[5],l=e[6],m=[[],[],[],[]],n=a(k-c,l-d,f,g,i,j,h),o=0,p=n.length;o<p;o++)m[o][0]=n[o][0]+c,m[o][1]=n[o][1]+d,m[o][2]=n[o][2]+c,m[o][3]=n[o][3]+d,m[o][4]=n[o][4]+c,m[o][5]=n[o][5]+d,b.bezierCurveTo.apply(b,m[o])},fabric.util.getBoundsOfArc=function(b,c,e,f,g,h,i,j,k){for(var l,m=0,n=0,o=[],p=a(j-b,k-c,e,f,h,i,g),q=0,r=p.length;q<r;q++)l=d(m,n,p[q][0],p[q][1],p[q][2],p[q][3],p[q][4],p[q][5]),o.push({x:l[0].x+b,y:l[0].y+c}),o.push({x:l[1].x+b,y:l[1].y+c}),m=p[q][4],n=p[q][5];return o},fabric.util.getBoundsOfCurve=d}(),function(){function a(a,b){for(var c=f.call(arguments,2),d=[],e=0,g=a.length;e<g;e++)d[e]=c.length?a[e][b].apply(a[e],c):a[e][b].call(a[e]);return d}function b(a,b){return e(a,b,function(a,b){return a>=b})}function c(a,b){return e(a,b,function(a,b){return a<b})}function d(a,b){for(var c=a.length;c--;)a[c]=b;return a}function e(a,b,c){if(a&&0!==a.length){var d=a.length-1,e=b?a[d][b]:a[d];if(b)for(;d--;)c(a[d][b],e)&&(e=a[d][b]);else for(;d--;)c(a[d],e)&&(e=a[d]);return e}}var f=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>0&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==Number.POSITIVE_INFINITY&&d!==Number.NEGATIVE_INFINITY&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);e<c;e++)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length>>>0;c<d;c++)c in this&&a.call(b,this[c],c,this)}),Array.prototype.map||(Array.prototype.map=function(a,b){for(var c=[],d=0,e=this.length>>>0;d<e;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c}),Array.prototype.every||(Array.prototype.every=function(a,b){for(var c=0,d=this.length>>>0;c<d;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(a,b){for(var c=0,d=this.length>>>0;c<d;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(a,b){for(var c,d=[],e=0,f=this.length>>>0;e<f;e++)e in this&&(c=this[e],a.call(b,c,e,this)&&d.push(c));return d}),Array.prototype.reduce||(Array.prototype.reduce=function(a){var b,c=this.length>>>0,d=0;if(arguments.length>1)b=arguments[1];else for(;;){if(d in this){b=this[d++];break}if(++d>=c)throw new TypeError}for(;d<c;d++)d in this&&(b=a.call(null,b,this[d],d,this));return b}),fabric.util.array={fill:d,invoke:a,min:c,max:b}}(),function(){function a(b,c,d){if(d)if(!fabric.isLikelyNode&&c instanceof Element)b=c;else if(c instanceof Array){b=[];for(var e=0,f=c.length;e<f;e++)b[e]=a({},c[e],d)}else if(c&&"object"==typeof c)for(var g in c)c.hasOwnProperty(g)&&(b[g]=a({},c[g],d));else b=c;else for(var g in c)b[g]=c[g];return b}function b(b,c){return a({},b,c)}fabric.util.object={extend:a,clone:b}}(),function(){function a(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})}function b(a,b){return a.charAt(0).toUpperCase()+(b?a.slice(1):a.slice(1).toLowerCase())}function c(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:a,capitalize:b,escapeXml:c}}(),function(){var a=Array.prototype.slice,b=Function.prototype.apply,c=function(){};Function.prototype.bind||(Function.prototype.bind=function(d){var e,f=this,g=a.call(arguments,1);return e=g.length?function(){return b.call(f,this instanceof c?this:d,g.concat(a.call(arguments)))}:function(){return b.call(f,this instanceof c?this:d,arguments)},c.prototype=this.prototype,e.prototype=new c,e})}(),function(){function a(){}function b(a){var b=this.constructor.superclass.prototype[a];return arguments.length>1?b.apply(this,d.call(arguments,1)):b.call(this)}function c(){function c(){this.initialize.apply(this,arguments)}var f=null,h=d.call(arguments,0);"function"==typeof h[0]&&(f=h.shift()),c.superclass=f,c.subclasses=[],f&&(a.prototype=f.prototype,c.prototype=new a,f.subclasses.push(c));for(var i=0,j=h.length;i<j;i++)g(c,h[i],f);return c.prototype.initialize||(c.prototype.initialize=e),c.prototype.constructor=c,c.prototype.callSuper=b,c}var d=Array.prototype.slice,e=function(){},f=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}(),g=function(a,b,c){for(var d in b)d in a.prototype&&"function"==typeof a.prototype[d]&&(b[d]+"").indexOf("callSuper")>-1?a.prototype[d]=function(a){return function(){var d=this.constructor.superclass;this.constructor.superclass=c;var e=b[a].apply(this,arguments);if(this.constructor.superclass=d,"initialize"!==a)return e}}(d):a.prototype[d]=b[d],f&&(b.toString!==Object.prototype.toString&&(a.prototype.toString=b.toString),b.valueOf!==Object.prototype.valueOf&&(a.prototype.valueOf=b.valueOf))};fabric.util.createClass=c}(),function(){function a(a){var b,c,d=Array.prototype.slice.call(arguments,1),e=d.length;for(c=0;c<e;c++)if(b=typeof a[d[c]],!/^(?:function|object|unknown)$/.test(b))return!1;return!0}function b(a,b){return{handler:b,wrappedHandler:c(a,b)}}function c(a,b){return function(c){b.call(g(a),c||fabric.window.event)}}function d(a,b){return function(c){if(p[a]&&p[a][b])for(var d=p[a][b],e=0,f=d.length;e<f;e++)d[e].call(this,c||fabric.window.event)}}function e(a){a||(a=fabric.window.event);var b=a.target||(typeof a.srcElement!==i?a.srcElement:null),c=fabric.util.getScrollLeftTop(b);return{x:q(a)+c.left,y:r(a)+c.top}}function f(a,b,c){var d="touchend"===a.type?"changedTouches":"touches";return a[d]&&a[d][0]?a[d][0][b]-(a[d][0][b]-a[d][0][c])||a[c]:a[c]}var g,h,i="unknown",j=function(){var a=0;return function(b){return b.__uniqueID||(b.__uniqueID="uniqueID__"+a++)}}();!function(){var a={};g=function(b){return a[b]},h=function(b,c){a[b]=c}}();var k,l,m=a(fabric.document.documentElement,"addEventListener","removeEventListener")&&a(fabric.window,"addEventListener","removeEventListener"),n=a(fabric.document.documentElement,"attachEvent","detachEvent")&&a(fabric.window,"attachEvent","detachEvent"),o={},p={};m?(k=function(a,b,c){a.addEventListener(b,c,!1)},l=function(a,b,c){a.removeEventListener(b,c,!1)}):n?(k=function(a,c,d){var e=j(a);h(e,a),o[e]||(o[e]={}),o[e][c]||(o[e][c]=[]);var f=b(e,d);o[e][c].push(f),a.attachEvent("on"+c,f.wrappedHandler)},l=function(a,b,c){var d,e=j(a);if(o[e]&&o[e][b])for(var f=0,g=o[e][b].length;f<g;f++)(d=o[e][b][f])&&d.handler===c&&(a.detachEvent("on"+b,d.wrappedHandler),o[e][b][f]=null)}):(k=function(a,b,c){var e=j(a);if(p[e]||(p[e]={}),!p[e][b]){p[e][b]=[];var f=a["on"+b];f&&p[e][b].push(f),a["on"+b]=d(e,b)}p[e][b].push(c)},l=function(a,b,c){var d=j(a);if(p[d]&&p[d][b])for(var e=p[d][b],f=0,g=e.length;f<g;f++)e[f]===c&&e.splice(f,1)}),fabric.util.addListener=k,fabric.util.removeListener=l;var q=function(a){return typeof a.clientX!==i?a.clientX:0},r=function(a){return typeof a.clientY!==i?a.clientY:0};fabric.isTouchSupported&&(q=function(a){return f(a,"pageX","clientX")},r=function(a){return f(a,"pageY","clientY")}),fabric.util.getPointer=e,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function a(a,b){var c=a.style;if(!c)return a;if("string"==typeof b)return a.style.cssText+=";"+b,b.indexOf("opacity")>-1?f(a,b.match(/opacity:\s*(\d?\.?\d*)/)[1]):a;for(var d in b)if("opacity"===d)f(a,b[d]);else{var e="float"===d||"cssFloat"===d?void 0===c.styleFloat?"cssFloat":"styleFloat":d;c[e]=b[d]}return a}var b=fabric.document.createElement("div"),c="string"==typeof b.style.opacity,d="string"==typeof b.style.filter,e=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,f=function(a){return a};c?f=function(a,b){return a.style.opacity=b,a}:d&&(f=function(a,b){var c=a.style;return a.currentStyle&&!a.currentStyle.hasLayout&&(c.zoom=1),e.test(c.filter)?(b=b>=.9999?"":"alpha(opacity="+100*b+")",c.filter=c.filter.replace(e,b)):c.filter+=" alpha(opacity="+100*b+")",a}),fabric.util.setStyle=a}(),function(){function a(a){return"string"==typeof a?fabric.document.getElementById(a):a}function b(a,b){var c=fabric.document.createElement(a);for(var d in b)"class"===d?c.className=b[d]:"for"===d?c.htmlFor=b[d]:c.setAttribute(d,b[d]);return c}function c(a,b){a&&-1===(" "+a.className+" ").indexOf(" "+b+" ")&&(a.className+=(a.className?" ":"")+b)}function d(a,c,d){return"string"==typeof c&&(c=b(c,d)),a.parentNode&&a.parentNode.replaceChild(c,a),c.appendChild(a),c}function e(a){for(var b=0,c=0,d=fabric.document.documentElement,e=fabric.document.body||{scrollLeft:0,scrollTop:0};a&&(a.parentNode||a.host)&&(a=a.parentNode||a.host,a===fabric.document?(b=e.scrollLeft||d.scrollLeft||0,c=e.scrollTop||d.scrollTop||0):(b+=a.scrollLeft||0,c+=a.scrollTop||0),1!==a.nodeType||"fixed"!==fabric.util.getElementStyle(a,"position")););return{left:b,top:c}}function f(a){var b,c,d=a&&a.ownerDocument,f={left:0,top:0},g={left:0,top:0},h={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!d)return g;for(var i in h)g[h[i]]+=parseInt(j(a,i),10)||0;return b=d.documentElement,void 0!==a.getBoundingClientRect&&(f=a.getBoundingClientRect()),c=e(a),{left:f.left+c.left-(b.clientLeft||0)+g.left,top:f.top+c.top-(b.clientTop||0)+g.top}}var g,h=Array.prototype.slice,i=function(a){return h.call(a,0)};try{g=i(fabric.document.childNodes)instanceof Array}catch(a){}g||(i=function(a){for(var b=new Array(a.length),c=a.length;c--;)b[c]=a[c];return b});var j;j=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(a,b){var c=fabric.document.defaultView.getComputedStyle(a,null);return c?c[b]:void 0}:function(a,b){var c=a.style[b];return!c&&a.currentStyle&&(c=a.currentStyle[b]),c},function(){function a(a){return void 0!==a.onselectstart&&(a.onselectstart=fabric.util.falseFunction),d?a.style[d]="none":"string"==typeof a.unselectable&&(a.unselectable="on"),a}function b(a){return void 0!==a.onselectstart&&(a.onselectstart=null),d?a.style[d]="":"string"==typeof a.unselectable&&(a.unselectable=""),a}var c=fabric.document.documentElement.style,d="userSelect"in c?"userSelect":"MozUserSelect"in c?"MozUserSelect":"WebkitUserSelect"in c?"WebkitUserSelect":"KhtmlUserSelect"in c?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=a,fabric.util.makeElementSelectable=b}(),function(){function a(a,b){var c=fabric.document.getElementsByTagName("head")[0],d=fabric.document.createElement("script"),e=!0;d.onload=d.onreadystatechange=function(a){if(e){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;e=!1,b(a||fabric.window.event),d=d.onload=d.onreadystatechange=null}},d.src=a,c.appendChild(d)}fabric.util.getScript=a}(),fabric.util.getById=a,fabric.util.toArray=i,fabric.util.makeElement=b,fabric.util.addClass=c,fabric.util.wrapElement=d,fabric.util.getScrollLeftTop=e,fabric.util.getElementOffset=f,fabric.util.getElementStyle=j}(),function(){function a(a,b){return a+(/\?/.test(a)?"&":"?")+b}function b(){}function c(c,e){e||(e={});var f=e.method?e.method.toUpperCase():"GET",g=e.onComplete||function(){},h=d(),i=e.body||e.parameters;return h.onreadystatechange=function(){4===h.readyState&&(g(h),h.onreadystatechange=b)},"GET"===f&&(i=null,"string"==typeof e.parameters&&(c=a(c,e.parameters))),h.open(f,c,!0),"POST"!==f&&"PUT"!==f||h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(i),h}var d=function(){for(var a=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],b=a.length;b--;)try{if(a[b]())return a[b]}catch(a){}}();fabric.util.request=c}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(a){void 0!==console[a]&&"function"==typeof console[a].apply&&(fabric[a]=function(){return console[a].apply(console,arguments)})}),function(){function a(a){b(function(c){a||(a={});var d,e=c||+new Date,f=a.duration||500,g=e+f,h=a.onChange||function(){},i=a.abort||function(){return!1},j=a.easing||function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},k="startValue"in a?a.startValue:0,l="endValue"in a?a.endValue:100,m=a.byValue||l-k;a.onStart&&a.onStart(),function c(l){d=l||+new Date;var n=d>g?f:d-e;return i()?void(a.onComplete&&a.onComplete()):(h(j(n,k,m,f)),d>g?void(a.onComplete&&a.onComplete()):void b(c))}(e)})}function b(){return c.apply(fabric.window,arguments)}var c=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(a){fabric.window.setTimeout(a,1e3/60)};fabric.util.animate=a,fabric.util.requestAnimFrame=b}(),function(){function a(a,b,c){var d="rgba("+parseInt(a[0]+c*(b[0]-a[0]),10)+","+parseInt(a[1]+c*(b[1]-a[1]),10)+","+parseInt(a[2]+c*(b[2]-a[2]),10);return d+=","+(a&&b?parseFloat(a[3]+c*(b[3]-a[3])):1),d+=")"}function b(b,c,d,e){var f=new fabric.Color(b).getSource(),g=new fabric.Color(c).getSource();e=e||{},fabric.util.animate(fabric.util.object.extend(e,{duration:d||500,startValue:f,endValue:g,byValue:g,easing:function(b,c,d,f){return a(c,d,e.colorEasing?e.colorEasing(b,f):1-Math.cos(b/f*(Math.PI/2)))}}))}fabric.util.animateColor=b}(),function(){function a(a,b,c,d){return a<Math.abs(b)?(a=b,d=c/4):d=0===b&&0===a?c/(2*Math.PI)*Math.asin(1):c/(2*Math.PI)*Math.asin(b/a),{a:a,c:b,p:c,s:d}}function b(a,b,c){return a.a*Math.pow(2,10*(b-=1))*Math.sin((b*c-a.s)*(2*Math.PI)/a.p)}function c(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b}function d(a,b,c,d){return a/=d/2,a<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}function e(a,b,c,d){return c*(a/=d)*a*a*a+b}function f(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b}function g(a,b,c,d){return a/=d/2,a<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b}function h(a,b,c,d){return c*(a/=d)*a*a*a*a+b}function i(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b}function j(a,b,c,d){return a/=d/2,a<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b}function k(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b}function l(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b}function m(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b}function n(a,b,c,d){return 0===a?b:c*Math.pow(2,10*(a/d-1))+b}function o(a,b,c,d){return a===d?b+c:c*(1-Math.pow(2,-10*a/d))+b}function p(a,b,c,d){return 0===a?b:a===d?b+c:(a/=d/2,a<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(2-Math.pow(2,-10*--a))+b)}function q(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b}function r(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b}function s(a,b,c,d){return a/=d/2,a<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b}function t(c,d,e,f){var g=0,h=e;return 0===c?d:1===(c/=f)?d+e:(g||(g=.3*f),-b(a(h,e,g,1.70158),c,f)+d)}function u(b,c,d,e){var f=0,g=d;if(0===b)return c;if(1===(b/=e))return c+d;f||(f=.3*e);var h=a(g,d,f,1.70158);return h.a*Math.pow(2,-10*b)*Math.sin((b*e-h.s)*(2*Math.PI)/h.p)+h.c+c}function v(c,d,e,f){var g=0,h=e;if(0===c)return d;if(2===(c/=f/2))return d+e;g||(g=f*(.3*1.5));var i=a(h,e,g,1.70158);return c<1?-.5*b(i,c,f)+d:i.a*Math.pow(2,-10*(c-=1))*Math.sin((c*f-i.s)*(2*Math.PI)/i.p)*.5+i.c+d}function w(a,b,c,d,e){return void 0===e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b}function x(a,b,c,d,e){return void 0===e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b}function y(a,b,c,d,e){return void 0===e&&(e=1.70158),a/=d/2,a<1?c/2*(a*a*((1+(e*=1.525))*a-e))+b:c/2*((a-=2)*a*((1+(e*=1.525))*a+e)+2)+b}function z(a,b,c,d){return c-A(d-a,0,c,d)+b}function A(a,b,c,d){return(a/=d)<1/2.75?c*(7.5625*a*a)+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b}function B(a,b,c,d){return a<d/2?.5*z(2*a,0,c,d)+b:.5*A(2*a-d,0,c,d)+.5*c+b}fabric.util.ease={easeInQuad:function(a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(a,b,c,d){return a/=d/2,a<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOutCubic:c,easeInOutCubic:d,easeInQuart:e,easeOutQuart:f,easeInOutQuart:g,easeInQuint:h,easeOutQuint:i,easeInOutQuint:j,easeInSine:k,easeOutSine:l,easeInOutSine:m,easeInExpo:n,easeOutExpo:o,easeInOutExpo:p,easeInCirc:q,easeOutCirc:r,easeInOutCirc:s,easeInElastic:t,easeOutElastic:u,easeInOutElastic:v,easeInBack:w,easeOutBack:x,easeInOutBack:y,easeInBounce:z,easeOutBounce:A,easeInOutBounce:B}}(),function(a){"use strict";function b(a){return a in z?z[a]:a}function c(a,b,c,d){var e,f="[object Array]"===Object.prototype.toString.call(b);return"fill"!==a&&"stroke"!==a||"none"!==b?"strokeDashArray"===a?b="none"===b?null:b.replace(/,/g," ").split(/\s+/).map(function(a){return parseFloat(a)}):"transformMatrix"===a?b=c&&c.transformMatrix?u(c.transformMatrix,p.parseTransformAttribute(b)):p.parseTransformAttribute(b):"visible"===a?(b="none"!==b&&"hidden"!==b,c&&!1===c.visible&&(b=!1)):"originX"===a?b="start"===b?"left":"end"===b?"right":"center":e=f?b.map(t):t(b,d):b="",!f&&isNaN(e)?b:e}function d(a){
for(var b in A)if(void 0!==a[A[b]]&&""!==a[b]){if(void 0===a[b]){if(!p.Object.prototype[b])continue;a[b]=p.Object.prototype[b]}if(0!==a[b].indexOf("url(")){var c=new p.Color(a[b]);a[b]=c.setAlpha(s(c.getAlpha()*a[A[b]],2)).toRgba()}}return a}function e(a,b){for(var c,d,e=[],f=0;f<b.length;f++)c=b[f],d=a.getElementsByTagName(c),e=e.concat(Array.prototype.slice.call(d));return e}function f(a,d){var e,f;a.replace(/;\s*$/,"").split(";").forEach(function(a){var g=a.split(":");e=b(g[0].trim().toLowerCase()),f=c(e,g[1].trim()),d[e]=f})}function g(a,d){var e,f;for(var g in a)void 0!==a[g]&&(e=b(g.toLowerCase()),f=c(e,a[g]),d[e]=f)}function h(a,b){var c={};for(var d in p.cssRules[b])if(i(a,d.split(" ")))for(var e in p.cssRules[b][d])c[e]=p.cssRules[b][d][e];return c}function i(a,b){var c,d=!0;return c=k(a,b.pop()),c&&b.length&&(d=j(a,b)),c&&d&&0===b.length}function j(a,b){for(var c,d=!0;a.parentNode&&1===a.parentNode.nodeType&&b.length;)d&&(c=b.pop()),a=a.parentNode,d=k(a,c);return 0===b.length}function k(a,b){var c,d=a.nodeName,e=a.getAttribute("class"),f=a.getAttribute("id");if(c=new RegExp("^"+d,"i"),b=b.replace(c,""),f&&b.length&&(c=new RegExp("#"+f+"(?![a-zA-Z\\-]+)","i"),b=b.replace(c,"")),e&&b.length){e=e.split(" ");for(var g=e.length;g--;)c=new RegExp("\\."+e[g]+"(?![a-zA-Z\\-]+)","i"),b=b.replace(c,"")}return 0===b.length}function l(a,b){var c;if(a.getElementById&&(c=a.getElementById(b)),c)return c;var d,e,f=a.getElementsByTagName("*");for(e=0;e<f.length;e++)if(d=f[e],b===d.getAttribute("id"))return d}function m(a){for(var b=e(a,["use","svg:use"]),c=0;b.length&&c<b.length;){var d,f,g,h,i,j=b[c],k=j.getAttribute("xlink:href").substr(1),m=j.getAttribute("x")||0,o=j.getAttribute("y")||0,p=l(a,k).cloneNode(!0),q=(p.getAttribute("transform")||"")+" translate("+m+", "+o+")",r=b.length;if(n(p),/^svg$/i.test(p.nodeName)){var s=p.ownerDocument.createElement("g");for(g=0,h=p.attributes,i=h.length;g<i;g++)f=h.item(g),s.setAttribute(f.nodeName,f.nodeValue);for(;p.firstChild;)s.appendChild(p.firstChild);p=s}for(g=0,h=j.attributes,i=h.length;g<i;g++)f=h.item(g),"x"!==f.nodeName&&"y"!==f.nodeName&&"xlink:href"!==f.nodeName&&("transform"===f.nodeName?q=f.nodeValue+" "+q:p.setAttribute(f.nodeName,f.nodeValue));p.setAttribute("transform",q),p.setAttribute("instantiated_by_use","1"),p.removeAttribute("id"),d=j.parentNode,d.replaceChild(p,j),b.length===r&&c++}}function n(a){var b,c,d,e,f=a.getAttribute("viewBox"),g=1,h=1,i=0,j=0,k=a.getAttribute("width"),l=a.getAttribute("height"),m=a.getAttribute("x")||0,n=a.getAttribute("y")||0,o=a.getAttribute("preserveAspectRatio")||"",q=!f||!w.test(a.nodeName)||!(f=f.match(B)),r=!k||!l||"100%"===k||"100%"===l,s=q&&r,u={},v="";if(u.width=0,u.height=0,u.toBeParsed=s,s)return u;if(q)return u.width=t(k),u.height=t(l),u;if(i=-parseFloat(f[1]),j=-parseFloat(f[2]),b=parseFloat(f[3]),c=parseFloat(f[4]),r?(u.width=b,u.height=c):(u.width=t(k),u.height=t(l),g=u.width/b,h=u.height/c),o=p.util.parsePreserveAspectRatioAttribute(o),"none"!==o.alignX&&(h=g=g>h?h:g),1===g&&1===h&&0===i&&0===j&&0===m&&0===n)return u;if((m||n)&&(v=" translate("+t(m)+" "+t(n)+") "),d=v+" matrix("+g+" 0 0 "+h+" "+i*g+" "+j*h+") ","svg"===a.nodeName){for(e=a.ownerDocument.createElement("g");a.firstChild;)e.appendChild(a.firstChild);a.appendChild(e)}else e=a,d=e.getAttribute("transform")+d;return e.setAttribute("transform",d),u}function o(a,b){for(;a&&(a=a.parentNode);)if(a.nodeName&&b.test(a.nodeName.replace("svg:",""))&&!a.getAttribute("instantiated_by_use"))return!0;return!1}var p=a.fabric||(a.fabric={}),q=p.util.object.extend,r=p.util.object.clone,s=p.util.toFixed,t=p.util.parseUnit,u=p.util.multiplyTransformMatrices,v=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/i,w=/^(symbol|image|marker|pattern|view|svg)$/i,x=/^(?:pattern|defs|symbol|metadata|clipPath|mask)$/i,y=/^(symbol|g|a|svg)$/i,z={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX"},A={stroke:"strokeOpacity",fill:"fillOpacity"};p.cssRules={},p.gradientDefs={},p.parseTransformAttribute=function(){function a(a,b){var c=Math.cos(b[0]),d=Math.sin(b[0]),e=0,f=0;3===b.length&&(e=b[1],f=b[2]),a[0]=c,a[1]=d,a[2]=-d,a[3]=c,a[4]=e-(c*e-d*f),a[5]=f-(d*e+c*f)}function b(a,b){var c=b[0],d=2===b.length?b[1]:b[0];a[0]=c,a[3]=d}function c(a,b,c){a[c]=Math.tan(p.util.degreesToRadians(b[0]))}function d(a,b){a[4]=b[0],2===b.length&&(a[5]=b[1])}var e=[1,0,0,1,0,0],f=p.reNum,g="(?:\\s+,?\\s*|,\\s*)",h="(?:(skewX)\\s*\\(\\s*("+f+")\\s*\\))",i="(?:(skewY)\\s*\\(\\s*("+f+")\\s*\\))",j="(?:(rotate)\\s*\\(\\s*("+f+")(?:"+g+"("+f+")"+g+"("+f+"))?\\s*\\))",k="(?:(scale)\\s*\\(\\s*("+f+")(?:"+g+"("+f+"))?\\s*\\))",l="(?:(translate)\\s*\\(\\s*("+f+")(?:"+g+"("+f+"))?\\s*\\))",m="(?:(matrix)\\s*\\(\\s*("+f+")"+g+"("+f+")"+g+"("+f+")"+g+"("+f+")"+g+"("+f+")"+g+"("+f+")\\s*\\))",n="(?:"+m+"|"+l+"|"+k+"|"+j+"|"+h+"|"+i+")",o="(?:"+n+"(?:"+g+"*"+n+")*)",q="^\\s*(?:"+o+"?)\\s*$",r=new RegExp(q),s=new RegExp(n,"g");return function(f){var g=e.concat(),h=[];if(!f||f&&!r.test(f))return g;f.replace(s,function(f){var i=new RegExp(n).exec(f).filter(function(a){return!!a}),j=i[1],k=i.slice(2).map(parseFloat);switch(j){case"translate":d(g,k);break;case"rotate":k[0]=p.util.degreesToRadians(k[0]),a(g,k);break;case"scale":b(g,k);break;case"skewX":c(g,k,2);break;case"skewY":c(g,k,1);break;case"matrix":g=k}h.push(g.concat()),g=e.concat()});for(var i=h[0];h.length>1;)h.shift(),i=p.util.multiplyTransformMatrices(i,h[0]);return i}}();var B=new RegExp("^\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*$");p.parseSVGDocument=function(a,b,c){if(a){m(a);var d=p.Object.__uid++,e=n(a),f=p.util.toArray(a.getElementsByTagName("*"));if(e.svgUid=d,0===f.length&&p.isLikelyNode){f=a.selectNodes('//*[name(.)!="svg"]');for(var g=[],h=0,i=f.length;h<i;h++)g[h]=f[h];f=g}var j=f.filter(function(a){return n(a),v.test(a.nodeName.replace("svg:",""))&&!o(a,x)});if(!j||j&&!j.length)return void(b&&b([],{}));p.gradientDefs[d]=p.getGradientDefs(a),p.cssRules[d]=p.getCSSRules(a),p.parseElements(j,function(a){b&&b(a,e)},r(e),c)}};var C=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+p.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+p.reNum+"))?\\s+(.*)");q(p,{parseFontDeclaration:function(a,b){var c=a.match(C);if(c){var d=c[1],e=c[3],f=c[4],g=c[5],h=c[6];d&&(b.fontStyle=d),e&&(b.fontWeight=isNaN(parseFloat(e))?e:parseFloat(e)),f&&(b.fontSize=t(f)),h&&(b.fontFamily=h),g&&(b.lineHeight="normal"===g?1:g)}},getGradientDefs:function(a){var b,c,d,f=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],g=e(a,f),h=0,i={},j={};for(h=g.length;h--;)b=g[h],d=b.getAttribute("xlink:href"),c=b.getAttribute("id"),d&&(j[c]=d.substr(1)),i[c]=b;for(c in j){var k=i[j[c]].cloneNode(!0);for(b=i[c];k.firstChild;)b.appendChild(k.firstChild)}return i},parseAttributes:function(a,e,f){if(a){var g,i,j={};void 0===f&&(f=a.getAttribute("svgUid")),a.parentNode&&y.test(a.parentNode.nodeName)&&(j=p.parseAttributes(a.parentNode,e,f)),i=j&&j.fontSize||a.getAttribute("font-size")||p.Text.DEFAULT_SVG_FONT_SIZE;var k=e.reduce(function(d,e){return g=a.getAttribute(e),g&&(e=b(e),g=c(e,g,j,i),d[e]=g),d},{});return k=q(k,q(h(a,f),p.parseStyleAttribute(a))),k.font&&p.parseFontDeclaration(k.font,k),d(q(j,k))}},parseElements:function(a,b,c,d){new p.ElementsParser(a,b,c,d).parse()},parseStyleAttribute:function(a){var b={},c=a.getAttribute("style");return c?("string"==typeof c?f(c,b):g(c,b),b):b},parsePointsAttribute:function(a){if(!a)return null;a=a.replace(/,/g," ").trim(),a=a.split(/\s+/);var b,c,d=[];for(b=0,c=a.length;b<c;b+=2)d.push({x:parseFloat(a[b]),y:parseFloat(a[b+1])});return d},getCSSRules:function(a){for(var d,e=a.getElementsByTagName("style"),f={},g=0,h=e.length;g<h;g++){var i=e[g].textContent||e[g].text;i=i.replace(/\/\*[\s\S]*?\*\//g,""),""!==i.trim()&&(d=i.match(/[^{]*\{[\s\S]*?\}/g),d=d.map(function(a){return a.trim()}),d.forEach(function(a){for(var d=a.match(/([\s\S]*?)\s*\{([^}]*)\}/),e={},g=d[2].trim(),h=g.replace(/;$/,"").split(/\s*;\s*/),i=0,j=h.length;i<j;i++){var k=h[i].split(/\s*:\s*/),l=b(k[0]),m=c(l,k[1],k[0]);e[l]=m}a=d[1],a.split(",").forEach(function(a){""!==(a=a.replace(/^svg/i,"").trim())&&(f[a]?p.util.object.extend(f[a],e):f[a]=p.util.object.clone(e))})}))}return f},loadSVGFromURL:function(a,b,c){function d(a){var d=a.responseXML;d&&!d.documentElement&&p.window.ActiveXObject&&a.responseText&&(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(a.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),d&&d.documentElement||b&&b(null),p.parseSVGDocument(d.documentElement,function(a,c){b&&b(a,c)},c)}a=a.replace(/^\n\s*/,"").trim(),new p.util.request(a,{method:"get",onComplete:d})},loadSVGFromString:function(a,b,c){a=a.trim();var d;if("undefined"!=typeof DOMParser){var e=new DOMParser;e&&e.parseFromString&&(d=e.parseFromString(a,"text/xml"))}else p.window.ActiveXObject&&(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(a.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));p.parseSVGDocument(d.documentElement,function(a,c){b(a,c)},c)}})}("undefined"!=typeof exports?exports:this),fabric.ElementsParser=function(a,b,c,d){this.elements=a,this.callback=b,this.options=c,this.reviver=d,this.svgUid=c&&c.svgUid||0},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var a=0,b=this.elements.length;a<b;a++)this.elements[a].setAttribute("svgUid",this.svgUid),function(a,b){setTimeout(function(){a.createObject(a.elements[b],b)},0)}(this,a)},fabric.ElementsParser.prototype.createObject=function(a,b){var c=fabric[fabric.util.string.capitalize(a.tagName.replace("svg:",""))];if(c&&c.fromElement)try{this._createObject(c,a,b)}catch(a){fabric.log(a)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(a,b,c){if(a.async)a.fromElement(b,this.createCallback(c,b),this.options);else{var d=a.fromElement(b,this.options);this.resolveGradient(d,"fill"),this.resolveGradient(d,"stroke"),this.reviver&&this.reviver(b,d),this.instances[c]=d,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(a,b){var c=this;return function(d){c.resolveGradient(d,"fill"),c.resolveGradient(d,"stroke"),c.reviver&&c.reviver(b,d),c.instances[a]=d,c.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(a,b){var c=a.get(b);if(/^url\(/.test(c)){var d=c.slice(5,c.length-1);fabric.gradientDefs[this.svgUid][d]&&a.set(b,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][d],a))}},fabric.ElementsParser.prototype.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(a){return null!=a}),this.callback(this.instances))},function(a){"use strict";function b(a,b){this.x=a,this.y=b}var c=a.fabric||(a.fabric={});c.Point?c.warn("fabric.Point is already defined"):(c.Point=b,b.prototype={type:"point",constructor:b,add:function(a){return new b(this.x+a.x,this.y+a.y)},addEquals:function(a){return this.x+=a.x,this.y+=a.y,this},scalarAdd:function(a){return new b(this.x+a,this.y+a)},scalarAddEquals:function(a){return this.x+=a,this.y+=a,this},subtract:function(a){return new b(this.x-a.x,this.y-a.y)},subtractEquals:function(a){return this.x-=a.x,this.y-=a.y,this},scalarSubtract:function(a){return new b(this.x-a,this.y-a)},scalarSubtractEquals:function(a){return this.x-=a,this.y-=a,this},multiply:function(a){return new b(this.x*a,this.y*a)},multiplyEquals:function(a){return this.x*=a,this.y*=a,this},divide:function(a){return new b(this.x/a,this.y/a)},divideEquals:function(a){return this.x/=a,this.y/=a,this},eq:function(a){return this.x===a.x&&this.y===a.y},lt:function(a){return this.x<a.x&&this.y<a.y},lte:function(a){return this.x<=a.x&&this.y<=a.y},gt:function(a){return this.x>a.x&&this.y>a.y},gte:function(a){return this.x>=a.x&&this.y>=a.y},lerp:function(a,c){return void 0===c&&(c=.5),c=Math.max(Math.min(1,c),0),new b(this.x+(a.x-this.x)*c,this.y+(a.y-this.y)*c)},distanceFrom:function(a){var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)},midPointFrom:function(a){return this.lerp(a)},min:function(a){return new b(Math.min(this.x,a.x),Math.min(this.y,a.y))},max:function(a){return new b(Math.max(this.x,a.x),Math.max(this.y,a.y))},toString:function(){return this.x+","+this.y},setXY:function(a,b){return this.x=a,this.y=b,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setFromPoint:function(a){return this.x=a.x,this.y=a.y,this},swap:function(a){var b=this.x,c=this.y;this.x=a.x,this.y=a.y,a.x=b,a.y=c},clone:function(){return new b(this.x,this.y)}})}("undefined"!=typeof exports?exports:this),function(a){"use strict";function b(a){this.status=a,this.points=[]}var c=a.fabric||(a.fabric={});c.Intersection?c.warn("fabric.Intersection is already defined"):(c.Intersection=b,c.Intersection.prototype={constructor:b,appendPoint:function(a){return this.points.push(a),this},appendPoints:function(a){return this.points=this.points.concat(a),this}},c.Intersection.intersectLineLine=function(a,d,e,f){var g,h=(f.x-e.x)*(a.y-e.y)-(f.y-e.y)*(a.x-e.x),i=(d.x-a.x)*(a.y-e.y)-(d.y-a.y)*(a.x-e.x),j=(f.y-e.y)*(d.x-a.x)-(f.x-e.x)*(d.y-a.y);if(0!==j){var k=h/j,l=i/j;0<=k&&k<=1&&0<=l&&l<=1?(g=new b("Intersection"),g.appendPoint(new c.Point(a.x+k*(d.x-a.x),a.y+k*(d.y-a.y)))):g=new b}else g=new b(0===h||0===i?"Coincident":"Parallel");return g},c.Intersection.intersectLinePolygon=function(a,c,d){for(var e,f,g,h=new b,i=d.length,j=0;j<i;j++)e=d[j],f=d[(j+1)%i],g=b.intersectLineLine(a,c,e,f),h.appendPoints(g.points);return h.points.length>0&&(h.status="Intersection"),h},c.Intersection.intersectPolygonPolygon=function(a,c){for(var d=new b,e=a.length,f=0;f<e;f++){var g=a[f],h=a[(f+1)%e],i=b.intersectLinePolygon(g,h,c);d.appendPoints(i.points)}return d.points.length>0&&(d.status="Intersection"),d},c.Intersection.intersectPolygonRectangle=function(a,d,e){var f=d.min(e),g=d.max(e),h=new c.Point(g.x,f.y),i=new c.Point(f.x,g.y),j=b.intersectLinePolygon(f,h,a),k=b.intersectLinePolygon(h,g,a),l=b.intersectLinePolygon(g,i,a),m=b.intersectLinePolygon(i,f,a),n=new b;return n.appendPoints(j.points),n.appendPoints(k.points),n.appendPoints(l.points),n.appendPoints(m.points),n.points.length>0&&(n.status="Intersection"),n})}("undefined"!=typeof exports?exports:this),function(a){"use strict";function b(a){a?this._tryParsingColor(a):this.setSource([0,0,0,1])}function c(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var d=a.fabric||(a.fabric={});d.Color?d.warn("fabric.Color is already defined."):(d.Color=b,d.Color.prototype={_tryParsingColor:function(a){var c;a in b.colorNameMap&&(a=b.colorNameMap[a]),"transparent"===a&&(c=[255,255,255,0]),c||(c=b.sourceFromHex(a)),c||(c=b.sourceFromRgb(a)),c||(c=b.sourceFromHsl(a)),c||(c=[0,0,0,1]),c&&this.setSource(c)},_rgbToHsl:function(a,b,c){a/=255,b/=255,c/=255;var e,f,g,h=d.util.array.max([a,b,c]),i=d.util.array.min([a,b,c]);if(g=(h+i)/2,h===i)e=f=0;else{var j=h-i;switch(f=g>.5?j/(2-h-i):j/(h+i),h){case a:e=(b-c)/j+(b<c?6:0);break;case b:e=(c-a)/j+2;break;case c:e=(a-b)/j+4}e/=6}return[Math.round(360*e),Math.round(100*f),Math.round(100*g)]},getSource:function(){return this._source},setSource:function(a){this._source=a},toRgb:function(){var a=this.getSource();return"rgb("+a[0]+","+a[1]+","+a[2]+")"},toRgba:function(){var a=this.getSource();return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},toHsl:function(){var a=this.getSource(),b=this._rgbToHsl(a[0],a[1],a[2]);return"hsl("+b[0]+","+b[1]+"%,"+b[2]+"%)"},toHsla:function(){var a=this.getSource(),b=this._rgbToHsl(a[0],a[1],a[2]);return"hsla("+b[0]+","+b[1]+"%,"+b[2]+"%,"+a[3]+")"},toHex:function(){var a,b,c,d=this.getSource();return a=d[0].toString(16),a=1===a.length?"0"+a:a,b=d[1].toString(16),b=1===b.length?"0"+b:b,c=d[2].toString(16),c=1===c.length?"0"+c:c,a.toUpperCase()+b.toUpperCase()+c.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(a){var b=this.getSource();return b[3]=a,this.setSource(b),this},toGrayscale:function(){var a=this.getSource(),b=parseInt((.3*a[0]+.59*a[1]+.11*a[2]).toFixed(0),10),c=a[3];return this.setSource([b,b,b,c]),this},toBlackWhite:function(a){var b=this.getSource(),c=(.3*b[0]+.59*b[1]+.11*b[2]).toFixed(0),d=b[3];return a=a||127,c=Number(c)<Number(a)?0:255,this.setSource([c,c,c,d]),this},overlayWith:function(a){a instanceof b||(a=new b(a));for(var c=[],d=this.getAlpha(),e=this.getSource(),f=a.getSource(),g=0;g<3;g++)c.push(Math.round(.5*e[g]+.5*f[g]));return c[3]=d,this.setSource(c),this}},d.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,d.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,d.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,d.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",grey:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},d.Color.fromRgb=function(a){return b.fromSource(b.sourceFromRgb(a))},d.Color.sourceFromRgb=function(a){var c=a.match(b.reRGBa);if(c){var d=parseInt(c[1],10)/(/%$/.test(c[1])?100:1)*(/%$/.test(c[1])?255:1),e=parseInt(c[2],10)/(/%$/.test(c[2])?100:1)*(/%$/.test(c[2])?255:1),f=parseInt(c[3],10)/(/%$/.test(c[3])?100:1)*(/%$/.test(c[3])?255:1);return[parseInt(d,10),parseInt(e,10),parseInt(f,10),c[4]?parseFloat(c[4]):1]}},d.Color.fromRgba=b.fromRgb,d.Color.fromHsl=function(a){return b.fromSource(b.sourceFromHsl(a))},d.Color.sourceFromHsl=function(a){var d=a.match(b.reHSLa);if(d){var e,f,g,h=(parseFloat(d[1])%360+360)%360/360,i=parseFloat(d[2])/(/%$/.test(d[2])?100:1),j=parseFloat(d[3])/(/%$/.test(d[3])?100:1);if(0===i)e=f=g=j;else{var k=j<=.5?j*(i+1):j+i-j*i,l=2*j-k;e=c(l,k,h+1/3),f=c(l,k,h),g=c(l,k,h-1/3)}return[Math.round(255*e),Math.round(255*f),Math.round(255*g),d[4]?parseFloat(d[4]):1]}},d.Color.fromHsla=b.fromHsl,d.Color.fromHex=function(a){return b.fromSource(b.sourceFromHex(a))},d.Color.sourceFromHex=function(a){if(a.match(b.reHex)){var c=a.slice(a.indexOf("#")+1),d=3===c.length||4===c.length,e=8===c.length||4===c.length,f=d?c.charAt(0)+c.charAt(0):c.substring(0,2),g=d?c.charAt(1)+c.charAt(1):c.substring(2,4),h=d?c.charAt(2)+c.charAt(2):c.substring(4,6),i=e?d?c.charAt(3)+c.charAt(3):c.substring(6,8):"FF";return[parseInt(f,16),parseInt(g,16),parseInt(h,16),parseFloat((parseInt(i,16)/255).toFixed(2))]}},d.Color.fromSource=function(a){var c=new b;return c.setSource(a),c})}("undefined"!=typeof exports?exports:this),function(){function a(a){var b,c,d,e=a.getAttribute("style"),f=a.getAttribute("offset")||0;if(f=parseFloat(f)/(/%$/.test(f)?100:1),f=f<0?0:f>1?1:f,e){var g=e.split(/\s*;\s*/);""===g[g.length-1]&&g.pop();for(var h=g.length;h--;){var i=g[h].split(/\s*:\s*/),j=i[0].trim(),k=i[1].trim();"stop-color"===j?b=k:"stop-opacity"===j&&(d=k)}}return b||(b=a.getAttribute("stop-color")||"rgb(0,0,0)"),d||(d=a.getAttribute("stop-opacity")),b=new fabric.Color(b),c=b.getAlpha(),d=isNaN(parseFloat(d))?1:parseFloat(d),d*=c,{offset:f,color:b.toRgb(),opacity:d}}function b(a){return{x1:a.getAttribute("x1")||0,y1:a.getAttribute("y1")||0,x2:a.getAttribute("x2")||"100%",y2:a.getAttribute("y2")||0}}function c(a){return{x1:a.getAttribute("fx")||a.getAttribute("cx")||"50%",y1:a.getAttribute("fy")||a.getAttribute("cy")||"50%",r1:0,x2:a.getAttribute("cx")||"50%",y2:a.getAttribute("cy")||"50%",r2:a.getAttribute("r")||"50%"}}function d(a,b,c){var d,e=0,f=1,g="";for(var h in b)"Infinity"===b[h]?b[h]=1:"-Infinity"===b[h]&&(b[h]=0),d=parseFloat(b[h],10),f="string"==typeof b[h]&&/^\d+%$/.test(b[h])?.01:1,"x1"===h||"x2"===h||"r2"===h?(f*="objectBoundingBox"===c?a.width:1,e="objectBoundingBox"===c?a.left||0:0):"y1"!==h&&"y2"!==h||(f*="objectBoundingBox"===c?a.height:1,e="objectBoundingBox"===c?a.top||0:0),b[h]=d*f+e;if("ellipse"===a.type&&null!==b.r2&&"objectBoundingBox"===c&&a.rx!==a.ry){var i=a.ry/a.rx;g=" scale(1, "+i+")",b.y1&&(b.y1/=i),b.y2&&(b.y2/=i)}return g}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(a){a||(a={});var b={};this.id=fabric.Object.__uid++,this.type=a.type||"linear",b={x1:a.coords.x1||0,y1:a.coords.y1||0,x2:a.coords.x2||0,y2:a.coords.y2||0},"radial"===this.type&&(b.r1=a.coords.r1||0,b.r2=a.coords.r2||0),this.coords=b,this.colorStops=a.colorStops.slice(),a.gradientTransform&&(this.gradientTransform=a.gradientTransform),this.offsetX=a.offsetX||this.offsetX,this.offsetY=a.offsetY||this.offsetY},addColorStop:function(a){for(var b in a){var c=new fabric.Color(a[b]);this.colorStops.push({offset:b,color:c.toRgb(),opacity:c.getAlpha()})}return this},toObject:function(a){var b={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return fabric.util.populateWithProperties(this,b,a),b},toSVG:function(a){var b,c,d=fabric.util.object.clone(this.coords);if(this.colorStops.sort(function(a,b){return a.offset-b.offset}),!a.group||"path-group"!==a.group.type)for(var e in d)"x1"===e||"x2"===e||"r2"===e?d[e]+=this.offsetX-a.width/2:"y1"!==e&&"y2"!==e||(d[e]+=this.offsetY-a.height/2);c='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(c+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?b=["<linearGradient ",c,' x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,'">\n']:"radial"===this.type&&(b=["<radialGradient ",c,' cx="',d.x2,'" cy="',d.y2,'" r="',d.r2,'" fx="',d.x1,'" fy="',d.y1,'">\n']);for(var f=0;f<this.colorStops.length;f++)b.push("<stop ",'offset="',100*this.colorStops[f].offset+"%",'" style="stop-color:',this.colorStops[f].color,null!==this.colorStops[f].opacity?";stop-opacity: "+this.colorStops[f].opacity:";",'"/>\n');return b.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),b.join("")},toLive:function(a,b){var c,d,e=fabric.util.object.clone(this.coords);if(this.type){if(b.group&&"path-group"===b.group.type)for(d in e)"x1"===d||"x2"===d?e[d]+=-this.offsetX+b.width/2:"y1"!==d&&"y2"!==d||(e[d]+=-this.offsetY+b.height/2);"linear"===this.type?c=a.createLinearGradient(e.x1,e.y1,e.x2,e.y2):"radial"===this.type&&(c=a.createRadialGradient(e.x1,e.y1,e.r1,e.x2,e.y2,e.r2));for(var f=0,g=this.colorStops.length;f<g;f++){var h=this.colorStops[f].color,i=this.colorStops[f].opacity,j=this.colorStops[f].offset;void 0!==i&&(h=new fabric.Color(h).setAlpha(i).toRgba()),c.addColorStop(parseFloat(j),h)}return c}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(e,f){var g,h,i,j=e.getElementsByTagName("stop"),k=e.getAttribute("gradientUnits")||"objectBoundingBox",l=e.getAttribute("gradientTransform"),m=[];g="linearGradient"===e.nodeName||"LINEARGRADIENT"===e.nodeName?"linear":"radial","linear"===g?h=b(e):"radial"===g&&(h=c(e));for(var n=j.length;n--;)m.push(a(j[n]));i=d(f,h,k);var o=new fabric.Gradient({type:g,coords:h,colorStops:m,offsetX:-f.left,offsetY:-f.top});return(l||""!==i)&&(o.gradientTransform=fabric.parseTransformAttribute((l||"")+i)),o},forObject:function(a,b){return b||(b={}),d(a,b.coords,"userSpaceOnUse"),new fabric.Gradient(b)}})}(),function(){"use strict";var a=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(a,b){if(a||(a={}),this.id=fabric.Object.__uid++,this.setOptions(a),!a.source||a.source&&"string"!=typeof a.source)return void(b&&b(this));if(void 0!==fabric.util.getFunctionBody(a.source))this.source=new Function(fabric.util.getFunctionBody(a.source)),b&&b(this);else{var c=this;this.source=fabric.util.createImage(),fabric.util.loadImage(a.source,function(a){c.source=a,b&&b(c)})}},toObject:function(b){var c,d,e=fabric.Object.NUM_FRACTION_DIGITS;return"function"==typeof this.source?c=String(this.source):"string"==typeof this.source.src?c=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(c=this.source.toDataURL()),d={type:"pattern",source:c,repeat:this.repeat,offsetX:a(this.offsetX,e),offsetY:a(this.offsetY,e)},fabric.util.populateWithProperties(this,d,b),d},toSVG:function(a){var b="function"==typeof this.source?this.source():this.source,c=b.width/a.width,d=b.height/a.height,e=this.offsetX/a.width,f=this.offsetY/a.height,g="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(d=1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(c=1),b.src?g=b.src:b.toDataURL&&(g=b.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+e+'" y="'+f+'" width="'+c+'" height="'+d+'">\n<image x="0" y="0" width="'+b.width+'" height="'+b.height+'" xlink:href="'+g+'"></image>\n</pattern>\n'},setOptions:function(a){for(var b in a)this[b]=a[b]},toLive:function(a){var b="function"==typeof this.source?this.source():this.source;if(!b)return"";if(void 0!==b.src){if(!b.complete)return"";if(0===b.naturalWidth||0===b.naturalHeight)return""}return a.createPattern(b,this.repeat)}})}(),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.toFixed;b.Shadow?b.warn("fabric.Shadow is already defined."):(b.Shadow=b.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(a){"string"==typeof a&&(a=this._parseShadow(a));for(var c in a)this[c]=a[c];this.id=b.Object.__uid++},_parseShadow:function(a){var c=a.trim(),d=b.Shadow.reOffsetsAndBlur.exec(c)||[];return{color:(c.replace(b.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(d[1],10)||0,offsetY:parseInt(d[2],10)||0,blur:parseInt(d[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(a){var d=40,e=40,f=b.Object.NUM_FRACTION_DIGITS,g=b.util.rotateVector({x:this.offsetX,y:this.offsetY},b.util.degreesToRadians(-a.angle));return a.width&&a.height&&(d=100*c((Math.abs(g.x)+this.blur)/a.width,f)+20,e=100*c((Math.abs(g.y)+this.blur)/a.height,f)+20),a.flipX&&(g.x*=-1),a.flipY&&(g.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+e+'%" height="'+(100+2*e)+'%" x="-'+d+'%" width="'+(100+2*d)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+c(this.blur?this.blur/2:0,f)+'"></feGaussianBlur>\n\t<feOffset dx="'+c(g.x,f)+'" dy="'+c(g.y,f)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+this.color+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke};var a={},c=b.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke"].forEach(function(b){this[b]!==c[b]&&(a[b]=this[b])},this),a}}),b.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}("undefined"!=typeof exports?exports:this),function(){"use strict";if(fabric.StaticCanvas)return void fabric.warn("fabric.StaticCanvas is already defined.");var a=fabric.util.object.extend,b=fabric.util.getElementOffset,c=fabric.util.removeFromArray,d=fabric.util.toFixed,e=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(a,b){b||(b={}),this._initStatic(a,b)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:[1,0,0,1,0,0],backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,_initStatic:function(a,b){var c=fabric.StaticCanvas.prototype.renderAll.bind(this);this._objects=[],this._createLowerCanvas(a),this._initOptions(b),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),b.overlayImage&&this.setOverlayImage(b.overlayImage,c),b.backgroundImage&&this.setBackgroundImage(b.backgroundImage,c),b.backgroundColor&&this.setBackgroundColor(b.backgroundColor,c),b.overlayColor&&this.setOverlayColor(b.overlayColor,c),this.calcOffset()},_isRetinaScaling:function(){return 1!==fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?fabric.devicePixelRatio:1},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio))},calcOffset:function(){return this._offset=b(this.lowerCanvasEl),this},setOverlayImage:function(a,b,c){return this.__setBgOverlayImage("overlayImage",a,b,c)},setBackgroundImage:function(a,b,c){return this.__setBgOverlayImage("backgroundImage",a,b,c)},setOverlayColor:function(a,b){return this.__setBgOverlayColor("overlayColor",a,b)},setBackgroundColor:function(a,b){return this.__setBgOverlayColor("backgroundColor",a,b)},_setImageSmoothing:function(){var a=this.getContext();a.imageSmoothingEnabled=a.imageSmoothingEnabled||a.webkitImageSmoothingEnabled||a.mozImageSmoothingEnabled||a.msImageSmoothingEnabled||a.oImageSmoothingEnabled,a.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(a,b,c,d){return"string"==typeof b?fabric.util.loadImage(b,function(b){b&&(this[a]=new fabric.Image(b,d)),c&&c(b)},this,d&&d.crossOrigin):(d&&b.setOptions(d),this[a]=b,c&&c(b)),this},__setBgOverlayColor:function(a,b,c){return this[a]=b,this._initGradient(b,a),this._initPattern(b,a,c),this},_createCanvasElement:function(a){var b=fabric.util.createCanvasElement(a);if(b.style||(b.style={}),!b)throw e;if(void 0===b.getContext)throw e;return b},_initOptions:function(a){this._setOptions(a),this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(a){this.lowerCanvasEl=fabric.util.getById(a)||this._createCanvasElement(a),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(a,b){return this.setDimensions({width:a},b)},setHeight:function(a,b){return this.setDimensions({height:a},b)},setDimensions:function(a,b){var c;b=b||{};for(var d in a)c=a[d],b.cssOnly||(this._setBackstoreDimension(d,a[d]),c+="px"),b.backstoreOnly||this._setCssDimension(d,c);return this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),b.cssOnly||this.renderAll(),this},_setBackstoreDimension:function(a,b){return this.lowerCanvasEl[a]=b,this.upperCanvasEl&&(this.upperCanvasEl[a]=b),this.cacheCanvasEl&&(this.cacheCanvasEl[a]=b),this[a]=b,this},
_setCssDimension:function(a,b){return this.lowerCanvasEl.style[a]=b,this.upperCanvasEl&&(this.upperCanvasEl.style[a]=b),this.wrapperEl&&(this.wrapperEl.style[a]=b),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(a){var b,c=this._activeGroup;this.viewportTransform=a;for(var d=0,e=this._objects.length;d<e;d++)b=this._objects[d],b.group||b.setCoords(!1,!0);return c&&c.setCoords(!1,!0),this.renderAll(),this},zoomToPoint:function(a,b){var c=a,d=this.viewportTransform.slice(0);a=fabric.util.transformPoint(a,fabric.util.invertTransform(this.viewportTransform)),d[0]=b,d[3]=b;var e=fabric.util.transformPoint(a,d);return d[4]+=c.x-e.x,d[5]+=c.y-e.y,this.setViewportTransform(d)},setZoom:function(a){return this.zoomToPoint(new fabric.Point(0,0),a),this},absolutePan:function(a){var b=this.viewportTransform.slice(0);return b[4]=-a.x,b[5]=-a.y,this.setViewportTransform(b)},relativePan:function(a){return this.absolutePan(new fabric.Point(-a.x-this.viewportTransform[4],-a.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(a){this.stateful&&a.setupState(),a._set("canvas",this),a.setCoords(),this.fire("object:added",{target:a}),a.fire("added")},_onObjectRemoved:function(a){this.fire("object:removed",{target:a}),a.fire("removed"),delete a.canvas},clearContext:function(a){return a.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("selection:cleared",this._canvasITextSelectionClearedHanlder),this.off("object:selected",this._canvasITextSelectionClearedHanlder),this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(){var a=this.contextContainer;return this.renderCanvas(a,this._objects),this},renderCanvas:function(a,b){this.clearContext(a),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,a),this._renderBackground(a),a.save(),a.transform.apply(a,this.viewportTransform),this._renderObjects(a,b),a.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(a),this.clipTo&&a.restore(),this._renderOverlay(a),this.controlsAboveOverlay&&this.interactive&&this.drawControls(a),this.fire("after:render")},_renderObjects:function(a,b){for(var c=0,d=b.length;c<d;++c)b[c]&&b[c].render(a)},_renderBackgroundOrOverlay:function(a,b){var c=this[b+"Color"];c&&(a.fillStyle=c.toLive?c.toLive(a,this):c,a.fillRect(c.offsetX||0,c.offsetY||0,this.width,this.height)),(c=this[b+"Image"])&&(this[b+"Vpt"]&&(a.save(),a.transform.apply(a,this.viewportTransform)),c.render(a),this[b+"Vpt"]&&a.restore())},_renderBackground:function(a){this._renderBackgroundOrOverlay(a,"background")},_renderOverlay:function(a){this._renderBackgroundOrOverlay(a,"overlay")},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(a){return this._centerObject(a,new fabric.Point(this.getCenter().left,a.getCenterPoint().y))},centerObjectV:function(a){return this._centerObject(a,new fabric.Point(a.getCenterPoint().x,this.getCenter().top))},centerObject:function(a){var b=this.getCenter();return this._centerObject(a,new fabric.Point(b.left,b.top))},viewportCenterObject:function(a){var b=this.getVpCenter();return this._centerObject(a,b)},viewportCenterObjectH:function(a){var b=this.getVpCenter();return this._centerObject(a,new fabric.Point(b.x,a.getCenterPoint().y)),this},viewportCenterObjectV:function(a){var b=this.getVpCenter();return this._centerObject(a,new fabric.Point(a.getCenterPoint().x,b.y))},getVpCenter:function(){var a=this.getCenter(),b=fabric.util.invertTransform(this.viewportTransform);return fabric.util.transformPoint({x:a.left,y:a.top},b)},_centerObject:function(a,b){return a.setPositionByOrigin(b,"center","center"),this.renderAll(),this},toDatalessJSON:function(a){return this.toDatalessObject(a)},toObject:function(a){return this._toObjectMethod("toObject",a)},toDatalessObject:function(a){return this._toObjectMethod("toDatalessObject",a)},_toObjectMethod:function(b,c){var d={objects:this._toObjects(b,c)};return a(d,this.__serializeBgOverlay(b,c)),fabric.util.populateWithProperties(this,d,c),d},_toObjects:function(a,b){return this.getObjects().filter(function(a){return!a.excludeFromExport}).map(function(c){return this._toObject(c,a,b)},this)},_toObject:function(a,b,c){var d;this.includeDefaultValues||(d=a.includeDefaultValues,a.includeDefaultValues=!1);var e=a[b](c);return this.includeDefaultValues||(a.includeDefaultValues=d),e},__serializeBgOverlay:function(a,b){var c={};return this.backgroundColor&&(c.background=this.backgroundColor.toObject?this.backgroundColor.toObject(b):this.backgroundColor),this.overlayColor&&(c.overlay=this.overlayColor.toObject?this.overlayColor.toObject(b):this.overlayColor),this.backgroundImage&&(c.backgroundImage=this._toObject(this.backgroundImage,a,b)),this.overlayImage&&(c.overlayImage=this._toObject(this.overlayImage,a,b)),c},svgViewportTransformation:!0,toSVG:function(a,b){a||(a={});var c=[];return this._setSVGPreamble(c,a),this._setSVGHeader(c,a),this._setSVGBgOverlayColor(c,"backgroundColor"),this._setSVGBgOverlayImage(c,"backgroundImage",b),this._setSVGObjects(c,b),this._setSVGBgOverlayColor(c,"overlayColor"),this._setSVGBgOverlayImage(c,"overlayImage",b),c.push("</svg>"),c.join("")},_setSVGPreamble:function(a,b){b.suppressPreamble||a.push('<?xml version="1.0" encoding="',b.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(a,b){var c,e=b.width||this.width,f=b.height||this.height,g='viewBox="0 0 '+this.width+" "+this.height+'" ',h=fabric.Object.NUM_FRACTION_DIGITS;b.viewBox?g='viewBox="'+b.viewBox.x+" "+b.viewBox.y+" "+b.viewBox.width+" "+b.viewBox.height+'" ':this.svgViewportTransformation&&(c=this.viewportTransform,g='viewBox="'+d(-c[4]/c[0],h)+" "+d(-c[5]/c[3],h)+" "+d(this.width/c[0],h)+" "+d(this.height/c[3],h)+'" '),a.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',e,'" ','height="',f,'" ',g,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),"</defs>\n")},createSVGRefElementsMarkup:function(){var a=this;return["backgroundColor","overlayColor"].map(function(b){var c=a[b];if(c&&c.toLive)return c.toSVG(a,!1)}).join("")},createSVGFontFacesMarkup:function(){for(var a,b,c,d,e,f,g,h="",i={},j=fabric.fontPaths,k=this.getObjects(),l=0,m=k.length;l<m;l++)if(a=k[l],b=a.fontFamily,-1!==a.type.indexOf("text")&&!i[b]&&j[b]&&(i[b]=!0,a.styles)){c=a.styles;for(e in c){d=c[e];for(g in d)f=d[g],b=f.fontFamily,!i[b]&&j[b]&&(i[b]=!0)}}for(var n in i)h+=["\t\t@font-face {\n","\t\t\tfont-family: '",n,"';\n","\t\t\tsrc: url('",j[n],"');\n","\t\t}\n"].join("");return h&&(h=['\t<style type="text/css">',"<![CDATA[\n",h,"]]>","</style>\n"].join("")),h},_setSVGObjects:function(a,b){for(var c,d=0,e=this.getObjects(),f=e.length;d<f;d++)c=e[d],c.excludeFromExport||this._setSVGObject(a,c,b)},_setSVGObject:function(a,b,c){a.push(b.toSVG(c))},_setSVGBgOverlayImage:function(a,b,c){this[b]&&this[b].toSVG&&a.push(this[b].toSVG(c))},_setSVGBgOverlayColor:function(a,b){var c=this[b];if(c)if(c.toLive){var d=c.repeat;a.push('<rect transform="translate(',this.width/2,",",this.height/2,')"',' x="',c.offsetX-this.width/2,'" y="',c.offsetY-this.height/2,'" ','width="',"repeat-y"===d||"no-repeat"===d?c.source.width:this.width,'" height="',"repeat-x"===d||"no-repeat"===d?c.source.height:this.height,'" fill="url(#SVGID_'+c.id+')"',"></rect>\n")}else a.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[b],'"',"></rect>\n")},sendToBack:function(a){if(!a)return this;var b,d,e,f=this._activeGroup;if(a===f)for(e=f._objects,b=e.length;b--;)d=e[b],c(this._objects,d),this._objects.unshift(d);else c(this._objects,a),this._objects.unshift(a);return this.renderAll&&this.renderAll()},bringToFront:function(a){if(!a)return this;var b,d,e,f=this._activeGroup;if(a===f)for(e=f._objects,b=0;b<e.length;b++)d=e[b],c(this._objects,d),this._objects.push(d);else c(this._objects,a),this._objects.push(a);return this.renderAll&&this.renderAll()},sendBackwards:function(a,b){if(!a)return this;var d,e,f,g,h,i=this._activeGroup;if(a===i)for(h=i._objects,d=0;d<h.length;d++)e=h[d],0!==(f=this._objects.indexOf(e))&&(g=f-1,c(this._objects,e),this._objects.splice(g,0,e));else 0!==(f=this._objects.indexOf(a))&&(g=this._findNewLowerIndex(a,f,b),c(this._objects,a),this._objects.splice(g,0,a));return this.renderAll&&this.renderAll(),this},_findNewLowerIndex:function(a,b,c){var d;if(c){d=b;for(var e=b-1;e>=0;--e){if(a.intersectsWithObject(this._objects[e])||a.isContainedWithinObject(this._objects[e])||this._objects[e].isContainedWithinObject(a)){d=e;break}}}else d=b-1;return d},bringForward:function(a,b){if(!a)return this;var d,e,f,g,h,i=this._activeGroup;if(a===i)for(h=i._objects,d=h.length;d--;)e=h[d],(f=this._objects.indexOf(e))!==this._objects.length-1&&(g=f+1,c(this._objects,e),this._objects.splice(g,0,e));else(f=this._objects.indexOf(a))!==this._objects.length-1&&(g=this._findNewUpperIndex(a,f,b),c(this._objects,a),this._objects.splice(g,0,a));return this.renderAll&&this.renderAll(),this},_findNewUpperIndex:function(a,b,c){var d;if(c){d=b;for(var e=b+1;e<this._objects.length;++e){if(a.intersectsWithObject(this._objects[e])||a.isContainedWithinObject(this._objects[e])||this._objects[e].isContainedWithinObject(a)){d=e;break}}}else d=b+1;return d},moveTo:function(a,b){return c(this._objects,a),this._objects.splice(b,0,a),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),a(fabric.StaticCanvas.prototype,fabric.Observable),a(fabric.StaticCanvas.prototype,fabric.Collection),a(fabric.StaticCanvas.prototype,fabric.DataURLExporter),a(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(a){var b=fabric.util.createCanvasElement();if(!b||!b.getContext)return null;var c=b.getContext("2d");if(!c)return null;switch(a){case"getImageData":return void 0!==c.getImageData;case"setLineDash":return void 0!==c.setLineDash;case"toDataURL":return void 0!==b.toDataURL;case"toDataURLWithQuality":try{return b.toDataURL("image/jpeg",0),!0}catch(a){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(a){return this.shadow=new fabric.Shadow(a),this},_setBrushStyles:function(){var a=this.canvas.contextTop;a.strokeStyle=this.color,a.lineWidth=this.width,a.lineCap=this.strokeLineCap,a.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&a.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var a=this.canvas.contextTop,b=this.canvas.getZoom();a.shadowColor=this.shadow.color,a.shadowBlur=this.shadow.blur*b,a.shadowOffsetX=this.shadow.offsetX*b,a.shadowOffsetY=this.shadow.offsetY*b}},_resetShadow:function(){var a=this.canvas.contextTop;a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0}}),function(){fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(a){this.canvas=a,this._points=[]},onMouseDown:function(a){this._prepareForDrawing(a),this._captureDrawingPath(a),this._render()},onMouseMove:function(a){this._captureDrawingPath(a),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(a){var b=new fabric.Point(a.x,a.y);this._reset(),this._addPoint(b),this.canvas.contextTop.moveTo(b.x,b.y)},_addPoint:function(a){this._points.push(a)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(a){var b=new fabric.Point(a.x,a.y);this._addPoint(b)},_render:function(){var a=this.canvas.contextTop,b=this.canvas.viewportTransform,c=this._points[0],d=this._points[1];a.save(),a.transform(b[0],b[1],b[2],b[3],b[4],b[5]),a.beginPath(),2===this._points.length&&c.x===d.x&&c.y===d.y&&(c.x-=.5,d.x+=.5),a.moveTo(c.x,c.y);for(var e=1,f=this._points.length;e<f;e++){var g=c.midPointFrom(d);a.quadraticCurveTo(c.x,c.y,g.x,g.y),c=this._points[e],d=this._points[e+1]}a.lineTo(c.x,c.y),a.stroke(),a.restore()},convertPointsToSVGPath:function(a){var b=[],c=new fabric.Point(a[0].x,a[0].y),d=new fabric.Point(a[1].x,a[1].y);b.push("M ",a[0].x," ",a[0].y," ");for(var e=1,f=a.length;e<f;e++){var g=c.midPointFrom(d);b.push("Q ",c.x," ",c.y," ",g.x," ",g.y," "),c=new fabric.Point(a[e].x,a[e].y),e+1<a.length&&(d=new fabric.Point(a[e+1].x,a[e+1].y))}return b.push("L ",c.x," ",c.y," "),b},createPath:function(a){var b=new fabric.Path(a,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"});return this.shadow&&(this.shadow.affectStroke=!0,b.setShadow(this.shadow)),b},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var a=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"===a)return void this.canvas.renderAll();var b=this.createPath(a);this.canvas.add(b),b.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:b})}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(a){this.canvas=a,this.points=[]},drawDot:function(a){var b=this.addPoint(a),c=this.canvas.contextTop,d=this.canvas.viewportTransform;c.save(),c.transform(d[0],d[1],d[2],d[3],d[4],d[5]),c.fillStyle=b.fill,c.beginPath(),c.arc(b.x,b.y,b.radius,0,2*Math.PI,!1),c.closePath(),c.fill(),c.restore()},onMouseDown:function(a){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(a)},onMouseMove:function(a){this.drawDot(a)},onMouseUp:function(){var a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var b=[],c=0,d=this.points.length;c<d;c++){var e=this.points[c],f=new fabric.Circle({radius:e.radius,left:e.x,top:e.y,originX:"center",originY:"center",fill:e.fill});this.shadow&&f.setShadow(this.shadow),b.push(f)}var g=new fabric.Group(b,{originX:"center",originY:"center"});g.canvas=this.canvas,this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.renderAll()},addPoint:function(a){var b=new fabric.Point(a.x,a.y),c=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,d=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return b.radius=c,b.fill=d,this.points.push(b),b}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(a){this.canvas=a,this.sprayChunks=[]},onMouseDown:function(a){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(a),this.render()},onMouseMove:function(a){this.addSprayChunk(a),this.render()},onMouseUp:function(){var a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var b=[],c=0,d=this.sprayChunks.length;c<d;c++)for(var e=this.sprayChunks[c],f=0,g=e.length;f<g;f++){var h=new fabric.Rect({width:e[f].width,height:e[f].width,left:e[f].x+1,top:e[f].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&h.setShadow(this.shadow),b.push(h)}this.optimizeOverlapping&&(b=this._getOptimizedRects(b));var i=new fabric.Group(b,{originX:"center",originY:"center"});i.canvas=this.canvas,this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.renderAll()},_getOptimizedRects:function(a){for(var b,c={},d=0,e=a.length;d<e;d++)b=a[d].left+""+a[d].top,c[b]||(c[b]=a[d]);var f=[];for(b in c)f.push(c[b]);return f},render:function(){var a=this.canvas.contextTop;a.fillStyle=this.color;var b=this.canvas.viewportTransform;a.save(),a.transform(b[0],b[1],b[2],b[3],b[4],b[5]);for(var c=0,d=this.sprayChunkPoints.length;c<d;c++){var e=this.sprayChunkPoints[c];void 0!==e.opacity&&(a.globalAlpha=e.opacity),a.fillRect(e.x,e.y,e.width,e.width)}a.restore()},addSprayChunk:function(a){this.sprayChunkPoints=[];for(var b,c,d,e=this.width/2,f=0;f<this.density;f++){b=fabric.util.getRandomInt(a.x-e,a.x+e),c=fabric.util.getRandomInt(a.y-e,a.y+e),d=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var g=new fabric.Point(b,c);g.width=d,this.randomOpacity&&(g.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(g)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var a=fabric.document.createElement("canvas"),b=a.getContext("2d");return a.width=a.height=25,b.fillStyle=this.color,b.beginPath(),b.arc(10,10,10,0,2*Math.PI,!1),b.closePath(),b.fill(),a},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(a){var b=this.callSuper("createPath",a),c=b._getLeftTopCoords().scalarAdd(b.strokeWidth/2);return b.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),b}}),function(){var a=fabric.util.getPointer,b=fabric.util.degreesToRadians,c=fabric.util.radiansToDegrees,d=Math.atan2,e=Math.abs,f=fabric.StaticCanvas.supports("setLineDash");fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(a,b){b||(b={}),this._initStatic(a,b),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var a,b=this.getActiveGroup(),c=this.getActiveObject(),d=[],e=[];if(!b&&!c||this.preserveObjectStacking)d=this._objects;else{for(var f=0,g=this._objects.length;f<g;f++)a=this._objects[f],b&&b.contains(a)||a===c?e.push(a):d.push(a);b&&(b._set("_objects",e),d.push(b)),c&&d.push(c)}return d},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1);var a=this.contextContainer;return this.renderCanvas(a,this._chooseObjectsToRender()),this},renderTop:function(){var a=this.contextTop;return this.clearContext(a),this.selection&&this._groupSelector&&this._drawSelection(a),this.fire("after:render"),this.contextTopDirty=!0,this},_resetCurrentTransform:function(){var a=this._currentTransform;a.target.set({scaleX:a.original.scaleX,scaleY:a.original.scaleY,skewX:a.original.skewX,skewY:a.original.skewY,left:a.original.left,top:a.original.top}),this._shouldCenterTransform(a.target)?"rotate"===a.action?this._setOriginToCenter(a.target):("center"!==a.originX&&("right"===a.originX?a.mouseXSign=-1:a.mouseXSign=1),"center"!==a.originY&&("bottom"===a.originY?a.mouseYSign=-1:a.mouseYSign=1),a.originX="center",a.originY="center"):(a.originX=a.original.originX,a.originY=a.original.originY)},containsPoint:function(a,b,c){var d,e=c||this.getPointer(a,!0);return d=b.group&&b.group===this.getActiveGroup()?this._normalizePointer(b.group,e):{x:e.x,y:e.y},b.containsPoint(d)||b._findTargetCorner(e)},_normalizePointer:function(a,b){var c=a.calcTransformMatrix(),d=fabric.util.invertTransform(c),e=this.restorePointerVpt(b);return fabric.util.transformPoint(e,d)},isTargetTransparent:function(a,b,c){var d=a.hasBorders,e=a.transparentCorners,f=this.contextCache,g=a.selectionBackgroundColor;a.hasBorders=a.transparentCorners=!1,a.selectionBackgroundColor="",f.save(),f.transform.apply(f,this.viewportTransform),a.render(f),f.restore(),a.active&&a._renderControls(f),a.hasBorders=d,a.transparentCorners=e,a.selectionBackgroundColor=g;var h=fabric.util.isTransparent(f,b,c,this.targetFindTolerance);return this.clearContext(f),h},_shouldClearSelection:function(a,b){var c=this.getActiveGroup(),d=this.getActiveObject();return!b||b&&c&&!c.contains(b)&&c!==b&&!a[this.selectionKey]||b&&!b.evented||b&&!b.selectable&&d&&d!==b},_shouldCenterTransform:function(a){if(a){var b,c=this._currentTransform;return"scale"===c.action||"scaleX"===c.action||"scaleY"===c.action?b=this.centeredScaling||a.centeredScaling:"rotate"===c.action&&(b=this.centeredRotation||a.centeredRotation),b?!c.altKey:c.altKey}},_getOriginFromCorner:function(a,b){var c={x:a.originX,y:a.originY};return"ml"===b||"tl"===b||"bl"===b?c.x="right":"mr"!==b&&"tr"!==b&&"br"!==b||(c.x="left"),"tl"===b||"mt"===b||"tr"===b?c.y="bottom":"bl"!==b&&"mb"!==b&&"br"!==b||(c.y="top"),c},_getActionFromCorner:function(a,b,c){if(!b)return"drag";switch(b){case"mtr":return"rotate";case"ml":case"mr":return c[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return c[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(a,c){if(c){var d=this.getPointer(a),e=c._findTargetCorner(this.getPointer(a,!0)),f=this._getActionFromCorner(c,e,a),g=this._getOriginFromCorner(c,e);this._currentTransform={target:c,action:f,corner:e,scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,offsetX:d.x-c.left,offsetY:d.y-c.top,originX:g.x,originY:g.y,ex:d.x,ey:d.y,lastX:d.x,lastY:d.y,left:c.left,top:c.top,theta:b(c.angle),width:c.width*c.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:a.shiftKey,altKey:a[this.centeredKey]},this._currentTransform.original={left:c.left,top:c.top,scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,originX:g.x,originY:g.y},this._resetCurrentTransform()}},_translateObject:function(a,b){var c=this._currentTransform,d=c.target,e=a-c.offsetX,f=b-c.offsetY,g=!d.get("lockMovementX")&&d.left!==e,h=!d.get("lockMovementY")&&d.top!==f;return g&&d.set("left",e),h&&d.set("top",f),g||h},_changeSkewTransformOrigin:function(a,b,c){var d="originX",e={0:"center"},f=b.target.skewX,g="left",h="right",i="mt"===b.corner||"ml"===b.corner?1:-1,j=1;a=a>0?1:-1,"y"===c&&(f=b.target.skewY,g="top",h="bottom",d="originY"),e[-1]=g,e[1]=h,b.target.flipX&&(j*=-1),b.target.flipY&&(j*=-1),0===f?(b.skewSign=-i*a*j,b[d]=e[-a]):(f=f>0?1:-1,b.skewSign=f,b[d]=e[f*i*j])},_skewObject:function(a,b,c){var d=this._currentTransform,e=d.target,f=!1,g=e.get("lockSkewingX"),h=e.get("lockSkewingY");if(g&&"x"===c||h&&"y"===c)return!1;var i,j,k=e.getCenterPoint(),l=e.toLocalPoint(new fabric.Point(a,b),"center","center")[c],m=e.toLocalPoint(new fabric.Point(d.lastX,d.lastY),"center","center")[c],n=e._getTransformedDimensions();return this._changeSkewTransformOrigin(l-m,d,c),i=e.toLocalPoint(new fabric.Point(a,b),d.originX,d.originY)[c],j=e.translateToOriginPoint(k,d.originX,d.originY),f=this._setObjectSkew(i,d,c,n),d.lastX=a,d.lastY=b,e.setPositionByOrigin(j,d.originX,d.originY),f},_setObjectSkew:function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n=b.target,o=!1,p=b.skewSign;return"x"===c?(h="y",i="Y",j="X",l=0,m=n.skewY):(h="x",i="X",j="Y",l=n.skewX,m=0),g=n._getTransformedDimensions(l,m),k=2*Math.abs(a)-g[c],k<=2?e=0:(e=p*Math.atan(k/n["scale"+j]/(g[h]/n["scale"+i])),e=fabric.util.radiansToDegrees(e)),o=n["skew"+j]!==e,n.set("skew"+j,e),0!==n["skew"+i]&&(f=n._getTransformedDimensions(),e=d[h]/f[h]*n["scale"+i],n.set("scale"+i,e)),o},_scaleObject:function(a,b,c){var d=this._currentTransform,e=d.target,f=e.get("lockScalingX"),g=e.get("lockScalingY"),h=e.get("lockScalingFlip");if(f&&g)return!1;var i=e.translateToOriginPoint(e.getCenterPoint(),d.originX,d.originY),j=e.toLocalPoint(new fabric.Point(a,b),d.originX,d.originY),k=e._getTransformedDimensions(),l=!1;return this._setLocalMouse(j,d),l=this._setObjectScale(j,d,f,g,c,h,k),e.setPositionByOrigin(i,d.originX,d.originY),l},_setObjectScale:function(a,b,c,d,e,f,g){var h,i,j,k,l=b.target,m=!1,n=!1,o=!1;return j=a.x*l.scaleX/g.x,k=a.y*l.scaleY/g.y,h=l.scaleX!==j,i=l.scaleY!==k,f&&j<=0&&j<l.scaleX&&(m=!0),f&&k<=0&&k<l.scaleY&&(n=!0),"equally"!==e||c||d?e?"x"!==e||l.get("lockUniScaling")?"y"!==e||l.get("lockUniScaling")||n||d||l.set("scaleY",k)&&(o=o||i):m||c||l.set("scaleX",j)&&(o=o||h):(m||c||l.set("scaleX",j)&&(o=o||h),n||d||l.set("scaleY",k)&&(o=o||i)):m||n||(o=this._scaleObjectEqually(a,l,b,g)),b.newScaleX=j,b.newScaleY=k,m||n||this._flipObject(b,e),o},_scaleObjectEqually:function(a,b,c,d){var e,f=a.y+a.x,g=d.y*c.original.scaleY/b.scaleY+d.x*c.original.scaleX/b.scaleX;return c.newScaleX=c.original.scaleX*f/g,c.newScaleY=c.original.scaleY*f/g,e=c.newScaleX!==b.scaleX||c.newScaleY!==b.scaleY,b.set("scaleX",c.newScaleX),b.set("scaleY",c.newScaleY),e},_flipObject:function(a,b){a.newScaleX<0&&"y"!==b&&("left"===a.originX?a.originX="right":"right"===a.originX&&(a.originX="left")),a.newScaleY<0&&"x"!==b&&("top"===a.originY?a.originY="bottom":"bottom"===a.originY&&(a.originY="top"))},_setLocalMouse:function(a,b){var c=b.target;"right"===b.originX?a.x*=-1:"center"===b.originX&&(a.x*=2*b.mouseXSign,a.x<0&&(b.mouseXSign=-b.mouseXSign)),"bottom"===b.originY?a.y*=-1:"center"===b.originY&&(a.y*=2*b.mouseYSign,a.y<0&&(b.mouseYSign=-b.mouseYSign)),e(a.x)>c.padding?a.x<0?a.x+=c.padding:a.x-=c.padding:a.x=0,e(a.y)>c.padding?a.y<0?a.y+=c.padding:a.y-=c.padding:a.y=0},_rotateObject:function(a,b){var e=this._currentTransform;if(e.target.get("lockRotation"))return!1;var f=d(e.ey-e.top,e.ex-e.left),g=d(b-e.top,a-e.left),h=c(g-f+e.theta),i=!0;if(h<0&&(h=360+h),h%=360,e.target.snapAngle>0){var j=e.target.snapAngle,k=e.target.snapThreshold||j,l=Math.ceil(h/j)*j,m=Math.floor(h/j)*j;Math.abs(h-m)<k?h=m:Math.abs(h-l)<k&&(h=l),e.target.angle===h&&(i=!1)}return e.target.angle=h,i},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_resetObjectTransform:function(a){a.scaleX=1,a.scaleY=1,a.skewX=0,a.skewY=0,a.setAngle(0)},_drawSelection:function(a){var b=this._groupSelector,c=b.left,d=b.top,g=e(c),h=e(d);if(this.selectionColor&&(a.fillStyle=this.selectionColor,a.fillRect(b.ex-(c>0?0:-c),b.ey-(d>0?0:-d),g,h)),this.selectionLineWidth&&this.selectionBorderColor)if(a.lineWidth=this.selectionLineWidth,a.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!f){var i=b.ex+.5-(c>0?0:g),j=b.ey+.5-(d>0?0:h);a.beginPath(),fabric.util.drawDashedLine(a,i,j,i+g,j,this.selectionDashArray),fabric.util.drawDashedLine(a,i,j+h-1,i+g,j+h-1,this.selectionDashArray),fabric.util.drawDashedLine(a,i,j,i,j+h,this.selectionDashArray),fabric.util.drawDashedLine(a,i+g-1,j,i+g-1,j+h,this.selectionDashArray),a.closePath(),a.stroke()}else fabric.Object.prototype._setLineDash.call(this,a,this.selectionDashArray),a.strokeRect(b.ex+.5-(c>0?0:g),b.ey+.5-(d>0?0:h),g,h)},findTarget:function(a,b){if(!this.skipTargetFind){var c,d=this.getPointer(a,!0),e=this.getActiveGroup(),f=this.getActiveObject();if(e&&!b&&this._checkTarget(d,e))return this._fireOverOutEvents(e,a),e;if(f&&f._findTargetCorner(d))return this._fireOverOutEvents(f,a),f;if(f&&this._checkTarget(d,f)){if(!this.preserveObjectStacking)return this._fireOverOutEvents(f,a),f;c=f}this.targets=[];var g=this._searchPossibleTargets(this._objects,d);return a[this.altSelectionKey]&&g&&c&&g!==c&&(g=c),this._fireOverOutEvents(g,a),g}},_fireOverOutEvents:function(a,b){a?this._hoveredTarget!==a&&(this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:b}),this._hoveredTarget.fire("mouseout")),this.fire("mouse:over",{target:a,e:b}),a.fire("mouseover"),this._hoveredTarget=a):this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:b}),this._hoveredTarget.fire("mouseout"),this._hoveredTarget=null)},_checkTarget:function(a,b){if(b&&b.visible&&b.evented&&this.containsPoint(null,b,a)){if(!this.perPixelTargetFind&&!b.perPixelTargetFind||b.isEditing)return!0;if(!this.isTargetTransparent(b,a.x,a.y))return!0}},_searchPossibleTargets:function(a,b){for(var c,d,e,f=a.length;f--;)if(this._checkTarget(b,a[f])){c=a[f],"group"===c.type&&c.subTargetCheck&&(d=this._normalizePointer(c,b),(e=this._searchPossibleTargets(c._objects,d))&&this.targets.push(e));break}return c},restorePointerVpt:function(a){return fabric.util.transformPoint(a,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(b,c,d){d||(d=this.upperCanvasEl);var e,f=a(b),g=d.getBoundingClientRect(),h=g.width||0,i=g.height||0;return h&&i||("top"in g&&"bottom"in g&&(i=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(h=Math.abs(g.right-g.left))),this.calcOffset(),f.x=f.x-this._offset.left,f.y=f.y-this._offset.top,c||(f=this.restorePointerVpt(f)),e=0===h||0===i?{width:1,height:1}:{width:d.width/h,height:d.height/i},{x:f.x*e.width,y:f.y*e.height}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+a),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var b=this.getWidth()||a.width,c=this.getHeight()||a.height;fabric.util.setStyle(a,{position:"absolute",width:b+"px",height:c+"px",left:0,top:0}),a.width=b,a.height=c,fabric.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,b){b.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(a){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=a,a.set("active",!0)},setActiveObject:function(a,b){return this._setActiveObject(a),this.renderAll(),this.fire("object:selected",{target:a,e:b}),a.fire("selected",{e:b}),this},getActiveObject:function(){
return this._activeObject},_onObjectRemoved:function(a){this.getActiveObject()===a&&(this.fire("before:selection:cleared",{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected")),this.callSuper("_onObjectRemoved",a)},_discardActiveObject:function(){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=null},discardActiveObject:function(a){var b=this._activeObject;return this.fire("before:selection:cleared",{target:b,e:a}),this._discardActiveObject(),this.fire("selection:cleared",{e:a}),b&&b.fire("deselected",{e:a}),this},_setActiveGroup:function(a){this._activeGroup=a,a&&a.set("active",!0)},setActiveGroup:function(a,b){return this._setActiveGroup(a),a&&(this.fire("object:selected",{target:a,e:b}),a.fire("selected",{e:b})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var a=this.getActiveGroup();a&&a.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(a){var b=this.getActiveGroup();return this.fire("before:selection:cleared",{e:a,target:b}),this._discardActiveGroup(),this.fire("selection:cleared",{e:a}),this},deactivateAll:function(){for(var a,b=this.getObjects(),c=0,d=b.length;c<d;c++)(a=b[c])&&a.set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(a){var b=this.getActiveGroup(),c=this.getActiveObject();return(c||b)&&this.fire("before:selection:cleared",{target:c||b,e:a}),this.deactivateAll(),(c||b)&&(this.fire("selection:cleared",{e:a,target:c}),c&&c.fire("deselected")),this},dispose:function(){this.callSuper("dispose");var a=this.wrapperEl;return this.removeListeners(),a.removeChild(this.upperCanvasEl),a.removeChild(this.lowerCanvasEl),delete this.upperCanvasEl,a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,this},clear:function(){return this.discardActiveGroup(),this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(a){var b=this.getActiveGroup();b?b._renderControls(a):this._drawObjectsControls(a)},_drawObjectsControls:function(a){for(var b=0,c=this._objects.length;b<c;++b)this._objects[b]&&this._objects[b].active&&this._objects[b]._renderControls(a)},_toObject:function(a,b,c){var d=this._realizeGroupTransformOnObject(a),e=this.callSuper("_toObject",a,b,c);return this._unwindGroupTransformOnObject(a,d),e},_realizeGroupTransformOnObject:function(a){var b=["angle","flipX","flipY","height","left","scaleX","scaleY","top","width"];if(a.group&&a.group===this.getActiveGroup()){var c={};return b.forEach(function(b){c[b]=a[b]}),this.getActiveGroup().realizeTransform(a),c}return null},_unwindGroupTransformOnObject:function(a,b){b&&a.set(b)},_setSVGObject:function(a,b,c){var d;d=this._realizeGroupTransformOnObject(b),this.callSuper("_setSVGObject",a,b,c),this._unwindGroupTransformOnObject(b,d)}});for(var g in fabric.StaticCanvas)"prototype"!==g&&(fabric.Canvas[g]=fabric.StaticCanvas[g]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var a={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},b=fabric.util.addListener,c=fabric.util.removeListener;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this._bindEvents(),b(fabric.window,"resize",this._onResize),b(this.upperCanvasEl,"mousedown",this._onMouseDown),b(this.upperCanvasEl,"mousemove",this._onMouseMove),b(this.upperCanvasEl,"mouseout",this._onMouseOut),b(this.upperCanvasEl,"mouseenter",this._onMouseEnter),b(this.upperCanvasEl,"wheel",this._onMouseWheel),b(this.upperCanvasEl,"contextmenu",this._onContextMenu),b(this.upperCanvasEl,"touchstart",this._onMouseDown),b(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this)},removeListeners:function(){c(fabric.window,"resize",this._onResize),c(this.upperCanvasEl,"mousedown",this._onMouseDown),c(this.upperCanvasEl,"mousemove",this._onMouseMove),c(this.upperCanvasEl,"mouseout",this._onMouseOut),c(this.upperCanvasEl,"mouseenter",this._onMouseEnter),c(this.upperCanvasEl,"wheel",this._onMouseWheel),c(this.upperCanvasEl,"contextmenu",this._onContextMenu),c(this.upperCanvasEl,"touchstart",this._onMouseDown),c(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(a,b){this.__onTransformGesture&&this.__onTransformGesture(a,b)},_onDrag:function(a,b){this.__onDrag&&this.__onDrag(a,b)},_onMouseWheel:function(a){this.__onMouseWheel(a)},_onMouseOut:function(a){var b=this._hoveredTarget;this.fire("mouse:out",{target:b,e:a}),this._hoveredTarget=null,b&&b.fire("mouseout",{e:a})},_onMouseEnter:function(a){this.findTarget(a)||(this.fire("mouse:over",{target:null,e:a}),this._hoveredTarget=null)},_onOrientationChange:function(a,b){this.__onOrientationChange&&this.__onOrientationChange(a,b)},_onShake:function(a,b){this.__onShake&&this.__onShake(a,b)},_onLongPress:function(a,b){this.__onLongPress&&this.__onLongPress(a,b)},_onContextMenu:function(a){return this.stopContextMenu&&(a.stopPropagation(),a.preventDefault()),!1},_onMouseDown:function(a){this.__onMouseDown(a),b(fabric.document,"touchend",this._onMouseUp),b(fabric.document,"touchmove",this._onMouseMove),c(this.upperCanvasEl,"mousemove",this._onMouseMove),c(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===a.type?c(this.upperCanvasEl,"mousedown",this._onMouseDown):(b(fabric.document,"mouseup",this._onMouseUp),b(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(a){if(this.__onMouseUp(a),c(fabric.document,"mouseup",this._onMouseUp),c(fabric.document,"touchend",this._onMouseUp),c(fabric.document,"mousemove",this._onMouseMove),c(fabric.document,"touchmove",this._onMouseMove),b(this.upperCanvasEl,"mousemove",this._onMouseMove),b(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchend"===a.type){var d=this;setTimeout(function(){b(d.upperCanvasEl,"mousedown",d._onMouseDown)},400)}},_onMouseMove:function(a){!this.allowTouchScrolling&&a.preventDefault&&a.preventDefault(),this.__onMouseMove(a)},_onResize:function(){this.calcOffset()},_shouldRender:function(a,b){var c=this.getActiveGroup()||this.getActiveObject();return!(c&&c.isEditing&&a===c||!(a&&(a.isMoving||a!==c)||!a&&c||!a&&!c&&!this._groupSelector||b&&this._previousPointer&&this.selection&&(b.x!==this._previousPointer.x||b.y!==this._previousPointer.y)))},__onMouseUp:function(a){var b,c=!0,d=this._currentTransform,e=this._groupSelector,f=!e||0===e.left&&0===e.top;if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(a);d&&(this._finalizeCurrentTransform(),c=!d.actionPerformed),b=c?this.findTarget(a,!0):d.target;var g=this._shouldRender(b,this.getPointer(a));b||!f?this._maybeGroupObjects(a):(this._groupSelector=null,this._currentTransform=null),b&&(b.isMoving=!1),this._handleCursorAndEvent(a,b,"up"),b&&(b.__corner=0),g&&this.renderAll()},_handleCursorAndEvent:function(a,b,c){this._setCursorFromEvent(a,b),this._handleEvent(a,c,b||null)},_handleEvent:function(a,b,c){var d=void 0===c?this.findTarget(a):c,e=this.targets||[],f={e:a,target:d,subTargets:e};this.fire("mouse:"+b,f),d&&d.fire("mouse"+b,f);for(var g=0;g<e.length;g++)e[g].fire("mouse"+b,f)},_finalizeCurrentTransform:function(){var a=this._currentTransform,b=a.target;b._scaling&&(b._scaling=!1),b.setCoords(),this._restoreOriginXY(b),(a.actionPerformed||this.stateful&&b.hasStateChanged())&&(this.fire("object:modified",{target:b}),b.fire("modified"))},_restoreOriginXY:function(a){if(this._previousOriginX&&this._previousOriginY){var b=a.translateToOriginPoint(a.getCenterPoint(),this._previousOriginX,this._previousOriginY);a.originX=this._previousOriginX,a.originY=this._previousOriginY,a.left=b.x,a.top=b.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(a){this._isCurrentlyDrawing=!0,this.discardActiveObject(a).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var b=this.getPointer(a);this.freeDrawingBrush.onMouseDown(b),this._handleEvent(a,"down")},_onMouseMoveInDrawingMode:function(a){if(this._isCurrentlyDrawing){var b=this.getPointer(a);this.freeDrawingBrush.onMouseMove(b)}this.setCursor(this.freeDrawingCursor),this._handleEvent(a,"move")},_onMouseUpInDrawingMode:function(a){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this._handleEvent(a,"up")},__onMouseDown:function(a){var b=this.findTarget(a);if("which"in a?3===a.which:2===a.button)return void(this.fireRightClick&&this._handleEvent(a,"down",b||null));if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(a);if(!this._currentTransform){var c=this.getPointer(a,!0);this._previousPointer=c;var d=this._shouldRender(b,c),e=this._shouldGroup(a,b);this._shouldClearSelection(a,b)?this._clearSelection(a,b,c):e&&(this._handleGrouping(a,b),b=this.getActiveGroup()),b&&(!b.selectable||!b.__corner&&e||(this._beforeTransform(a,b),this._setupCurrentTransform(a,b)),b!==this.getActiveGroup()&&b!==this.getActiveObject()&&(this.deactivateAll(),b.selectable&&this.setActiveObject(b,a))),this._handleEvent(a,"down",b||null),d&&this.renderAll()}},_beforeTransform:function(a,b){this.stateful&&b.saveState(),b._findTargetCorner(this.getPointer(a))&&this.onBeforeScaleRotate(b)},_clearSelection:function(a,b,c){this.deactivateAllWithDispatch(a),b&&b.selectable?this.setActiveObject(b,a):this.selection&&(this._groupSelector={ex:c.x,ey:c.y,top:0,left:0})},_setOriginToCenter:function(a){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var b=a.getCenterPoint();a.originX="center",a.originY="center",a.left=b.x,a.top=b.y,this._currentTransform.left=a.left,this._currentTransform.top=a.top},_setCenterToOrigin:function(a){var b=a.translateToOriginPoint(a.getCenterPoint(),this._previousOriginX,this._previousOriginY);a.originX=this._previousOriginX,a.originY=this._previousOriginY,a.left=b.x,a.top=b.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(a){var b,c;if(this.isDrawingMode)return void this._onMouseMoveInDrawingMode(a);if(!(void 0!==a.touches&&a.touches.length>1)){var d=this._groupSelector;d?(c=this.getPointer(a,!0),d.left=c.x-d.ex,d.top=c.y-d.ey,this.renderTop()):this._currentTransform?this._transformObject(a):(b=this.findTarget(a),this._setCursorFromEvent(a,b)),this._handleEvent(a,"move",b||null)}},__onMouseWheel:function(a){this._handleEvent(a,"wheel")},_transformObject:function(a){var b=this.getPointer(a),c=this._currentTransform;c.reset=!1,c.target.isMoving=!0,c.shiftKey=a.shiftKey,c.altKey=a[this.centeredKey],this._beforeScaleTransform(a,c),this._performTransformAction(a,c,b),c.actionPerformed&&this.renderAll()},_performTransformAction:function(a,b,c){var d=c.x,e=c.y,f=b.target,g=b.action,h=!1;"rotate"===g?(h=this._rotateObject(d,e))&&this._fire("rotating",f,a):"scale"===g?(h=this._onScale(a,b,d,e))&&this._fire("scaling",f,a):"scaleX"===g?(h=this._scaleObject(d,e,"x"))&&this._fire("scaling",f,a):"scaleY"===g?(h=this._scaleObject(d,e,"y"))&&this._fire("scaling",f,a):"skewX"===g?(h=this._skewObject(d,e,"x"))&&this._fire("skewing",f,a):"skewY"===g?(h=this._skewObject(d,e,"y"))&&this._fire("skewing",f,a):(h=this._translateObject(d,e))&&(this._fire("moving",f,a),this.setCursor(f.moveCursor||this.moveCursor)),b.actionPerformed=b.actionPerformed||h},_fire:function(a,b,c){this.fire("object:"+a,{target:b,e:c}),b.fire(a,{e:c})},_beforeScaleTransform:function(a,b){if("scale"===b.action||"scaleX"===b.action||"scaleY"===b.action){var c=this._shouldCenterTransform(b.target);(c&&("center"!==b.originX||"center"!==b.originY)||!c&&"center"===b.originX&&"center"===b.originY)&&(this._resetCurrentTransform(),b.reset=!0)}},_onScale:function(a,b,c,d){return!a[this.uniScaleKey]&&!this.uniScaleTransform||b.target.get("lockUniScaling")?(b.reset||"scale"!==b.currentAction||this._resetCurrentTransform(),b.currentAction="scaleEqually",this._scaleObject(c,d,"equally")):(b.currentAction="scale",this._scaleObject(c,d))},_setCursorFromEvent:function(a,b){if(!b)return this.setCursor(this.defaultCursor),!1;var c=b.hoverCursor||this.hoverCursor;if(b.selectable){var d=this.getActiveGroup(),e=b._findTargetCorner&&(!d||!d.contains(b))&&b._findTargetCorner(this.getPointer(a,!0));e?this._setCornerCursor(e,b,a):this.setCursor(c)}else this.setCursor(c);return!0},_setCornerCursor:function(b,c,d){if(b in a)this.setCursor(this._getRotatedCornerCursor(b,c,d));else{if("mtr"!==b||!c.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(b,c,d){var e=Math.round(c.getAngle()%360/45);return e<0&&(e+=8),e+=a[b],d[this.altActionKey]&&a[b]%2==0&&(e+=2),e%=8,this.cursorMap[e]}})}(),function(){var a=Math.min,b=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(a,b){var c=this.getActiveObject();return a[this.selectionKey]&&b&&b.selectable&&(this.getActiveGroup()||c&&c!==b)&&this.selection},_handleGrouping:function(a,b){var c=this.getActiveGroup();(b!==c||(b=this.findTarget(a,!0)))&&(c?this._updateActiveGroup(b,a):this._createActiveGroup(b,a),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(a,b){var c=this.getActiveGroup();if(c.contains(a)){if(c.removeWithUpdate(a),a.set("active",!1),1===c.size())return this.discardActiveGroup(b),void this.setActiveObject(c.item(0))}else c.addWithUpdate(a);this.fire("selection:created",{target:c,e:b}),c.set("active",!0)},_createActiveGroup:function(a,b){if(this._activeObject&&a!==this._activeObject){var c=this._createGroup(a);c.addWithUpdate(),this.setActiveGroup(c),this._activeObject=null,this.fire("selection:created",{target:c,e:b})}a.set("active",!0)},_createGroup:function(a){var b=this.getObjects(),c=b.indexOf(this._activeObject)<b.indexOf(a),d=c?[this._activeObject,a]:[a,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.Group(d,{canvas:this})},_groupSelectedObjects:function(a){var b=this._collectObjects();1===b.length?this.setActiveObject(b[0],a):b.length>1&&(b=new fabric.Group(b.reverse(),{canvas:this}),b.addWithUpdate(),this.setActiveGroup(b,a),b.saveCoords(),this.fire("selection:created",{target:b}),this.renderAll())},_collectObjects:function(){for(var c,d=[],e=this._groupSelector.ex,f=this._groupSelector.ey,g=e+this._groupSelector.left,h=f+this._groupSelector.top,i=new fabric.Point(a(e,g),a(f,h)),j=new fabric.Point(b(e,g),b(f,h)),k=e===g&&f===h,l=this._objects.length;l--&&!((c=this._objects[l])&&c.selectable&&c.visible&&(c.intersectsWithRect(i,j)||c.isContainedWithinRect(i,j)||c.containsPoint(i)||c.containsPoint(j))&&(c.set("active",!0),d.push(c),k)););return d},_maybeGroupObjects:function(a){this.selection&&this._groupSelector&&this._groupSelectedObjects(a);var b=this.getActiveGroup();b&&(b.setObjectsCoords().setCoords(),b.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}})}(),function(){var a=fabric.StaticCanvas.supports("toDataURLWithQuality");fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(a){a||(a={});var b=a.format||"png",c=a.quality||1,d=a.multiplier||1,e={left:a.left||0,top:a.top||0,width:a.width||0,height:a.height||0};return this.__toDataURLWithMultiplier(b,c,e,d)},__toDataURLWithMultiplier:function(a,b,c,d){var e=this.getWidth(),f=this.getHeight(),g=(c.width||this.getWidth())*d,h=(c.height||this.getHeight())*d,i=this.getZoom(),j=i*d,k=this.viewportTransform,l=(k[4]-c.left)*d,m=(k[5]-c.top)*d,n=[j,0,0,j,l,m],o=this.interactive;this.viewportTransform=n,this.interactive&&(this.interactive=!1),e!==g||f!==h?this.setDimensions({width:g,height:h}):this.renderAll();var p=this.__toDataURL(a,b,c);return o&&(this.interactive=o),this.viewportTransform=k,this.setDimensions({width:e,height:f}),p},__toDataURL:function(b,c){var d=this.contextContainer.canvas;return"jpg"===b&&(b="jpeg"),a?d.toDataURL("image/"+b,c):d.toDataURL("image/"+b)},toDataURLWithMultiplier:function(a,b,c){return this.toDataURL({format:a,multiplier:b,quality:c})}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(a,b,c){return this.loadFromJSON(a,b,c)},loadFromJSON:function(a,b,c){if(a){var d="string"==typeof a?JSON.parse(a):fabric.util.object.clone(a);this.clear();var e=this;return this._enlivenObjects(d.objects,function(){e._setBgOverlay(d,function(){delete d.objects,delete d.backgroundImage,delete d.overlayImage,delete d.background,delete d.overlay,e._setOptions(d),b&&b()})},c),this}},_setBgOverlay:function(a,b){var c=this,d={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!(a.backgroundImage||a.overlayImage||a.background||a.overlay))return void(b&&b());var e=function(){d.backgroundImage&&d.overlayImage&&d.backgroundColor&&d.overlayColor&&(c.renderAll(),b&&b())};this.__setBgOverlay("backgroundImage",a.backgroundImage,d,e),this.__setBgOverlay("overlayImage",a.overlayImage,d,e),this.__setBgOverlay("backgroundColor",a.background,d,e),this.__setBgOverlay("overlayColor",a.overlay,d,e)},__setBgOverlay:function(a,b,c,d){var e=this;return b?void("backgroundImage"===a||"overlayImage"===a?fabric.util.enlivenObjects([b],function(b){e[a]=b[0],c[a]=!0,d&&d()}):this["set"+fabric.util.string.capitalize(a,!0)](b,function(){c[a]=!0,d&&d()})):(c[a]=!0,void(d&&d()))},_enlivenObjects:function(a,b,c){var d=this;if(!a||0===a.length)return void(b&&b());var e=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(a,function(a){a.forEach(function(a,b){d.insertAt(a,b)}),d.renderOnAddRemove=e,b&&b()},null,c)},_toDataURL:function(a,b){this.clone(function(c){b(c.toDataURL(a))})},_toDataURLWithMultiplier:function(a,b,c){this.clone(function(d){c(d.toDataURLWithMultiplier(a,b))})},clone:function(a,b){var c=JSON.stringify(this.toJSON(b));this.cloneWithoutData(function(b){b.loadFromJSON(c,function(){a&&a(b)})})},cloneWithoutData:function(a){var b=fabric.document.createElement("canvas");b.width=this.getWidth(),b.height=this.getHeight();var c=new fabric.Canvas(b);c.clipTo=this.clipTo,this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),a&&a(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):a&&a(c)}}),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.util.object.clone,e=b.util.toFixed,f=b.util.string.capitalize,g=b.util.degreesToRadians,h=b.StaticCanvas.supports("setLineDash"),i=!b.isLikelyNode;b.Object||(b.Object=b.util.createClass(b.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:i,statefullCache:!1,noScaleCache:!0,dirty:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit fillRule backgroundColor".split(" "),initialize:function(a){a=a||{},a&&this.setOptions(a),this.objectCaching&&(this._createCacheCanvas(),this.setupState({propertySet:"cacheProperties"}))},_createCacheCanvas:function(){this._cacheCanvas=b.document.createElement("canvas"),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas()},_getCacheCanvasDimensions:function(){var a=this.canvas&&this.canvas.getZoom()||1,c=this.getObjectScaling(),d=this._getNonTransformedDimensions(),e=this.canvas&&this.canvas._isRetinaScaling()?b.devicePixelRatio:1,f=c.scaleX*a*e,g=c.scaleY*a*e,h=d.x*f,i=d.y*g;return{width:Math.ceil(h)+2,height:Math.ceil(i)+2,zoomX:f,zoomY:g}},_updateCacheCanvas:function(){if(this.noScaleCache&&this.canvas&&this.canvas._currentTransform){if("scale"===this.canvas._currentTransform.action.slice(0,5))return!1}var a=this._getCacheCanvasDimensions(),b=a.width,c=a.height,d=a.zoomX,e=a.zoomY;return(b!==this.cacheWidth||c!==this.cacheHeight)&&(this._cacheCanvas.width=b,this._cacheCanvas.height=c,this._cacheContext.translate(b/2,c/2),this._cacheContext.scale(d,e),this.cacheWidth=b,this.cacheHeight=c,this.zoomX=d,this.zoomY=e,!0)},setOptions:function(a){this._setOptions(a),this._initGradient(a.fill,"fill"),this._initGradient(a.stroke,"stroke"),this._initClipping(a),this._initPattern(a.fill,"fill"),this._initPattern(a.stroke,"stroke")},transform:function(a,b){this.group&&!this.group._transformDone&&this.group===this.canvas._activeGroup&&this.group.transform(a);var c=b?this._getLeftTopCoords():this.getCenterPoint();a.translate(c.x,c.y),a.rotate(g(this.angle)),a.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1)),a.transform(1,0,Math.tan(g(this.skewX)),1,0,0),a.transform(1,Math.tan(g(this.skewY)),0,1,0,0)},toObject:function(a){var c=b.Object.NUM_FRACTION_DIGITS,d={type:this.type,originX:this.originX,originY:this.originY,left:e(this.left,c),top:e(this.top,c),width:e(this.width,c),height:e(this.height,c),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:e(this.strokeWidth,c),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:e(this.strokeMiterLimit,c),scaleX:e(this.scaleX,c),scaleY:e(this.scaleY,c),angle:e(this.getAngle(),c),flipX:this.flipX,flipY:this.flipY,opacity:e(this.opacity,c),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:e(this.skewX,c),skewY:e(this.skewY,c)};return b.util.populateWithProperties(this,d,a),this.includeDefaultValues||(d=this._removeDefaultValues(d)),d},toDatalessObject:function(a){return this.toObject(a)},_removeDefaultValues:function(a){var c=b.util.getKlass(a.type).prototype;return c.stateProperties.forEach(function(b){a[b]===c[b]&&delete a[b],"[object Array]"===Object.prototype.toString.call(a[b])&&"[object Array]"===Object.prototype.toString.call(c[b])&&0===a[b].length&&0===c[b].length&&delete a[b]}),a},toString:function(){return"#<fabric."+f(this.type)+">"},getObjectScaling:function(){var a=this.scaleX,b=this.scaleY;if(this.group){var c=this.group.getObjectScaling();a*=c.scaleX,b*=c.scaleY}return{scaleX:a,scaleY:b}},_set:function(a,c){return("scaleX"===a||"scaleY"===a)&&(c=this._constrainScale(c)),"scaleX"===a&&c<0?(this.flipX=!this.flipX,c*=-1):"scaleY"===a&&c<0?(this.flipY=!this.flipY,c*=-1):"shadow"!==a||!c||c instanceof b.Shadow?"dirty"===a&&this.group&&this.group.set("dirty",c):c=new b.Shadow(c),this[a]=c,this.cacheProperties.indexOf(a)>-1&&(this.group&&this.group.set("dirty",!0),this.dirty=!0),"width"!==a&&"height"!==a||(this.minScaleLimit=Math.min(.1,1/Math.max(this.width,this.height))),this},setOnGroup:function(){},setSourcePath:function(a){return this.sourcePath=a,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:[1,0,0,1,0,0]},render:function(a,c){0===this.width&&0===this.height||!this.visible||(a.save(),this._setupCompositeOperation(a),this.drawSelectionBackground(a),c||this.transform(a),this._setOpacity(a),this._setShadow(a),this.transformMatrix&&a.transform.apply(a,this.transformMatrix),this.clipTo&&b.util.clipContext(this,a),this.objectCaching&&!this.group?(this.isCacheDirty(c)&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,c),this.dirty=!1),this.drawCacheOnCanvas(a)):(this.drawObject(a,c),c&&this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&a.restore(),a.restore())},drawObject:function(a,b){this._renderBackground(a),this._setStrokeStyles(a),this._setFillStyles(a),this._render(a,b)},drawCacheOnCanvas:function(a){a.scale(1/this.zoomX,1/this.zoomY),a.drawImage(this._cacheCanvas,-this.cacheWidth/2,-this.cacheHeight/2)},isCacheDirty:function(a){if(!a&&this._updateCacheCanvas())return!0;if(this.dirty||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(!a){var b=this._getNonTransformedDimensions();this._cacheContext.clearRect(-b.x/2,-b.y/2,b.x,b.y)}return!0}return!1},_renderBackground:function(a){if(this.backgroundColor){var b=this._getNonTransformedDimensions();a.fillStyle=this.backgroundColor,a.fillRect(-b.x/2,-b.y/2,b.x,b.y),this._removeShadow(a)}},_setOpacity:function(a){a.globalAlpha*=this.opacity},_setStrokeStyles:function(a){this.stroke&&(a.lineWidth=this.strokeWidth,a.lineCap=this.strokeLineCap,a.lineJoin=this.strokeLineJoin,a.miterLimit=this.strokeMiterLimit,a.strokeStyle=this.stroke.toLive?this.stroke.toLive(a,this):this.stroke)},_setFillStyles:function(a){this.fill&&(a.fillStyle=this.fill.toLive?this.fill.toLive(a,this):this.fill)},_setLineDash:function(a,b,c){b&&(1&b.length&&b.push.apply(b,b),h?a.setLineDash(b):c&&c(a))},_renderControls:function(a,c){if(!(!this.active||c||this.group&&this.group!==this.canvas.getActiveGroup())){var d,e=this.getViewportTransform(),f=this.calcTransformMatrix();f=b.util.multiplyTransformMatrices(e,f),d=b.util.qrDecompose(f),a.save(),a.translate(d.translateX,d.translateY),a.lineWidth=1*this.borderScaleFactor,this.group||(a.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.group&&this.group===this.canvas.getActiveGroup()?(a.rotate(g(d.angle)),this.drawBordersInGroup(a,d)):(a.rotate(g(this.angle)),this.drawBorders(a)),this.drawControls(a),a.restore()}},_setShadow:function(a){if(this.shadow){var c=this.canvas&&this.canvas.viewportTransform[0]||1,d=this.canvas&&this.canvas.viewportTransform[3]||1,e=this.getObjectScaling();this.canvas&&this.canvas._isRetinaScaling()&&(c*=b.devicePixelRatio,d*=b.devicePixelRatio),a.shadowColor=this.shadow.color,a.shadowBlur=this.shadow.blur*(c+d)*(e.scaleX+e.scaleY)/4,a.shadowOffsetX=this.shadow.offsetX*c*e.scaleX,a.shadowOffsetY=this.shadow.offsetY*d*e.scaleY}},_removeShadow:function(a){this.shadow&&(a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0)},_applyPatternGradientTransform:function(a,b){if(b.toLive){var c=b.gradientTransform||b.patternTransform;c&&a.transform.apply(a,c);var d=-this.width/2+b.offsetX||0,e=-this.height/2+b.offsetY||0;a.translate(d,e)}},_renderFill:function(a){this.fill&&(a.save(),this._applyPatternGradientTransform(a,this.fill),"evenodd"===this.fillRule?a.fill("evenodd"):a.fill(),a.restore())},_renderStroke:function(a){this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this._setLineDash(a,this.strokeDashArray,this._renderDashedStroke),this._applyPatternGradientTransform(a,this.stroke),a.stroke(),a.restore())},clone:function(a,c){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(c),a):new b.Object(this.toObject(c))},cloneAsImage:function(a,c){var d=this.toDataURL(c);return b.util.loadImage(d,function(c){a&&a(new b.Image(c))}),this},toDataURL:function(a){a||(a={});var c=b.util.createCanvasElement(),d=this.getBoundingRect();c.width=d.width,c.height=d.height,b.util.wrapElement(c,"div");var e=new b.StaticCanvas(c,{enableRetinaScaling:a.enableRetinaScaling});"jpg"===a.format&&(a.format="jpeg"),"jpeg"===a.format&&(e.backgroundColor="#fff");var f={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new b.Point(e.getWidth()/2,e.getHeight()/2),"center","center");var g=this.canvas;e.add(this);var h=e.toDataURL(a);return this.set(f).setCoords(),this.canvas=g,e.dispose(),e=null,h},isType:function(a){return this.type===a},complexity:function(){return 0},toJSON:function(a){return this.toObject(a)},setGradient:function(a,c){c||(c={});var d={colorStops:[]};return d.type=c.type||(c.r1||c.r2?"radial":"linear"),d.coords={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2},(c.r1||c.r2)&&(d.coords.r1=c.r1,d.coords.r2=c.r2),d.gradientTransform=c.gradientTransform,b.Gradient.prototype.addColorStop.call(d,c.colorStops),this.set(a,b.Gradient.forObject(this,d))},setPatternFill:function(a){return this.set("fill",new b.Pattern(a))},setShadow:function(a){return this.set("shadow",a?new b.Shadow(a):null)},setColor:function(a){return this.set("fill",a),this},setAngle:function(a){var b=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return b&&this._setOriginToCenter(),this.set("angle",a),b&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},remove:function(){return this.canvas&&this.canvas.remove(this),this},getLocalPointer:function(a,c){c=c||this.canvas.getPointer(a);var d=new b.Point(c.x,c.y),e=this._getLeftTopCoords()
;return this.angle&&(d=b.util.rotatePoint(d,e,g(-this.angle))),{x:d.x-e.x,y:d.y-e.y}},_setupCompositeOperation:function(a){this.globalCompositeOperation&&(a.globalCompositeOperation=this.globalCompositeOperation)}}),b.util.createAccessors(b.Object),b.Object.prototype.rotate=b.Object.prototype.setAngle,c(b.Object.prototype,b.Observable),b.Object.NUM_FRACTION_DIGITS=2,b.Object._fromObject=function(a,c,e,f,g){var h=b[a];if(c=d(c,!0),!f){var i=g?new h(c[g],c):new h(c);return e&&e(i),i}b.util.enlivenPatterns([c.fill,c.stroke],function(a){c.fill=a[0],c.stroke=a[1];var b=g?new h(c[g],c):new h(c);e&&e(b)})},b.Object.__uid=0)}("undefined"!=typeof exports?exports:this),function(){var a=fabric.util.degreesToRadians,b={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(a,d,e,f,g){var h,i,j,k=a.x,l=a.y;return"string"==typeof d?d=b[d]:d-=.5,"string"==typeof f?f=b[f]:f-=.5,h=f-d,"string"==typeof e?e=c[e]:e-=.5,"string"==typeof g?g=c[g]:g-=.5,i=g-e,(h||i)&&(j=this._getTransformedDimensions(),k=a.x+h*j.x,l=a.y+i*j.y),new fabric.Point(k,l)},translateToCenterPoint:function(b,c,d){var e=this.translateToGivenOrigin(b,c,d,"center","center");return this.angle?fabric.util.rotatePoint(e,b,a(this.angle)):e},translateToOriginPoint:function(b,c,d){var e=this.translateToGivenOrigin(b,"center","center",c,d);return this.angle?fabric.util.rotatePoint(e,b,a(this.angle)):e},getCenterPoint:function(){var a=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(a,this.originX,this.originY)},getPointByOrigin:function(a,b){var c=this.getCenterPoint();return this.translateToOriginPoint(c,a,b)},toLocalPoint:function(b,c,d){var e,f,g=this.getCenterPoint();return e=void 0!==c&&void 0!==d?this.translateToGivenOrigin(g,"center","center",c,d):new fabric.Point(this.left,this.top),f=new fabric.Point(b.x,b.y),this.angle&&(f=fabric.util.rotatePoint(f,g,-a(this.angle))),f.subtractEquals(e)},setPositionByOrigin:function(a,b,c){var d=this.translateToCenterPoint(a,b,c),e=this.translateToOriginPoint(d,this.originX,this.originY);this.set("left",e.x),this.set("top",e.y)},adjustPosition:function(c){var d,e,f=a(this.angle),g=this.getWidth(),h=Math.cos(f)*g,i=Math.sin(f)*g;d="string"==typeof this.originX?b[this.originX]:this.originX-.5,e="string"==typeof c?b[c]:c-.5,this.left+=h*(e-d),this.top+=i*(e-d),this.setCoords(),this.originX=c},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var a=this.getCenterPoint();this.originX="center",this.originY="center",this.left=a.x,this.top=a.y},_resetOrigin:function(){var a=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=a.x,this.top=a.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function a(a){return[new fabric.Point(a.tl.x,a.tl.y),new fabric.Point(a.tr.x,a.tr.y),new fabric.Point(a.br.x,a.br.y),new fabric.Point(a.bl.x,a.bl.y)]}var b=fabric.util.degreesToRadians,c=fabric.util.multiplyTransformMatrices;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,intersectsWithRect:function(b,c){var d=a(this.oCoords);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(d,b,c).status},intersectsWithObject:function(b){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(a(this.oCoords),a(b.oCoords)).status||b.isContainedWithinObject(this)||this.isContainedWithinObject(b)},isContainedWithinObject:function(b){for(var c=a(this.oCoords),d=0;d<4;d++)if(!b.containsPoint(c[d]))return!1;return!0},isContainedWithinRect:function(a,b){var c=this.getBoundingRect();return c.left>=a.x&&c.left+c.width<=b.x&&c.top>=a.y&&c.top+c.height<=b.y},containsPoint:function(a){this.oCoords||this.setCoords();var b=this._getImageLines(this.oCoords),c=this._findCrossPoints(a,b);return 0!==c&&c%2==1},_getImageLines:function(a){return{topline:{o:a.tl,d:a.tr},rightline:{o:a.tr,d:a.br},bottomline:{o:a.br,d:a.bl},leftline:{o:a.bl,d:a.tl}}},_findCrossPoints:function(a,b){var c,d,e,f,g,h,i=0;for(var j in b)if(h=b[j],!(h.o.y<a.y&&h.d.y<a.y||h.o.y>=a.y&&h.d.y>=a.y||(h.o.x===h.d.x&&h.o.x>=a.x?g=h.o.x:(c=0,d=(h.d.y-h.o.y)/(h.d.x-h.o.x),e=a.y-c*a.x,f=h.o.y-d*h.o.x,g=-(e-f)/(c-d)),g>=a.x&&(i+=1),2!==i)))break;return i},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(a){var b=this.calcCoords(a);return fabric.util.makeBoundingBoxFromPoints([b.tl,b.tr,b.br,b.bl])},getWidth:function(){return this._getTransformedDimensions().x},getHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(a){return Math.abs(a)<this.minScaleLimit?a<0?-this.minScaleLimit:this.minScaleLimit:a},scale:function(a){return a=this._constrainScale(a),a<0&&(this.flipX=!this.flipX,this.flipY=!this.flipY,a*=-1),this.scaleX=a,this.scaleY=a,this.setCoords()},scaleToWidth:function(a){var b=this.getBoundingRect().width/this.getWidth();return this.scale(a/this.width/b)},scaleToHeight:function(a){var b=this.getBoundingRect().height/this.getHeight();return this.scale(a/this.height/b)},calcCoords:function(a){var c=b(this.angle),d=this.getViewportTransform(),e=a?this._getTransformedDimensions():this._calculateCurrentDimensions(),f=e.x,g=e.y,h=Math.sin(c),i=Math.cos(c),j=f>0?Math.atan(g/f):0,k=f/Math.cos(j)/2,l=Math.cos(j+c)*k,m=Math.sin(j+c)*k,n=this.getCenterPoint(),o=a?n:fabric.util.transformPoint(n,d),p=new fabric.Point(o.x-l,o.y-m),q=new fabric.Point(p.x+f*i,p.y+f*h),r=new fabric.Point(p.x-g*h,p.y+g*i),s=new fabric.Point(o.x+l,o.y+m);if(!a)var t=new fabric.Point((p.x+r.x)/2,(p.y+r.y)/2),u=new fabric.Point((q.x+p.x)/2,(q.y+p.y)/2),v=new fabric.Point((s.x+q.x)/2,(s.y+q.y)/2),w=new fabric.Point((s.x+r.x)/2,(s.y+r.y)/2),x=new fabric.Point(u.x+h*this.rotatingPointOffset,u.y-i*this.rotatingPointOffset);var o={tl:p,tr:q,br:s,bl:r};return a||(o.ml=t,o.mt=u,o.mr=v,o.mb=w,o.mtr=x),o},setCoords:function(a,b){return this.oCoords=this.calcCoords(a),b||a||(this.absoluteCoords=this.calcCoords(!0)),a||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var a=b(this.angle),c=Math.cos(a),d=Math.sin(a);return[c,d,-d,c,0,0]}return[1,0,0,1,0,0]},calcTransformMatrix:function(){var a=this.getCenterPoint(),b=[1,0,0,1,a.x,a.y],d=this._calcRotateMatrix(),e=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0),f=this.group?this.group.calcTransformMatrix():[1,0,0,1,0,0];return f=c(f,b),f=c(f,d),f=c(f,e)},_calcDimensionsTransformMatrix:function(a,d,e){var f=[1,0,Math.tan(b(a)),1],g=[1,Math.tan(b(d)),0,1],h=this.scaleX*(e&&this.flipX?-1:1),i=this.scaleY*(e&&this.flipY?-1:1),j=[h,0,0,i],k=c(j,f,!0);return c(k,g,!0)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(a){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,a):this.canvas.sendBackwards(this,a),this},bringForward:function(a){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,a):this.canvas.bringForward(this,a),this},moveTo:function(a){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,a):this.canvas.moveTo(this,a),this}}),function(){function a(a,b){if(b){if(b.toLive)return a+": url(#SVGID_"+b.id+"); ";var c=new fabric.Color(b),d=a+": "+c.toRgb()+"; ",e=c.getAlpha();return 1!==e&&(d+=a+"-opacity: "+e.toString()+"; "),d}return a+": none; "}fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(b){var c=this.fillRule,d=this.strokeWidth?this.strokeWidth:"0",e=this.strokeDashArray?this.strokeDashArray.join(" "):"none",f=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",h=this.strokeMiterLimit?this.strokeMiterLimit:"4",i=void 0!==this.opacity?this.opacity:"1",j=this.visible?"":" visibility: hidden;",k=b?"":this.getSvgFilter(),l=a("fill",this.fill);return[a("stroke",this.stroke),"stroke-width: ",d,"; ","stroke-dasharray: ",e,"; ","stroke-linecap: ",f,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",h,"; ",l,"fill-rule: ",c,"; ","opacity: ",i,";",k,j].join("")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgId:function(){return this.id?'id="'+this.id+'" ':""},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var a=fabric.util.toFixed,b=this.getAngle(),c=this.getSkewX()%360,d=this.getSkewY()%360,e=this.getCenterPoint(),f=fabric.Object.NUM_FRACTION_DIGITS,g="path-group"===this.type?"":"translate("+a(e.x,f)+" "+a(e.y,f)+")",h=0!==b?" rotate("+a(b,f)+")":"",i=1===this.scaleX&&1===this.scaleY?"":" scale("+a(this.scaleX,f)+" "+a(this.scaleY,f)+")",j=0!==c?" skewX("+a(c,f)+")":"",k=0!==d?" skewY("+a(d,f)+")":"",l="path-group"===this.type?this.width:0,m=this.flipX?" matrix(-1 0 0 1 "+l+" 0) ":"",n="path-group"===this.type?this.height:0;return[g,h,i,m,this.flipY?" matrix(1 0 0 -1 0 "+n+")":"",j,k].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var a=[];return this.fill&&this.fill.toLive&&a.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&a.push(this.stroke.toSVG(this,!1)),this.shadow&&a.push(this.shadow.toSVG(this)),a}})}(),function(){function a(a,b,d){var e={};d.forEach(function(b){e[b]=a[b]}),c(a[b],e,!0)}function b(a,c,d){if(!fabric.isLikelyNode&&a instanceof Element)return a===c;if(a instanceof Array){if(a.length!==c.length)return!1;for(var e=0,f=a.length;e<f;e++)if(a[e]!==c[e])return!1;return!0}if(a&&"object"==typeof a){if(!d&&Object.keys(a).length!==Object.keys(c).length)return!1;for(var g in a)if(!b(a[g],c[g]))return!1;return!0}return a===c}var c=fabric.util.object.extend,d="stateProperties";fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(a){return a=a||d,a="_"+a,!b(this[a],this,!0)},saveState:function(b){var c=b&&b.propertySet||d,e="_"+c;return this[e]?(a(this,e,this[c]),b&&b.stateProperties&&a(this,e,b.stateProperties),this):this.setupState(b)},setupState:function(a){a=a||{};var b=a.propertySet||d;return a.propertySet=b,this["_"+b]={},this.saveState(a),this}})}(),function(){var a=fabric.util.degreesToRadians,b=function(){return"undefined"!=typeof G_vmlCanvasManager};fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(a){if(!this.hasControls||!this.active)return!1;var b,c,d=a.x,e=a.y;this.__corner=0;for(var f in this.oCoords)if(this.isControlVisible(f)&&("mtr"!==f||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==f&&"mr"!==f&&"mb"!==f&&"ml"!==f)&&(c=this._getImageLines(this.oCoords[f].corner),0!==(b=this._findCrossPoints({x:d,y:e},c))&&b%2==1))return this.__corner=f,f;return!1},_setCornerCoords:function(){var b,c,d=this.oCoords,e=a(45-this.angle),f=.707106*this.cornerSize,g=f*Math.cos(e),h=f*Math.sin(e);for(var i in d)b=d[i].x,c=d[i].y,d[i].corner={tl:{x:b-h,y:c-g},tr:{x:b+g,y:c-h},bl:{x:b-g,y:c+h},br:{x:b+h,y:c+g}}},_getNonTransformedDimensions:function(){var a=this.strokeWidth;return{x:this.width+a,y:this.height+a}},_getTransformedDimensions:function(a,b){void 0===a&&(a=this.skewX),void 0===b&&(b=this.skewY);var c,d,e=this._getNonTransformedDimensions(),f=e.x/2,g=e.y/2,h=[{x:-f,y:-g},{x:f,y:-g},{x:-f,y:g},{x:f,y:g}],i=this._calcDimensionsTransformMatrix(a,b,!1);for(c=0;c<h.length;c++)h[c]=fabric.util.transformPoint(h[c],i);return d=fabric.util.makeBoundingBoxFromPoints(h),{x:d.width,y:d.height}},_calculateCurrentDimensions:function(){var a=this.getViewportTransform(),b=this._getTransformedDimensions();return fabric.util.transformPoint(b,a,!0).scalarAdd(2*this.padding)},drawSelectionBackground:function(b){if(!this.selectionBackgroundColor||this.group||!this.active)return this;b.save();var c=this.getCenterPoint(),d=this._calculateCurrentDimensions(),e=this.canvas.viewportTransform;return b.translate(c.x,c.y),b.scale(1/e[0],1/e[3]),b.rotate(a(this.angle)),b.fillStyle=this.selectionBackgroundColor,b.fillRect(-d.x/2,-d.y/2,d.x,d.y),b.restore(),this},drawBorders:function(a){if(!this.hasBorders)return this;var b=this._calculateCurrentDimensions(),c=1/this.borderScaleFactor,d=b.x+c,e=b.y+c;if(a.save(),a.strokeStyle=this.borderColor,this._setLineDash(a,this.borderDashArray,null),a.strokeRect(-d/2,-e/2,d,e),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var f=-e/2;a.beginPath(),a.moveTo(0,f),a.lineTo(0,f-this.rotatingPointOffset),a.closePath(),a.stroke()}return a.restore(),this},drawBordersInGroup:function(a,b){if(!this.hasBorders)return this;var c=this._getNonTransformedDimensions(),d=fabric.util.customTransformMatrix(b.scaleX,b.scaleY,b.skewX),e=fabric.util.transformPoint(c,d),f=1/this.borderScaleFactor,g=e.x+f,h=e.y+f;return a.save(),this._setLineDash(a,this.borderDashArray,null),a.strokeStyle=this.borderColor,a.strokeRect(-g/2,-h/2,g,h),a.restore(),this},drawControls:function(a){if(!this.hasControls)return this;var b=this._calculateCurrentDimensions(),c=b.x,d=b.y,e=this.cornerSize,f=-(c+e)/2,g=-(d+e)/2,h=this.transparentCorners?"stroke":"fill";return a.save(),a.strokeStyle=a.fillStyle=this.cornerColor,this.transparentCorners||(a.strokeStyle=this.cornerStrokeColor),this._setLineDash(a,this.cornerDashArray,null),this._drawControl("tl",a,h,f,g),this._drawControl("tr",a,h,f+c,g),this._drawControl("bl",a,h,f,g+d),this._drawControl("br",a,h,f+c,g+d),this.get("lockUniScaling")||(this._drawControl("mt",a,h,f+c/2,g),this._drawControl("mb",a,h,f+c/2,g+d),this._drawControl("mr",a,h,f+c,g+d/2),this._drawControl("ml",a,h,f,g+d/2)),this.hasRotatingPoint&&this._drawControl("mtr",a,h,f+c/2,g-this.rotatingPointOffset),a.restore(),this},_drawControl:function(a,c,d,e,f){if(this.isControlVisible(a)){var g=this.cornerSize,h=!this.transparentCorners&&this.cornerStrokeColor;switch(this.cornerStyle){case"circle":c.beginPath(),c.arc(e+g/2,f+g/2,g/2,0,2*Math.PI,!1),c[d](),h&&c.stroke();break;default:b()||this.transparentCorners||c.clearRect(e,f,g,g),c[d+"Rect"](e,f,g,g),h&&c.strokeRect(e,f,g,g)}}},isControlVisible:function(a){return this._getControlsVisibility()[a]},setControlVisible:function(a,b){return this._getControlsVisibility()[a]=b,this},setControlsVisibility:function(a){a||(a={});for(var b in a)this.setControlVisible(b,a[b]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(a,b){b=b||{};var c=function(){},d=b.onComplete||c,e=b.onChange||c,f=this;return fabric.util.animate({startValue:a.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(b){a.set("left",b),f.renderAll(),e()},onComplete:function(){a.setCoords(),d()}}),this},fxCenterObjectV:function(a,b){b=b||{};var c=function(){},d=b.onComplete||c,e=b.onChange||c,f=this;return fabric.util.animate({startValue:a.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(b){a.set("top",b),f.renderAll(),e()},onComplete:function(){a.setCoords(),d()}}),this},fxRemove:function(a,b){b=b||{};var c=function(){},d=b.onComplete||c,e=b.onChange||c,f=this;return fabric.util.animate({startValue:a.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){a.set("active",!1)},onChange:function(b){a.set("opacity",b),f.renderAll(),e()},onComplete:function(){f.remove(a),d()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var a,b,c=[];for(a in arguments[0])c.push(a);for(var d=0,e=c.length;d<e;d++)a=c[d],b=d!==e-1,this._animate(a,arguments[0][a],arguments[1],b)}else this._animate.apply(this,arguments);return this},_animate:function(a,b,c,d){var e,f=this;b=b.toString(),c=c?fabric.util.object.clone(c):{},~a.indexOf(".")&&(e=a.split("."));var g=e?this.get(e[0])[e[1]]:this.get(a);"from"in c||(c.from=g),b=~b.indexOf("=")?g+parseFloat(b.replace("=","")):parseFloat(b),fabric.util.animate({startValue:c.from,endValue:b,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(){return c.abort.call(f)},onChange:function(b){e?f[e[0]][e[1]]=b:f.set(a,b),d||c.onChange&&c.onChange()},onComplete:function(){d||(f.setCoords(),c.onComplete&&c.onComplete())}})}}),function(a){"use strict";function b(a,b){var c=a.origin,d=a.axis1,e=a.axis2,f=a.dimension,g=b.nearest,h=b.center,i=b.farthest;return function(){switch(this.get(c)){case g:return Math.min(this.get(d),this.get(e));case h:return Math.min(this.get(d),this.get(e))+.5*this.get(f);case i:return Math.max(this.get(d),this.get(e))}}}var c=a.fabric||(a.fabric={}),d=c.util.object.extend,e=c.util.object.clone,f={x1:1,x2:1,y1:1,y2:1},g=c.StaticCanvas.supports("setLineDash");if(c.Line)return void c.warn("fabric.Line is already defined");var h=c.Object.prototype.cacheProperties.concat();h.push("x1","x2","y1","y2"),c.Line=c.util.createClass(c.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:h,initialize:function(a,b){a||(a=[0,0,0,0]),this.callSuper("initialize",b),this.set("x1",a[0]),this.set("y1",a[1]),this.set("x2",a[2]),this.set("y2",a[3]),this._setWidthHeight(b)},_setWidthHeight:function(a){a||(a={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in a?a.left:this._getLeftToOriginX(),this.top="top"in a?a.top:this._getTopToOriginY()},_set:function(a,b){return this.callSuper("_set",a,b),void 0!==f[a]&&this._setWidthHeight(),this},_getLeftToOriginX:b({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:b({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(a,b){if(a.beginPath(),b){var c=this.getCenterPoint();a.translate(c.x-this.strokeWidth/2,c.y-this.strokeWidth/2)}if(!this.strokeDashArray||this.strokeDashArray&&g){var d=this.calcLinePoints();a.moveTo(d.x1,d.y1),a.lineTo(d.x2,d.y2)}a.lineWidth=this.strokeWidth;var e=a.strokeStyle;a.strokeStyle=this.stroke||a.fillStyle,this.stroke&&this._renderStroke(a),a.strokeStyle=e},_renderDashedStroke:function(a){var b=this.calcLinePoints();a.beginPath(),c.util.drawDashedLine(a,b.x1,b.y1,b.x2,b.y2,this.strokeDashArray),a.closePath()},toObject:function(a){return d(this.callSuper("toObject",a),this.calcLinePoints())},_getNonTransformedDimensions:function(){var a=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===a.x&&(a.y-=this.strokeWidth),0===a.y&&(a.x-=this.strokeWidth)),a},calcLinePoints:function(){var a=this.x1<=this.x2?-1:1,b=this.y1<=this.y2?-1:1,c=a*this.width*.5,d=b*this.height*.5;return{x1:c,x2:a*this.width*-.5,y1:d,y2:b*this.height*-.5}},toSVG:function(a){var b=this._createBaseSVGMarkup(),c={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};return this.group&&"path-group"===this.group.type||(c=this.calcLinePoints()),b.push("<line ",this.getSvgId(),'x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),a?a(b.join("")):b.join("")},complexity:function(){return 1}}),c.Line.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),c.Line.fromElement=function(a,b){b=b||{};var e=c.parseAttributes(a,c.Line.ATTRIBUTE_NAMES),f=[e.x1||0,e.y1||0,e.x2||0,e.y2||0];return b.originX="left",b.originY="top",new c.Line(f,d(e,b))},c.Line.fromObject=function(a,b,d){function f(a){delete a.points,b&&b(a)}var g=e(a,!0);g.points=[a.x1,a.y1,a.x2,a.y2];var h=c.Object._fromObject("Line",g,f,d,"points");return h&&delete h.points,h}}("undefined"!=typeof exports?exports:this),function(a){"use strict";function b(a){return"radius"in a&&a.radius>=0}var c=a.fabric||(a.fabric={}),d=Math.PI,e=c.util.object.extend;if(c.Circle)return void c.warn("fabric.Circle is already defined.");var f=c.Object.prototype.cacheProperties.concat();f.push("radius"),c.Circle=c.util.createClass(c.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*d,cacheProperties:f,initialize:function(a){this.callSuper("initialize",a),this.set("radius",a&&a.radius||0)},_set:function(a,b){return this.callSuper("_set",a,b),"radius"===a&&this.setRadius(b),this},toObject:function(a){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(a))},toSVG:function(a){var b=this._createBaseSVGMarkup(),c=0,e=0,f=(this.endAngle-this.startAngle)%(2*d);if(0===f)this.group&&"path-group"===this.group.type&&(c=this.left+this.radius,e=this.top+this.radius),b.push("<circle ",this.getSvgId(),'cx="'+c+'" cy="'+e+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var g=Math.cos(this.startAngle)*this.radius,h=Math.sin(this.startAngle)*this.radius,i=Math.cos(this.endAngle)*this.radius,j=Math.sin(this.endAngle)*this.radius,k=f>d?"1":"0";b.push('<path d="M '+g+" "+h," A "+this.radius+" "+this.radius," 0 ",+k+" 1"," "+i+" "+j,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return a?a(b.join("")):b.join("")},_render:function(a,b){a.beginPath(),a.arc(b?this.left+this.radius:0,b?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(a),this._renderStroke(a)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(a){return this.radius=a,this.set("width",2*a).set("height",2*a)},complexity:function(){return 1}}),c.Circle.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),c.Circle.fromElement=function(a,d){d||(d={});var f=c.parseAttributes(a,c.Circle.ATTRIBUTE_NAMES);if(!b(f))throw new Error("value of `r` attribute is required and can not be negative");f.left=f.left||0,f.top=f.top||0;var g=new c.Circle(e(f,d));return g.left-=g.radius,g.top-=g.radius,g},c.Circle.fromObject=function(a,b,d){return c.Object._fromObject("Circle",a,b,d)}}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={});b.Triangle?b.warn("fabric.Triangle is already defined"):(b.Triangle=b.util.createClass(b.Object,{type:"triangle",initialize:function(a){this.callSuper("initialize",a),this.set("width",a&&a.width||100).set("height",a&&a.height||100)},_render:function(a){var b=this.width/2,c=this.height/2;a.beginPath(),a.moveTo(-b,c),a.lineTo(0,-c),a.lineTo(b,c),a.closePath(),this._renderFill(a),this._renderStroke(a)},_renderDashedStroke:function(a){var c=this.width/2,d=this.height/2;a.beginPath(),b.util.drawDashedLine(a,-c,d,0,-d,this.strokeDashArray),b.util.drawDashedLine(a,0,-d,c,d,this.strokeDashArray),b.util.drawDashedLine(a,c,d,-c,d,this.strokeDashArray),a.closePath()},toSVG:function(a){var b=this._createBaseSVGMarkup(),c=this.width/2,d=this.height/2,e=[-c+" "+d,"0 "+-d,c+" "+d].join(",");return b.push("<polygon ",this.getSvgId(),'points="',e,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),a?a(b.join("")):b.join("")},complexity:function(){return 1}}),b.Triangle.fromObject=function(a,c,d){return b.Object._fromObject("Triangle",a,c,d)})}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=2*Math.PI,d=b.util.object.extend;if(b.Ellipse)return void b.warn("fabric.Ellipse is already defined.");var e=b.Object.prototype.cacheProperties.concat();e.push("rx","ry"),b.Ellipse=b.util.createClass(b.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:e,initialize:function(a){this.callSuper("initialize",a),this.set("rx",a&&a.rx||0),this.set("ry",a&&a.ry||0)},_set:function(a,b){switch(this.callSuper("_set",a,b),a){case"rx":this.rx=b,this.set("width",2*b);break;case"ry":this.ry=b,this.set("height",2*b)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(a){return this.callSuper("toObject",["rx","ry"].concat(a))},toSVG:function(a){var b=this._createBaseSVGMarkup(),c=0,d=0;return this.group&&"path-group"===this.group.type&&(c=this.left+this.rx,d=this.top+this.ry),b.push("<ellipse ",this.getSvgId(),'cx="',c,'" cy="',d,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),a?a(b.join("")):b.join("")},_render:function(a,b){a.beginPath(),a.save(),a.transform(1,0,0,this.ry/this.rx,0,0),a.arc(b?this.left+this.rx:0,b?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,c,!1),a.restore(),this._renderFill(a),this._renderStroke(a)},complexity:function(){return 1}}),b.Ellipse.ATTRIBUTE_NAMES=b.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),b.Ellipse.fromElement=function(a,c){c||(c={});var e=b.parseAttributes(a,b.Ellipse.ATTRIBUTE_NAMES);e.left=e.left||0,e.top=e.top||0;var f=new b.Ellipse(d(e,c));return f.top-=f.ry,f.left-=f.rx,f},b.Ellipse.fromObject=function(a,c,d){return b.Object._fromObject("Ellipse",a,c,d)}}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend;if(b.Rect)return void b.warn("fabric.Rect is already defined");var d=b.Object.prototype.stateProperties.concat();d.push("rx","ry"),b.Rect=b.util.createClass(b.Object,{stateProperties:d,type:"rect",rx:0,ry:0,strokeDashArray:null,initialize:function(a){this.callSuper("initialize",a),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(a,b){if(1===this.width&&1===this.height)return void a.fillRect(-.5,-.5,1,1);var c=this.rx?Math.min(this.rx,this.width/2):0,d=this.ry?Math.min(this.ry,this.height/2):0,e=this.width,f=this.height,g=b?this.left:-this.width/2,h=b?this.top:-this.height/2,i=0!==c||0!==d,j=.4477152502;a.beginPath(),a.moveTo(g+c,h),a.lineTo(g+e-c,h),i&&a.bezierCurveTo(g+e-j*c,h,g+e,h+j*d,g+e,h+d),a.lineTo(g+e,h+f-d),i&&a.bezierCurveTo(g+e,h+f-j*d,g+e-j*c,h+f,g+e-c,h+f),a.lineTo(g+c,h+f),i&&a.bezierCurveTo(g+j*c,h+f,g,h+f-j*d,g,h+f-d),a.lineTo(g,h+d),i&&a.bezierCurveTo(g,h+j*d,g+j*c,h,g+c,h),a.closePath(),this._renderFill(a),this._renderStroke(a)},_renderDashedStroke:function(a){var c=-this.width/2,d=-this.height/2,e=this.width,f=this.height;a.beginPath(),b.util.drawDashedLine(a,c,d,c+e,d,this.strokeDashArray),b.util.drawDashedLine(a,c+e,d,c+e,d+f,this.strokeDashArray),b.util.drawDashedLine(a,c+e,d+f,c,d+f,this.strokeDashArray),b.util.drawDashedLine(a,c,d+f,c,d,this.strokeDashArray),a.closePath()},toObject:function(a){return this.callSuper("toObject",["rx","ry"].concat(a))},toSVG:function(a){var b=this._createBaseSVGMarkup(),c=this.left,d=this.top;return this.group&&"path-group"===this.group.type||(c=-this.width/2,d=-this.height/2),b.push("<rect ",this.getSvgId(),'x="',c,'" y="',d,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),a?a(b.join("")):b.join("")},complexity:function(){return 1}}),b.Rect.ATTRIBUTE_NAMES=b.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),b.Rect.fromElement=function(a,d){if(!a)return null;d=d||{};var e=b.parseAttributes(a,b.Rect.ATTRIBUTE_NAMES);e.left=e.left||0,e.top=e.top||0;var f=new b.Rect(c(d?b.util.object.clone(d):{},e));return f.visible=f.visible&&f.width>0&&f.height>0,f},b.Rect.fromObject=function(a,c,d){return b.Object._fromObject("Rect",a,c,d)}}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={});if(b.Polyline)return void b.warn("fabric.Polyline is already defined");var c=b.Object.prototype.cacheProperties.concat();c.push("points"),b.Polyline=b.util.createClass(b.Object,{type:"polyline",points:null,minX:0,minY:0,cacheProperties:c,initialize:function(a,c){return b.Polygon.prototype.initialize.call(this,a,c)},_calcDimensions:function(){return b.Polygon.prototype._calcDimensions.call(this)},toObject:function(a){return b.Polygon.prototype.toObject.call(this,a)},toSVG:function(a){return b.Polygon.prototype.toSVG.call(this,a)},_render:function(a,c){b.Polygon.prototype.commonRender.call(this,a,c)&&(this._renderFill(a),this._renderStroke(a))},_renderDashedStroke:function(a){var c,d;a.beginPath();for(var e=0,f=this.points.length;e<f;e++)c=this.points[e],d=this.points[e+1]||c,b.util.drawDashedLine(a,c.x,c.y,d.x,d.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),b.Polyline.ATTRIBUTE_NAMES=b.SHARED_ATTRIBUTES.concat(),b.Polyline.fromElement=function(a,c){if(!a)return null;c||(c={});var d=b.parsePointsAttribute(a.getAttribute("points")),e=b.parseAttributes(a,b.Polyline.ATTRIBUTE_NAMES);return new b.Polyline(d,b.util.object.extend(e,c))},b.Polyline.fromObject=function(a,c,d){return b.Object._fromObject("Polyline",a,c,d,"points")}}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.util.array.min,e=b.util.array.max,f=b.util.toFixed;if(b.Polygon)return void b.warn("fabric.Polygon is already defined");var g=b.Object.prototype.cacheProperties.concat();g.push("points"),b.Polygon=b.util.createClass(b.Object,{type:"polygon",points:null,minX:0,minY:0,cacheProperties:g,initialize:function(a,b){b=b||{},this.points=a||[],this.callSuper("initialize",b),this._calcDimensions(),"top"in b||(this.top=this.minY),"left"in b||(this.left=this.minX),this.pathOffset={x:this.minX+this.width/2,y:this.minY+this.height/2}},_calcDimensions:function(){var a=this.points,b=d(a,"x"),c=d(a,"y"),f=e(a,"x"),g=e(a,"y");this.width=f-b||0,this.height=g-c||0,this.minX=b||0,this.minY=c||0},toObject:function(a){return c(this.callSuper("toObject",a),{points:this.points.concat()})},toSVG:function(a){for(var b,c=[],d=this._createBaseSVGMarkup(),e=0,g=this.points.length;e<g;e++)c.push(f(this.points[e].x,2),",",f(this.points[e].y,2)," ");return this.group&&"path-group"===this.group.type||(b=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),d.push("<",this.type," ",this.getSvgId(),'points="',c.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),b," ",this.getSvgTransformMatrix(),'"/>\n'),a?a(d.join("")):d.join("")},_render:function(a,b){this.commonRender(a,b)&&(this._renderFill(a),(this.stroke||this.strokeDashArray)&&(a.closePath(),this._renderStroke(a)))},commonRender:function(a,b){var c,d=this.points.length,e=b?0:this.pathOffset.x,f=b?0:this.pathOffset.y;if(!d||isNaN(this.points[d-1].y))return!1;a.beginPath(),a.moveTo(this.points[0].x-e,this.points[0].y-f);for(var g=0;g<d;g++)c=this.points[g],a.lineTo(c.x-e,c.y-f);return!0},_renderDashedStroke:function(a){b.Polyline.prototype._renderDashedStroke.call(this,a),a.closePath()},complexity:function(){return this.points.length}}),b.Polygon.ATTRIBUTE_NAMES=b.SHARED_ATTRIBUTES.concat(),b.Polygon.fromElement=function(a,d){if(!a)return null;d||(d={});var e=b.parsePointsAttribute(a.getAttribute("points")),f=b.parseAttributes(a,b.Polygon.ATTRIBUTE_NAMES);return new b.Polygon(e,c(f,d))},b.Polygon.fromObject=function(a,c,d){return b.Object._fromObject("Polygon",a,c,d,"points")}}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.array.min,d=b.util.array.max,e=b.util.object.extend,f=Object.prototype.toString,g=b.util.drawArc,h={m:2,l:2,h:1,v:1,c:6,
s:4,q:4,t:2,a:7},i={m:"l",M:"L"};if(b.Path)return void b.warn("fabric.Path is already defined");var j=b.Object.prototype.cacheProperties.concat();j.push("path"),b.Path=b.util.createClass(b.Object,{type:"path",path:null,minX:0,minY:0,cacheProperties:j,initialize:function(a,b){b=b||{},b&&this.setOptions(b),a||(a=[]);var c="[object Array]"===f.call(a);this.path=c?a:a.match&&a.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(c||(this.path=this._parsePath()),this._setPositionDimensions(b),b.sourcePath&&this.setSourcePath(b.sourcePath),this.objectCaching&&(this._createCacheCanvas(),this.setupState({propertySet:"cacheProperties"})))},_setPositionDimensions:function(a){var b=this._parseDimensions();this.minX=b.left,this.minY=b.top,this.width=b.width,this.height=b.height,void 0===a.left&&(this.left=b.left+("center"===this.originX?this.width/2:"right"===this.originX?this.width:0)),void 0===a.top&&(this.top=b.top+("center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0)),this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_renderPathCommands:function(a){var b,c,d,e=null,f=0,h=0,i=0,j=0,k=0,l=0,m=-this.pathOffset.x,n=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(m=0,n=0),a.beginPath();for(var o=0,p=this.path.length;o<p;++o){switch(b=this.path[o],b[0]){case"l":i+=b[1],j+=b[2],a.lineTo(i+m,j+n);break;case"L":i=b[1],j=b[2],a.lineTo(i+m,j+n);break;case"h":i+=b[1],a.lineTo(i+m,j+n);break;case"H":i=b[1],a.lineTo(i+m,j+n);break;case"v":j+=b[1],a.lineTo(i+m,j+n);break;case"V":j=b[1],a.lineTo(i+m,j+n);break;case"m":i+=b[1],j+=b[2],f=i,h=j,a.moveTo(i+m,j+n);break;case"M":i=b[1],j=b[2],f=i,h=j,a.moveTo(i+m,j+n);break;case"c":c=i+b[5],d=j+b[6],k=i+b[3],l=j+b[4],a.bezierCurveTo(i+b[1]+m,j+b[2]+n,k+m,l+n,c+m,d+n),i=c,j=d;break;case"C":i=b[5],j=b[6],k=b[3],l=b[4],a.bezierCurveTo(b[1]+m,b[2]+n,k+m,l+n,i+m,j+n);break;case"s":c=i+b[3],d=j+b[4],null===e[0].match(/[CcSs]/)?(k=i,l=j):(k=2*i-k,l=2*j-l),a.bezierCurveTo(k+m,l+n,i+b[1]+m,j+b[2]+n,c+m,d+n),k=i+b[1],l=j+b[2],i=c,j=d;break;case"S":c=b[3],d=b[4],null===e[0].match(/[CcSs]/)?(k=i,l=j):(k=2*i-k,l=2*j-l),a.bezierCurveTo(k+m,l+n,b[1]+m,b[2]+n,c+m,d+n),i=c,j=d,k=b[1],l=b[2];break;case"q":c=i+b[3],d=j+b[4],k=i+b[1],l=j+b[2],a.quadraticCurveTo(k+m,l+n,c+m,d+n),i=c,j=d;break;case"Q":c=b[3],d=b[4],a.quadraticCurveTo(b[1]+m,b[2]+n,c+m,d+n),i=c,j=d,k=b[1],l=b[2];break;case"t":c=i+b[1],d=j+b[2],null===e[0].match(/[QqTt]/)?(k=i,l=j):(k=2*i-k,l=2*j-l),a.quadraticCurveTo(k+m,l+n,c+m,d+n),i=c,j=d;break;case"T":c=b[1],d=b[2],null===e[0].match(/[QqTt]/)?(k=i,l=j):(k=2*i-k,l=2*j-l),a.quadraticCurveTo(k+m,l+n,c+m,d+n),i=c,j=d;break;case"a":g(a,i+m,j+n,[b[1],b[2],b[3],b[4],b[5],b[6]+i+m,b[7]+j+n]),i+=b[6],j+=b[7];break;case"A":g(a,i+m,j+n,[b[1],b[2],b[3],b[4],b[5],b[6]+m,b[7]+n]),i=b[6],j=b[7];break;case"z":case"Z":i=f,j=h,a.closePath()}e=b}},_render:function(a){this._renderPathCommands(a),this._renderFill(a),this._renderStroke(a)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(a){return e(this.callSuper("toObject",["sourcePath","pathOffset"].concat(a)),{path:this.path.map(function(a){return a.slice()})})},toDatalessObject:function(a){var b=this.toObject(a);return this.sourcePath&&(b.path=this.sourcePath),delete b.sourcePath,b},toSVG:function(a){for(var b=[],c=this._createBaseSVGMarkup(),d="",e=0,f=this.path.length;e<f;e++)b.push(this.path[e].join(" "));var g=b.join(" ");return this.group&&"path-group"===this.group.type||(d=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),c.push("<path ",this.getSvgId(),'d="',g,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),d,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),a?a(c.join("")):c.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var a,b,c,d,e,f=[],g=[],j=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,k=0,l=this.path.length;k<l;k++){for(a=this.path[k],d=a.slice(1).trim(),g.length=0;c=j.exec(d);)g.push(c[0]);e=[a.charAt(0)];for(var m=0,n=g.length;m<n;m++)b=parseFloat(g[m]),isNaN(b)||e.push(b);var o=e[0],p=h[o.toLowerCase()],q=i[o]||o;if(e.length-1>p)for(var r=1,s=e.length;r<s;r+=p)f.push([o].concat(e.slice(r,r+p))),o=q;else f.push(e)}return f},_parseDimensions:function(){for(var a,e,f,g,h=[],i=[],j=null,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=this.path.length;q<r;++q){switch(a=this.path[q],a[0]){case"l":m+=a[1],n+=a[2],g=[];break;case"L":m=a[1],n=a[2],g=[];break;case"h":m+=a[1],g=[];break;case"H":m=a[1],g=[];break;case"v":n+=a[1],g=[];break;case"V":n=a[1],g=[];break;case"m":m+=a[1],n+=a[2],k=m,l=n,g=[];break;case"M":m=a[1],n=a[2],k=m,l=n,g=[];break;case"c":e=m+a[5],f=n+a[6],o=m+a[3],p=n+a[4],g=b.util.getBoundsOfCurve(m,n,m+a[1],n+a[2],o,p,e,f),m=e,n=f;break;case"C":m=a[5],n=a[6],o=a[3],p=a[4],g=b.util.getBoundsOfCurve(m,n,a[1],a[2],o,p,m,n);break;case"s":e=m+a[3],f=n+a[4],null===j[0].match(/[CcSs]/)?(o=m,p=n):(o=2*m-o,p=2*n-p),g=b.util.getBoundsOfCurve(m,n,o,p,m+a[1],n+a[2],e,f),o=m+a[1],p=n+a[2],m=e,n=f;break;case"S":e=a[3],f=a[4],null===j[0].match(/[CcSs]/)?(o=m,p=n):(o=2*m-o,p=2*n-p),g=b.util.getBoundsOfCurve(m,n,o,p,a[1],a[2],e,f),m=e,n=f,o=a[1],p=a[2];break;case"q":e=m+a[3],f=n+a[4],o=m+a[1],p=n+a[2],g=b.util.getBoundsOfCurve(m,n,o,p,o,p,e,f),m=e,n=f;break;case"Q":o=a[1],p=a[2],g=b.util.getBoundsOfCurve(m,n,o,p,o,p,a[3],a[4]),m=a[3],n=a[4];break;case"t":e=m+a[1],f=n+a[2],null===j[0].match(/[QqTt]/)?(o=m,p=n):(o=2*m-o,p=2*n-p),g=b.util.getBoundsOfCurve(m,n,o,p,o,p,e,f),m=e,n=f;break;case"T":e=a[1],f=a[2],null===j[0].match(/[QqTt]/)?(o=m,p=n):(o=2*m-o,p=2*n-p),g=b.util.getBoundsOfCurve(m,n,o,p,o,p,e,f),m=e,n=f;break;case"a":g=b.util.getBoundsOfArc(m,n,a[1],a[2],a[3],a[4],a[5],a[6]+m,a[7]+n),m+=a[6],n+=a[7];break;case"A":g=b.util.getBoundsOfArc(m,n,a[1],a[2],a[3],a[4],a[5],a[6],a[7]),m=a[6],n=a[7];break;case"z":case"Z":m=k,n=l}j=a,g.forEach(function(a){h.push(a.x),i.push(a.y)}),h.push(m),i.push(n)}var s=c(h)||0,t=c(i)||0;return{left:s,top:t,width:(d(h)||0)-s,height:(d(i)||0)-t}}}),b.Path.fromObject=function(a,c,d){var e;return"string"!=typeof a.path?b.Object._fromObject("Path",a,c,d,"path"):void b.loadSVGFromURL(a.path,function(d){var f=a.path;e=d[0],delete a.path,b.util.object.extend(e,a),e.setSourcePath(f),c&&c(e)})},b.Path.ATTRIBUTE_NAMES=b.SHARED_ATTRIBUTES.concat(["d"]),b.Path.fromElement=function(a,c,d){var f=b.parseAttributes(a,b.Path.ATTRIBUTE_NAMES);c&&c(new b.Path(f.d,e(f,d)))},b.Path.async=!0}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend;b.PathGroup?b.warn("fabric.PathGroup is already defined"):(b.PathGroup=b.util.createClass(b.Object,{type:"path-group",fill:"",initialize:function(a,b){b=b||{},this.paths=a||[];for(var c=this.paths.length;c--;)this.paths[c].group=this;b.toBeParsed&&(this.parseDimensionsFromPaths(b),delete b.toBeParsed),this.setOptions(b),this.setCoords(),b.sourcePath&&this.setSourcePath(b.sourcePath),this.objectCaching&&(this._createCacheCanvas(),this.setupState({propertySet:"cacheProperties"}))},parseDimensionsFromPaths:function(a){for(var c,d,e,f,g,h,i=[],j=[],k=this.paths.length;k--;){e=this.paths[k],f=e.height+e.strokeWidth,g=e.width+e.strokeWidth,c=[{x:e.left,y:e.top},{x:e.left+g,y:e.top},{x:e.left,y:e.top+f},{x:e.left+g,y:e.top+f}],h=this.paths[k].transformMatrix;for(var l=0;l<c.length;l++)d=c[l],h&&(d=b.util.transformPoint(d,h,!1)),i.push(d.x),j.push(d.y)}a.width=Math.max.apply(null,i),a.height=Math.max.apply(null,j)},drawObject:function(a){a.save(),a.translate(-this.width/2,-this.height/2);for(var b=0,c=this.paths.length;b<c;++b)this.paths[b].render(a,!0);a.restore()},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var a=0,b=this.paths.length;a<b;a++)if(this.paths[a].isCacheDirty(!0)){var c=this._getNonTransformedDimensions();return this._cacheContext.clearRect(-c.x/2,-c.y/2,c.x,c.y),!0}return!1},_set:function(a,b){if("fill"===a&&b&&this.isSameColor())for(var c=this.paths.length;c--;)this.paths[c]._set(a,b);return this.callSuper("_set",a,b)},toObject:function(a){var b=this.paths.map(function(b){var c=b.includeDefaultValues;b.includeDefaultValues=b.group.includeDefaultValues;var d=b.toObject(a);return b.includeDefaultValues=c,d});return c(this.callSuper("toObject",["sourcePath"].concat(a)),{paths:b})},toDatalessObject:function(a){var b=this.toObject(a);return this.sourcePath&&(b.paths=this.sourcePath),b},toSVG:function(a){var b=this.getObjects(),c=this.getPointByOrigin("left","top"),d="translate("+c.x+" "+c.y+")",e=this._createBaseSVGMarkup();e.push("<g ",this.getSvgId(),'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),d,this.getSvgTransform(),'" ',">\n");for(var f=0,g=b.length;f<g;f++)e.push("\t",b[f].toSVG(a));return e.push("</g>\n"),a?a(e.join("")):e.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var a=this.getObjects()[0].get("fill")||"";return"string"==typeof a&&(a=a.toLowerCase(),this.getObjects().every(function(b){var c=b.get("fill")||"";return"string"==typeof c&&c.toLowerCase()===a}))},complexity:function(){return this.paths.reduce(function(a,b){return a+(b&&b.complexity?b.complexity():0)},0)},getObjects:function(){return this.paths}}),b.PathGroup.fromObject=function(a,c){"string"==typeof a.paths?b.loadSVGFromURL(a.paths,function(d){var e=a.paths;delete a.paths;var f=b.util.groupSVGElements(d,a,e);c(f)}):b.util.enlivenObjects(a.paths,function(d){delete a.paths,c(new b.PathGroup(d,a))})},b.PathGroup.async=!0)}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.util.array.min,e=b.util.array.max;if(!b.Group){var f={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};b.Group=b.util.createClass(b.Object,b.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,initialize:function(a,b,c){b=b||{},this._objects=[],c&&this.callSuper("initialize",b),this._objects=a||[];for(var d=this._objects.length;d--;)this._objects[d].group=this;this.originalState={},b.originX&&(this.originX=b.originX),b.originY&&(this.originY=b.originY),c?this._updateObjectsCoords(!0):(this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",b)),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(a){for(var b=this.getCenterPoint(),c=this._objects.length;c--;)this._updateObjectCoords(this._objects[c],b,a)},_updateObjectCoords:function(a,b,c){if(a.__origHasControls=a.hasControls,a.hasControls=!1,!c){var d=a.getLeft(),e=a.getTop();a.set({originalLeft:d,originalTop:e,left:d-b.x,top:e-b.y}),a.setCoords(!0)}},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(a){return this._restoreObjectsState(),b.util.resetObjectTransform(this),a&&(this._objects.push(a),a.group=this,a._set("canvas",this.canvas)),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,this},_setObjectActive:function(a){a.set("active",!0),a.group=this},removeWithUpdate:function(a){return this._restoreObjectsState(),b.util.resetObjectTransform(this),this.forEachObject(this._setObjectActive,this),this.remove(a),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,this},_onObjectAdded:function(a){this.dirty=!0,a.group=this,a._set("canvas",this.canvas)},_onObjectRemoved:function(a){this.dirty=!0,delete a.group,a.set("active",!1)},delegatedProperties:{fill:!0,stroke:!0,strokeWidth:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(a,b){var c=this._objects.length;if(this.delegatedProperties[a]||"canvas"===a)for(;c--;)this._objects[c].set(a,b);else for(;c--;)this._objects[c].setOnGroup(a,b);this.callSuper("_set",a,b)},toObject:function(a){var b=this.getObjects().map(function(b){var c=b.includeDefaultValues;b.includeDefaultValues=b.group.includeDefaultValues;var d=b.toObject(a);return b.includeDefaultValues=c,d});return c(this.callSuper("toObject",a),{objects:b})},render:function(a){this._transformDone=!0,this.callSuper("render",a),this._transformDone=!1},drawObject:function(a){for(var b=0,c=this._objects.length;b<c;b++)this._renderObject(this._objects[b],a)},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var a=0,b=this._objects.length;a<b;a++)if(this._objects[a].isCacheDirty(!0)){var c=this._getNonTransformedDimensions();return this._cacheContext.clearRect(-c.x/2,-c.y/2,c.x,c.y),!0}return!1},_renderControls:function(a,b){a.save(),a.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",a,b);for(var c=0,d=this._objects.length;c<d;c++)this._objects[c]._renderControls(a);a.restore()},_renderObject:function(a,b){if(a.visible){var c=a.hasRotatingPoint;a.hasRotatingPoint=!1,a.render(b),a.hasRotatingPoint=c}},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(a){var c=a.calcTransformMatrix(),d=b.util.qrDecompose(c),e=new b.Point(d.translateX,d.translateY);return a.flipX=!1,a.flipY=!1,a.set("scaleX",d.scaleX),a.set("scaleY",d.scaleY),a.skewX=d.skewX,a.skewY=d.skewY,a.angle=d.angle,a.setPositionByOrigin(e,"center","center"),a},_restoreObjectState:function(a){return this.realizeTransform(a),a.setCoords(),a.hasControls=a.__origHasControls,delete a.__origHasControls,a.set("active",!1),delete a.group,this},destroy:function(){return this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(a){a.setCoords(!0)}),this},_calcBounds:function(a){for(var b,c,d,e=[],f=[],g=["tr","br","bl","tl"],h=0,i=this._objects.length,j=g.length;h<i;++h)for(b=this._objects[h],b.setCoords(!0),d=0;d<j;d++)c=g[d],e.push(b.oCoords[c].x),f.push(b.oCoords[c].y);this.set(this._getBounds(e,f,a))},_getBounds:function(a,c,f){var g=new b.Point(d(a),d(c)),h=new b.Point(e(a),e(c)),i={width:h.x-g.x||0,height:h.y-g.y||0};return f||(i.left=g.x||0,i.top=g.y||0,"center"===this.originX&&(i.left+=i.width/2),"right"===this.originX&&(i.left+=i.width),"center"===this.originY&&(i.top+=i.height/2),"bottom"===this.originY&&(i.top+=i.height)),i},toSVG:function(a){var b=this._createBaseSVGMarkup();b.push("<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'" style="',this.getSvgFilter(),'">\n');for(var c=0,d=this._objects.length;c<d;c++)b.push("\t",this._objects[c].toSVG(a));return b.push("</g>\n"),a?a(b.join("")):b.join("")},get:function(a){if(a in f){if(this[a])return this[a];for(var b=0,c=this._objects.length;b<c;b++)if(this._objects[b][a])return!0;return!1}return a in this.delegatedProperties?this._objects[0]&&this._objects[0].get(a):this[a]}}),b.Group.fromObject=function(a,c){b.util.enlivenObjects(a.objects,function(d){delete a.objects,c&&c(new b.Group(d,a,!0))})},b.Group.async=!0}}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=fabric.util.object.extend;if(a.fabric||(a.fabric={}),a.fabric.Image)return void fabric.warn("fabric.Image is already defined.");var c=fabric.Object.prototype.stateProperties.concat();c.push("alignX","alignY","meetOrSlice"),fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",strokeWidth:0,_lastScaleX:1,_lastScaleY:1,minimumScaleTrigger:.5,stateProperties:c,objectCaching:!1,initialize:function(a,b,c){b||(b={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",b),this._initElement(a,b,c)},getElement:function(){return this._element},setElement:function(a,b,c){var d,e;return this._element=a,this._originalElement=a,this._initConfig(c),0===this.resizeFilters.length?d=b:(e=this,d=function(){e.applyFilters(b,e.resizeFilters,e._filteredEl||e._originalElement,!0)}),0!==this.filters.length?this.applyFilters(d):d&&d(this),this},setCrossOrigin:function(a){return this.crossOrigin=a,this._element.crossOrigin=a,this},getOriginalSize:function(){var a=this.getElement();return{width:a.width,height:a.height}},_stroke:function(a){if(this.stroke&&0!==this.strokeWidth){var b=this.width/2,c=this.height/2;a.beginPath(),a.moveTo(-b,-c),a.lineTo(b,-c),a.lineTo(b,c),a.lineTo(-b,c),a.lineTo(-b,-c),a.closePath()}},_renderDashedStroke:function(a){var b=-this.width/2,c=-this.height/2,d=this.width,e=this.height;a.save(),this._setStrokeStyles(a),a.beginPath(),fabric.util.drawDashedLine(a,b,c,b+d,c,this.strokeDashArray),fabric.util.drawDashedLine(a,b+d,c,b+d,c+e,this.strokeDashArray),fabric.util.drawDashedLine(a,b+d,c+e,b,c+e,this.strokeDashArray),fabric.util.drawDashedLine(a,b,c+e,b,c,this.strokeDashArray),a.closePath(),a.restore()},toObject:function(a){var c=[],d=[],e=1,f=1;this.filters.forEach(function(a){a&&("Resize"===a.type&&(e*=a.scaleX,f*=a.scaleY),c.push(a.toObject()))}),this.resizeFilters.forEach(function(a){a&&d.push(a.toObject())});var g=b(this.callSuper("toObject",["crossOrigin","alignX","alignY","meetOrSlice"].concat(a)),{src:this.getSrc(),filters:c,resizeFilters:d});return g.width/=e,g.height/=f,g},toSVG:function(a){var b=this._createBaseSVGMarkup(),c=-this.width/2,d=-this.height/2,e="none";if(this.group&&"path-group"===this.group.type&&(c=this.left,d=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(e="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),b.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',"<image ",this.getSvgId(),'xlink:href="',this.getSvgSrc(!0),'" x="',c,'" y="',d,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',e,'"',"></image>\n"),this.stroke||this.strokeDashArray){var f=this.fill;this.fill=null,b.push("<rect ",'x="',c,'" y="',d,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=f}return b.push("</g>\n"),a?a(b.join("")):b.join("")},getSrc:function(a){var b=a?this._element:this._originalElement;return b?fabric.isLikelyNode?b._src:b.src:this.src||""},setSrc:function(a,b,c){fabric.util.loadImage(a,function(a){return this.setElement(a,b,c)},this,c&&c.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyFilters:function(a,b,c,d){if(b=b||this.filters,c=c||this._originalElement){var e,f,g=fabric.util.createImage(),h=this.canvas?this.canvas.getRetinaScaling():fabric.devicePixelRatio,i=this.minimumScaleTrigger/h,j=this;if(0===b.length)return this._element=c,a&&a(this),c;var k=fabric.util.createCanvasElement();return k.width=c.width,k.height=c.height,k.getContext("2d").drawImage(c,0,0,c.width,c.height),b.forEach(function(a){a&&(d?(e=j.scaleX<i?j.scaleX:1,f=j.scaleY<i?j.scaleY:1,e*h<1&&(e*=h),f*h<1&&(f*=h)):(e=a.scaleX,f=a.scaleY),a.applyTo(k,e,f),d||"Resize"!==a.type||(j.width*=a.scaleX,j.height*=a.scaleY))}),g.width=k.width,g.height=k.height,fabric.isLikelyNode?(g.src=k.toBuffer(void 0,fabric.Image.pngCompression),j._element=g,!d&&(j._filteredEl=g),a&&a(j)):(g.onload=function(){j._element=g,!d&&(j._filteredEl=g),a&&a(j),g.onload=k=null},g.src=k.toDataURL("image/png")),k}},_render:function(a,b){var c,d,e,f=this._findMargins();c=b?this.left:-this.width/2,d=b?this.top:-this.height/2,"slice"===this.meetOrSlice&&(a.beginPath(),a.rect(c,d,this.width,this.height),a.clip()),!1===this.isMoving&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,e=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):e=this._element,e&&a.drawImage(e,c+f.marginX,d+f.marginY,f.width,f.height),this._stroke(a),this._renderStroke(a)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var a,b,c=this.width,d=this.height,e=0,f=0;return"none"===this.alignX&&"none"===this.alignY||(a=[this.width/this._element.width,this.height/this._element.height],b="meet"===this.meetOrSlice?Math.min.apply(null,a):Math.max.apply(null,a),c=this._element.width*b,d=this._element.height*b,"Mid"===this.alignX&&(e=(this.width-c)/2),"Max"===this.alignX&&(e=this.width-c),"Mid"===this.alignY&&(f=(this.height-d)/2),"Max"===this.alignY&&(f=this.height-d)),{width:c,height:d,marginX:e,marginY:f}},_resetWidthHeight:function(){var a=this.getElement();this.set("width",a.width),this.set("height",a.height)},_initElement:function(a,b,c){this.setElement(fabric.util.getById(a),c,b),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(a){a||(a={}),this.setOptions(a),this._setWidthHeight(a),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(a,b){a&&a.length?fabric.util.enlivenObjects(a,function(a){b&&b(a)},"fabric.Image.filters"):b&&b()},_setWidthHeight:function(a){this.width="width"in a?a.width:this.getElement()?this.getElement().width||0:0,this.height="height"in a?a.height:this.getElement()?this.getElement().height||0:0},complexity:function(){return 1}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(a,b){fabric.util.loadImage(a.src,function(c,d){return d?void(b&&b(null,d)):void fabric.Image.prototype._initFilters.call(a,a.filters,function(d){a.filters=d||[],fabric.Image.prototype._initFilters.call(a,a.resizeFilters,function(d){return a.resizeFilters=d||[],new fabric.Image(c,a,b)})})},null,a.crossOrigin)},fabric.Image.fromURL=function(a,b,c){fabric.util.loadImage(a,function(a){b&&b(new fabric.Image(a,c))},null,c&&c.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href".split(" ")),fabric.Image.fromElement=function(a,c,d){var e,f=fabric.parseAttributes(a,fabric.Image.ATTRIBUTE_NAMES);f.preserveAspectRatio&&(e=fabric.util.parsePreserveAspectRatioAttribute(f.preserveAspectRatio),b(f,e)),fabric.Image.fromURL(f["xlink:href"],c,b(d?fabric.util.object.clone(d):{},f))},fabric.Image.async=!0,fabric.Image.pngCompression=1}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var a=this.getAngle()%360;return a>0?90*Math.round((a-1)/90):90*Math.round(a/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(a){a=a||{};var b=function(){},c=a.onComplete||b,d=a.onChange||b,e=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(a){e.setAngle(a),d()},onComplete:function(){e.setCoords(),c()},onStart:function(){e.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(a){return a.straighten(),this.renderAll(),this},fxStraightenObject:function(a){return a.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(a){a&&this.setOptions(a)},setOptions:function(a){for(var b in a)this[b]=a[b]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(a,b){var c=new fabric.Image.filters[a.type](a);return b&&b(c),c},function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.Image.filters,e=b.util.createClass;d.Brightness=e(d.BaseFilter,{type:"Brightness",initialize:function(a){a=a||{},this.brightness=a.brightness||0},applyTo:function(a){for(var b=a.getContext("2d"),c=b.getImageData(0,0,a.width,a.height),d=c.data,e=this.brightness,f=0,g=d.length;f<g;f+=4)d[f]+=e,d[f+1]+=e,d[f+2]+=e;b.putImageData(c,0,0)},toObject:function(){return c(this.callSuper("toObject"),{brightness:this.brightness})}}),b.Image.filters.Brightness.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.Image.filters,e=b.util.createClass;d.Convolute=e(d.BaseFilter,{type:"Convolute",initialize:function(a){a=a||{},this.opaque=a.opaque,this.matrix=a.matrix||[0,0,0,0,1,0,0,0,0]},applyTo:function(a){for(var b,c,d,e,f,g,h,i,j,k=this.matrix,l=a.getContext("2d"),m=l.getImageData(0,0,a.width,a.height),n=Math.round(Math.sqrt(k.length)),o=Math.floor(n/2),p=m.data,q=m.width,r=m.height,s=l.createImageData(q,r),t=s.data,u=this.opaque?1:0,v=0;v<r;v++)for(var w=0;w<q;w++){f=4*(v*q+w),b=0,c=0,d=0,e=0;for(var x=0;x<n;x++)for(var y=0;y<n;y++)h=v+x-o,g=w+y-o,h<0||h>r||g<0||g>q||(i=4*(h*q+g),j=k[x*n+y],b+=p[i]*j,c+=p[i+1]*j,d+=p[i+2]*j,e+=p[i+3]*j);t[f]=b,t[f+1]=c,t[f+2]=d,t[f+3]=e+u*(255-e)}l.putImageData(s,0,0)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),b.Image.filters.Convolute.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.Image.filters,e=b.util.createClass;d.GradientTransparency=e(d.BaseFilter,{type:"GradientTransparency",initialize:function(a){a=a||{},this.threshold=a.threshold||100},applyTo:function(a){for(var b=a.getContext("2d"),c=b.getImageData(0,0,a.width,a.height),d=c.data,e=this.threshold,f=d.length,g=0,h=d.length;g<h;g+=4)d[g+3]=e+255*(f-g)/f;b.putImageData(c,0,0)},toObject:function(){return c(this.callSuper("toObject"),{threshold:this.threshold})}}),b.Image.filters.GradientTransparency.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.Image.filters,d=b.util.createClass;c.Grayscale=d(c.BaseFilter,{type:"Grayscale",applyTo:function(a){for(var b,c=a.getContext("2d"),d=c.getImageData(0,0,a.width,a.height),e=d.data,f=d.width*d.height*4,g=0;g<f;)b=(e[g]+e[g+1]+e[g+2])/3,e[g]=b,e[g+1]=b,e[g+2]=b,g+=4;c.putImageData(d,0,0)}}),b.Image.filters.Grayscale.fromObject=function(a,c){return a=a||{},a.type="Grayscale",b.Image.filters.BaseFilter.fromObject(a,c)}}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.Image.filters,d=b.util.createClass;c.Invert=d(c.BaseFilter,{type:"Invert",applyTo:function(a){var b,c=a.getContext("2d"),d=c.getImageData(0,0,a.width,a.height),e=d.data,f=e.length;for(b=0;b<f;b+=4)e[b]=255-e[b],e[b+1]=255-e[b+1],e[b+2]=255-e[b+2];c.putImageData(d,0,0)}}),b.Image.filters.Invert.fromObject=function(a,c){return a=a||{},a.type="Invert",b.Image.filters.BaseFilter.fromObject(a,c)}}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.Image.filters,e=b.util.createClass;d.Mask=e(d.BaseFilter,{type:"Mask",initialize:function(a){a=a||{},this.mask=a.mask,this.channel=[0,1,2,3].indexOf(a.channel)>-1?a.channel:0},applyTo:function(a){if(this.mask){var c,d=a.getContext("2d"),e=d.getImageData(0,0,a.width,a.height),f=e.data,g=this.mask.getElement(),h=b.util.createCanvasElement(),i=this.channel,j=e.width*e.height*4;h.width=a.width,h.height=a.height,h.getContext("2d").drawImage(g,0,0,a.width,a.height);var k=h.getContext("2d").getImageData(0,0,a.width,a.height),l=k.data;for(c=0;c<j;c+=4)f[c+3]=l[c+i];d.putImageData(e,0,0)}},toObject:function(){return c(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),b.Image.filters.Mask.fromObject=function(a,c){b.util.loadImage(a.mask.src,function(d){return a.mask=new b.Image(d,a.mask),b.Image.filters.BaseFilter.fromObject(a,c)})},b.Image.filters.Mask.async=!0}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.Image.filters,e=b.util.createClass;d.Noise=e(d.BaseFilter,{type:"Noise",initialize:function(a){a=a||{},this.noise=a.noise||0},applyTo:function(a){for(var b,c=a.getContext("2d"),d=c.getImageData(0,0,a.width,a.height),e=d.data,f=this.noise,g=0,h=e.length;g<h;g+=4)b=(.5-Math.random())*f,e[g]+=b,e[g+1]+=b,e[g+2]+=b;c.putImageData(d,0,0)},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),b.Image.filters.Noise.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.Image.filters,e=b.util.createClass;d.Pixelate=e(d.BaseFilter,{type:"Pixelate",initialize:function(a){a=a||{},this.blocksize=a.blocksize||4},applyTo:function(a){var b,c,d,e,f,g,h,i=a.getContext("2d"),j=i.getImageData(0,0,a.width,a.height),k=j.data,l=j.height,m=j.width;for(c=0;c<l;c+=this.blocksize)for(d=0;d<m;d+=this.blocksize){b=4*c*m+4*d,e=k[b],f=k[b+1],g=k[b+2],h=k[b+3];for(var n=c,o=c+this.blocksize;n<o;n++)for(var p=d,q=d+this.blocksize;p<q;p++)b=4*n*m+4*p,k[b]=e,k[b+1]=f,k[b+2]=g,k[b+3]=h}i.putImageData(j,0,0)},toObject:function(){return c(this.callSuper("toObject"),{blocksize:this.blocksize})}}),b.Image.filters.Pixelate.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.Image.filters,e=b.util.createClass;d.RemoveWhite=e(d.BaseFilter,{type:"RemoveWhite",initialize:function(a){a=a||{},this.threshold=a.threshold||30,this.distance=a.distance||20},applyTo:function(a){for(var b,c,d,e=a.getContext("2d"),f=e.getImageData(0,0,a.width,a.height),g=f.data,h=this.threshold,i=this.distance,j=255-h,k=Math.abs,l=0,m=g.length;l<m;l+=4)b=g[l],c=g[l+1],d=g[l+2],b>j&&c>j&&d>j&&k(b-c)<i&&k(b-d)<i&&k(c-d)<i&&(g[l+3]=0);e.putImageData(f,0,0)},toObject:function(){return c(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),b.Image.filters.RemoveWhite.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.Image.filters,d=b.util.createClass;c.Sepia=d(c.BaseFilter,{type:"Sepia",applyTo:function(a){var b,c,d=a.getContext("2d"),e=d.getImageData(0,0,a.width,a.height),f=e.data,g=f.length;for(b=0;b<g;b+=4)c=.3*f[b]+.59*f[b+1]+.11*f[b+2],f[b]=c+100,f[b+1]=c+50,f[b+2]=c+255;d.putImageData(e,0,0)}}),b.Image.filters.Sepia.fromObject=function(a,c){return a=a||{},a.type="Sepia",new b.Image.filters.BaseFilter.fromObject(a,c)}}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.Image.filters,d=b.util.createClass;c.Sepia2=d(c.BaseFilter,{type:"Sepia2",applyTo:function(a){var b,c,d,e,f=a.getContext("2d"),g=f.getImageData(0,0,a.width,a.height),h=g.data,i=h.length;for(b=0;b<i;b+=4)c=h[b],d=h[b+1],e=h[b+2],h[b]=(.393*c+.769*d+.189*e)/1.351,h[b+1]=(.349*c+.686*d+.168*e)/1.203,h[b+2]=(.272*c+.534*d+.131*e)/2.14;f.putImageData(g,0,0)}}),b.Image.filters.Sepia2.fromObject=function(a,c){return a=a||{},a.type="Sepia2",new b.Image.filters.BaseFilter.fromObject(a,c)}}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.Image.filters,e=b.util.createClass;d.Tint=e(d.BaseFilter,{type:"Tint",initialize:function(a){a=a||{},this.color=a.color||"#000000",this.opacity=void 0!==a.opacity?a.opacity:new b.Color(this.color).getAlpha()},applyTo:function(a){var c,d,e,f,g,h,i,j,k,l=a.getContext("2d"),m=l.getImageData(0,0,a.width,a.height),n=m.data,o=n.length;for(k=new b.Color(this.color).getSource(),d=k[0]*this.opacity,e=k[1]*this.opacity,f=k[2]*this.opacity,j=1-this.opacity,c=0;c<o;c+=4)g=n[c],h=n[c+1],i=n[c+2],n[c]=d+g*j,n[c+1]=e+h*j,n[c+2]=f+i*j;l.putImageData(m,0,0)},toObject:function(){return c(this.callSuper("toObject"),{
color:this.color,opacity:this.opacity})}}),b.Image.filters.Tint.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.Image.filters,e=b.util.createClass;d.Multiply=e(d.BaseFilter,{type:"Multiply",initialize:function(a){a=a||{},this.color=a.color||"#000000"},applyTo:function(a){var c,d,e=a.getContext("2d"),f=e.getImageData(0,0,a.width,a.height),g=f.data,h=g.length;for(d=new b.Color(this.color).getSource(),c=0;c<h;c+=4)g[c]*=d[0]/255,g[c+1]*=d[1]/255,g[c+2]*=d[2]/255;e.putImageData(f,0,0)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color})}}),b.Image.filters.Multiply.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric,c=b.Image.filters,d=b.util.createClass;c.Blend=d(c.BaseFilter,{type:"Blend",initialize:function(a){a=a||{},this.color=a.color||"#000",this.image=a.image||!1,this.mode=a.mode||"multiply",this.alpha=a.alpha||1},applyTo:function(a){var c,d,e,f,g,h,i,j,k,l,m=a.getContext("2d"),n=m.getImageData(0,0,a.width,a.height),o=n.data,p=!1;if(this.image){p=!0;var q=b.util.createCanvasElement();q.width=this.image.width,q.height=this.image.height;var r=new b.StaticCanvas(q);r.add(this.image);l=r.getContext("2d").getImageData(0,0,r.width,r.height).data}else l=new b.Color(this.color).getSource(),c=l[0]*this.alpha,d=l[1]*this.alpha,e=l[2]*this.alpha;for(var s=0,t=o.length;s<t;s+=4)switch(f=o[s],g=o[s+1],h=o[s+2],p&&(c=l[s]*this.alpha,d=l[s+1]*this.alpha,e=l[s+2]*this.alpha),this.mode){case"multiply":o[s]=f*c/255,o[s+1]=g*d/255,o[s+2]=h*e/255;break;case"screen":o[s]=1-(1-f)*(1-c),o[s+1]=1-(1-g)*(1-d),o[s+2]=1-(1-h)*(1-e);break;case"add":o[s]=Math.min(255,f+c),o[s+1]=Math.min(255,g+d),o[s+2]=Math.min(255,h+e);break;case"diff":case"difference":o[s]=Math.abs(f-c),o[s+1]=Math.abs(g-d),o[s+2]=Math.abs(h-e);break;case"subtract":i=f-c,j=g-d,k=h-e,o[s]=i<0?0:i,o[s+1]=j<0?0:j,o[s+2]=k<0?0:k;break;case"darken":o[s]=Math.min(f,c),o[s+1]=Math.min(g,d),o[s+2]=Math.min(h,e);break;case"lighten":o[s]=Math.max(f,c),o[s+1]=Math.max(g,d),o[s+2]=Math.max(h,e)}m.putImageData(n,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),b.Image.filters.Blend.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=Math.pow,d=Math.floor,e=Math.sqrt,f=Math.abs,g=Math.max,h=Math.round,i=Math.sin,j=Math.ceil,k=b.Image.filters,l=b.util.createClass;k.Resize=l(k.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(a,b,c){if(1!==b||1!==c){this.rcpScaleX=1/b,this.rcpScaleY=1/c;var d,e=a.width,f=a.height,g=h(e*b),i=h(f*c);"sliceHack"===this.resizeType&&(d=this.sliceByTwo(a,e,f,g,i)),"hermite"===this.resizeType&&(d=this.hermiteFastResize(a,e,f,g,i)),"bilinear"===this.resizeType&&(d=this.bilinearFiltering(a,e,f,g,i)),"lanczos"===this.resizeType&&(d=this.lanczosResize(a,e,f,g,i)),a.width=g,a.height=i,a.getContext("2d").putImageData(d,0,0)}},sliceByTwo:function(a,c,e,f,h){var i,j=a.getContext("2d"),k=.5,l=.5,m=1,n=1,o=!1,p=!1,q=c,r=e,s=b.util.createCanvasElement(),t=s.getContext("2d");for(f=d(f),h=d(h),s.width=g(f,c),s.height=g(h,e),f>c&&(k=2,m=-1),h>e&&(l=2,n=-1),i=j.getImageData(0,0,c,e),a.width=g(f,c),a.height=g(h,e),j.putImageData(i,0,0);!o||!p;)c=q,e=r,f*m<d(q*k*m)?q=d(q*k):(q=f,o=!0),h*n<d(r*l*n)?r=d(r*l):(r=h,p=!0),i=j.getImageData(0,0,c,e),t.putImageData(i,0,0),j.clearRect(0,0,q,r),j.drawImage(s,0,0,c,e,0,0,q,r);return j.getImageData(0,0,f,h)},lanczosResize:function(a,b,g,h,k){function l(a){var i,j,m,n,B,C,D,E,F,G,H;for(z.x=(a+.5)*s,A.x=d(z.x),i=0;i<k;i++){for(z.y=(i+.5)*t,A.y=d(z.y),B=0,C=0,D=0,E=0,F=0,j=A.x-w;j<=A.x+w;j++)if(!(j<0||j>=b)){G=d(1e3*f(j-z.x)),y[G]||(y[G]={});for(var I=A.y-x;I<=A.y+x;I++)I<0||I>=g||(H=d(1e3*f(I-z.y)),y[G][H]||(y[G][H]=r(e(c(G*u,2)+c(H*v,2))/1e3)),(m=y[G][H])>0&&(n=4*(I*b+j),B+=m,C+=m*p[n],D+=m*p[n+1],E+=m*p[n+2],F+=m*p[n+3]))}n=4*(i*h+a),q[n]=C/B,q[n+1]=D/B,q[n+2]=E/B,q[n+3]=F/B}return++a<h?l(a):o}var m=a.getContext("2d"),n=m.getImageData(0,0,b,g),o=m.getImageData(0,0,h,k),p=n.data,q=o.data,r=function(a){return function(b){if(b>a)return 0;if(b*=Math.PI,f(b)<1e-16)return 1;var c=b/a;return i(b)*i(c)/b/c}}(this.lanczosLobes),s=this.rcpScaleX,t=this.rcpScaleY,u=2/this.rcpScaleX,v=2/this.rcpScaleY,w=j(s*this.lanczosLobes/2),x=j(t*this.lanczosLobes/2),y={},z={},A={};return l(0)},bilinearFiltering:function(a,b,c,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t=0,u=this.rcpScaleX,v=this.rcpScaleY,w=a.getContext("2d"),x=4*(b-1),y=w.getImageData(0,0,b,c),z=y.data,A=w.getImageData(0,0,e,f),B=A.data;for(m=0;m<f;m++)for(n=0;n<e;n++)for(k=d(u*n),l=d(v*m),o=u*n-k,p=v*m-l,s=4*(l*b+k),q=0;q<4;q++)g=z[s+q],h=z[s+4+q],i=z[s+x+q],j=z[s+x+4+q],r=g*(1-o)*(1-p)+h*o*(1-p)+i*p*(1-o)+j*o*p,B[t++]=r;return A},hermiteFastResize:function(a,b,c,g,h){for(var i=this.rcpScaleX,k=this.rcpScaleY,l=j(i/2),m=j(k/2),n=a.getContext("2d"),o=n.getImageData(0,0,b,c),p=o.data,q=n.getImageData(0,0,g,h),r=q.data,s=0;s<h;s++)for(var t=0;t<g;t++){for(var u=4*(t+s*g),v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=(s+.5)*k,D=d(s*k);D<(s+1)*k;D++)for(var E=f(C-(D+.5))/m,F=(t+.5)*i,G=E*E,H=d(t*i);H<(t+1)*i;H++){var I=f(F-(H+.5))/l,J=e(G+I*I);J>1&&J<-1||(v=2*J*J*J-3*J*J+1)>0&&(I=4*(H+D*b),B+=v*p[I+3],x+=v,p[I+3]<255&&(v=v*p[I+3]/250),y+=v*p[I],z+=v*p[I+1],A+=v*p[I+2],w+=v)}r[u]=y/w,r[u+1]=z/w,r[u+2]=A/w,r[u+3]=B/x}return q},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),b.Image.filters.Resize.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.Image.filters,e=b.util.createClass;d.ColorMatrix=e(d.BaseFilter,{type:"ColorMatrix",initialize:function(a){a||(a={}),this.matrix=a.matrix||[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]},applyTo:function(a){var b,c,d,e,f,g=a.getContext("2d"),h=g.getImageData(0,0,a.width,a.height),i=h.data,j=i.length,k=this.matrix;for(b=0;b<j;b+=4)c=i[b],d=i[b+1],e=i[b+2],f=i[b+3],i[b]=c*k[0]+d*k[1]+e*k[2]+f*k[3]+k[4],i[b+1]=c*k[5]+d*k[6]+e*k[7]+f*k[8]+k[9],i[b+2]=c*k[10]+d*k[11]+e*k[12]+f*k[13]+k[14],i[b+3]=c*k[15]+d*k[16]+e*k[17]+f*k[18]+k[19];g.putImageData(h,0,0)},toObject:function(){return c(this.callSuper("toObject"),{type:this.type,matrix:this.matrix})}}),b.Image.filters.ColorMatrix.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.Image.filters,e=b.util.createClass;d.Contrast=e(d.BaseFilter,{type:"Contrast",initialize:function(a){a=a||{},this.contrast=a.contrast||0},applyTo:function(a){for(var b=a.getContext("2d"),c=b.getImageData(0,0,a.width,a.height),d=c.data,e=259*(this.contrast+255)/(255*(259-this.contrast)),f=0,g=d.length;f<g;f+=4)d[f]=e*(d[f]-128)+128,d[f+1]=e*(d[f+1]-128)+128,d[f+2]=e*(d[f+2]-128)+128;b.putImageData(c,0,0)},toObject:function(){return c(this.callSuper("toObject"),{contrast:this.contrast})}}),b.Image.filters.Contrast.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.object.extend,d=b.Image.filters,e=b.util.createClass;d.Saturate=e(d.BaseFilter,{type:"Saturate",initialize:function(a){a=a||{},this.saturate=a.saturate||0},applyTo:function(a){for(var b,c=a.getContext("2d"),d=c.getImageData(0,0,a.width,a.height),e=d.data,f=.01*-this.saturate,g=0,h=e.length;g<h;g+=4)b=Math.max(e[g],e[g+1],e[g+2]),e[g]+=b!==e[g]?(b-e[g])*f:0,e[g+1]+=b!==e[g+1]?(b-e[g+1])*f:0,e[g+2]+=b!==e[g+2]?(b-e[g+2])*f:0;c.putImageData(d,0,0)},toObject:function(){return c(this.callSuper("toObject"),{saturate:this.saturate})}}),b.Image.filters.Saturate.fromObject=b.Image.filters.BaseFilter.fromObject}("undefined"!=typeof exports?exports:this),function(a){"use strict";var b=a.fabric||(a.fabric={}),c=b.util.toFixed,d=b.Object.NUM_FRACTION_DIGITS;if(b.Text)return void b.warn("fabric.Text is already defined");var e=b.Object.prototype.stateProperties.concat();e.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing");var f=b.Object.prototype.cacheProperties.concat();f.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),b.Text=b.util.createClass(b.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:e,cacheProperties:f,stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,charSpacing:0,initialize:function(a,b){b=b||{},this.text=a,this.__skipDimension=!0,this.callSuper("initialize",b),this.__skipDimension=!1,this._initDimensions(),this.setupState({propertySet:"_dimensionAffectingProps"})},_initDimensions:function(a){this.__skipDimension||(a||(a=b.util.createCanvasElement().getContext("2d"),this._setTextStyles(a)),this._textLines=this._splitTextIntoLines(),this._clearCache(),this.width=this._getTextWidth(a)||this.cursorWidth||2,this.height=this._getTextHeight(a))},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var a=this.callSuper("_getCacheCanvasDimensions"),b=2*Math.ceil(this.fontSize);return a.width+=b,a.height+=b,a},_render:function(a){this._setTextStyles(a),this.group&&"path-group"===this.group.type&&a.translate(this.left,this.top),this._renderTextLinesBackground(a),this._renderText(a),this._renderTextDecoration(a)},_renderText:function(a){this._renderTextFill(a),this._renderTextStroke(a)},_setTextStyles:function(a){a.textBaseline="alphabetic",a.font=this._getFontDeclaration()},_getTextHeight:function(){return this._getHeightOfSingleLine()+(this._textLines.length-1)*this._getHeightOfLine()},_getTextWidth:function(a){for(var b=this._getLineWidth(a,0),c=1,d=this._textLines.length;c<d;c++){var e=this._getLineWidth(a,c);e>b&&(b=e)}return b},_renderChars:function(a,b,c,d,e){var f,g,h=a.slice(0,-4);if(this[h].toLive){var i=-this.width/2+this[h].offsetX||0,j=-this.height/2+this[h].offsetY||0;b.save(),b.translate(i,j),d-=i,e-=j}if(0!==this.charSpacing){var k=this._getWidthOfCharSpacing();c=c.split("");for(var l=0,m=c.length;l<m;l++)f=c[l],g=b.measureText(f).width+k,b[a](f,d,e),d+=g>0?g:0}else b[a](c,d,e);this[h].toLive&&b.restore()},_renderTextLine:function(a,b,c,d,e,f){e-=this.fontSize*this._fontSizeFraction;var g=this._getLineWidth(b,f);if("justify"!==this.textAlign||this.width<g)return void this._renderChars(a,b,c,d,e,f);for(var h,i=c.split(/\s+/),j=0,k=this._getWidthOfWords(b,i.join(" "),f,0),l=this.width-k,m=i.length-1,n=m>0?l/m:0,o=0,p=0,q=i.length;p<q;p++){for(;" "===c[j]&&j<c.length;)j++;h=i[p],this._renderChars(a,b,h,d+o,e,f,j),o+=this._getWidthOfWords(b,h,f,j)+n,j+=h.length}},_getWidthOfWords:function(a,b){var c,d,e=a.measureText(b).width;return 0!==this.charSpacing&&(c=b.split("").length,d=c*this._getWidthOfCharSpacing(),e+=d),e>0?e:0},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},isEmptyStyles:function(){return!0},_renderTextCommon:function(a,b){for(var c=0,d=this._getLeftOffset(),e=this._getTopOffset(),f=0,g=this._textLines.length;f<g;f++){var h=this._getHeightOfLine(a,f),i=h/this.lineHeight,j=this._getLineWidth(a,f),k=this._getLineLeftOffset(j);this._renderTextLine(b,a,this._textLines[f],d+k,e+c+i,f),c+=h}},_renderTextFill:function(a){!this.fill&&this.isEmptyStyles()||this._renderTextCommon(a,"fillText")},_renderTextStroke:function(a){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this._setLineDash(a,this.strokeDashArray),a.beginPath(),this._renderTextCommon(a,"strokeText"),a.closePath(),a.restore())},_getHeightOfLine:function(){return this._getHeightOfSingleLine()*this.lineHeight},_getHeightOfSingleLine:function(){return this.fontSize*this._fontSizeMult},_renderTextLinesBackground:function(a){if(this.textBackgroundColor){var b,c,d,e=0,f=a.fillStyle;a.fillStyle=this.textBackgroundColor;for(var g=0,h=this._textLines.length;g<h;g++)b=this._getHeightOfLine(a,g),c=this._getLineWidth(a,g),c>0&&(d=this._getLineLeftOffset(c),a.fillRect(this._getLeftOffset()+d,this._getTopOffset()+e,c,b/this.lineHeight)),e+=b;a.fillStyle=f,this._removeShadow(a)}},_getLineLeftOffset:function(a){return"center"===this.textAlign?(this.width-a)/2:"right"===this.textAlign?this.width-a:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[]},_shouldClearDimensionCache:function(){var a=this._forceClearCache;return a||(a=this.hasStateChanged("_dimensionAffectingProps")),a&&(this.saveState({propertySet:"_dimensionAffectingProps"}),this.dirty=!0),a},_getLineWidth:function(a,b){if(this.__lineWidths[b])return-1===this.__lineWidths[b]?this.width:this.__lineWidths[b];var c,d,e=this._textLines[b];return c=""===e?0:this._measureLine(a,b),this.__lineWidths[b]=c,c&&"justify"===this.textAlign&&(d=e.split(/\s+/),d.length>1&&(this.__lineWidths[b]=-1)),c},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},_measureLine:function(a,b){var c,d,e=this._textLines[b],f=a.measureText(e).width,g=0;return 0!==this.charSpacing&&(c=e.split("").length,g=(c-1)*this._getWidthOfCharSpacing()),d=f+g,d>0?d:0},_renderTextDecoration:function(a){if(this.textDecoration){var b=this.height/2,c=this,d=[];this.textDecoration.indexOf("underline")>-1&&d.push(.85),this.textDecoration.indexOf("line-through")>-1&&d.push(.43),this.textDecoration.indexOf("overline")>-1&&d.push(-.12),d.length>0&&function(d){var e,f,g,h,i,j,k,l=0;for(e=0,f=c._textLines.length;e<f;e++){for(i=c._getLineWidth(a,e),j=c._getLineLeftOffset(i),k=c._getHeightOfLine(a,e),g=0,h=d.length;g<h;g++)a.fillRect(c._getLeftOffset()+j,l+(c._fontSizeMult-1+d[g])*c.fontSize-b,i,c.fontSize/15);l+=k}}(d)}},_getFontDeclaration:function(){return[b.isLikelyNode?this.fontWeight:this.fontStyle,b.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",b.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(a,b){this.visible&&(this._shouldClearDimensionCache()&&(this._setTextStyles(a),this._initDimensions(a)),this.callSuper("render",a,b))},_splitTextIntoLines:function(){return this.text.split(this._reNewline)},toObject:function(a){var b=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","textDecoration","textAlign","textBackgroundColor","charSpacing"].concat(a);return this.callSuper("toObject",b)},toSVG:function(a){this.ctx||(this.ctx=b.util.createCanvasElement().getContext("2d"));var c=this._createBaseSVGMarkup(),d=this._getSVGLeftTopOffsets(this.ctx),e=this._getSVGTextAndBg(d.textTop,d.textLeft);return this._wrapSVGTextAndBg(c,e),a?a(c.join("")):c.join("")},_getSVGLeftTopOffsets:function(a){var b=this._getHeightOfLine(a,0);return{textLeft:-this.width/2+(this.group&&"path-group"===this.group.type?this.left:0),textTop:0+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:b}},_wrapSVGTextAndBg:function(a,b){var c=this.getSvgFilter(),d=""===c?"":' style="'+c+'"';a.push("\t<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"',d,">\n",b.textBgRects.join(""),"\t\t<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(!0),'" >\n',b.textSpans.join(""),"\t\t</text>\n","\t</g>\n")},_getSVGTextAndBg:function(a,b){var c=[],d=[],e=0;this._setSVGBg(d);for(var f=0,g=this._textLines.length;f<g;f++)this.textBackgroundColor&&this._setSVGTextLineBg(d,f,b,a,e),this._setSVGTextLineText(f,c,e,b,a,d),e+=this._getHeightOfLine(this.ctx,f);return{textSpans:c,textBgRects:d}},_setSVGTextLineText:function(a,e,f,g,h){var i=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-h+f-this.height/2;return"justify"===this.textAlign?void this._setSVGTextLineJustifed(a,e,i,g):void e.push('\t\t\t<tspan x="',c(g+this._getLineLeftOffset(this._getLineWidth(this.ctx,a)),d),'" ','y="',c(i,d),'" ',this._getFillAttributes(this.fill),">",b.util.string.escapeXml(this._textLines[a]),"</tspan>\n")},_setSVGTextLineJustifed:function(a,e,f,g){var h=b.util.createCanvasElement().getContext("2d");this._setTextStyles(h);var i,j,k=this._textLines[a],l=k.split(/\s+/),m=this._getWidthOfWords(h,l.join("")),n=this.width-m,o=l.length-1,p=o>0?n/o:0,q=this._getFillAttributes(this.fill);for(g+=this._getLineLeftOffset(this._getLineWidth(h,a)),a=0,j=l.length;a<j;a++)i=l[a],e.push('\t\t\t<tspan x="',c(g,d),'" ','y="',c(f,d),'" ',q,">",b.util.string.escapeXml(i),"</tspan>\n"),g+=this._getWidthOfWords(h,i)+p},_setSVGTextLineBg:function(a,b,e,f,g){a.push("\t\t<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',c(e+this._getLineLeftOffset(this._getLineWidth(this.ctx,b)),d),'" y="',c(g-this.height/2,d),'" width="',c(this._getLineWidth(this.ctx,b),d),'" height="',c(this._getHeightOfLine(this.ctx,b)/this.lineHeight,d),'"></rect>\n')},_setSVGBg:function(a){this.backgroundColor&&a.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',c(-this.width/2,d),'" y="',c(-this.height/2,d),'" width="',c(this.width,d),'" height="',c(this.height,d),'"></rect>\n')},_getFillAttributes:function(a){var c=a&&"string"==typeof a?new b.Color(a):"";return c&&c.getSource()&&1!==c.getAlpha()?'opacity="'+c.getAlpha()+'" fill="'+c.setAlpha(1).toRgb()+'"':'fill="'+a+'"'},_set:function(a,b){this.callSuper("_set",a,b),this._dimensionAffectingProps.indexOf(a)>-1&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),b.Text.ATTRIBUTE_NAMES=b.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),b.Text.DEFAULT_SVG_FONT_SIZE=16,b.Text.fromElement=function(a,c){if(!a)return null;var d=b.parseAttributes(a,b.Text.ATTRIBUTE_NAMES);c=b.util.object.extend(c?b.util.object.clone(c):{},d),c.top=c.top||0,c.left=c.left||0,"dx"in d&&(c.left+=d.dx),"dy"in d&&(c.top+=d.dy),"fontSize"in c||(c.fontSize=b.Text.DEFAULT_SVG_FONT_SIZE),c.originX||(c.originX="left");var e="";"textContent"in a?e=a.textContent:"firstChild"in a&&null!==a.firstChild&&"data"in a.firstChild&&null!==a.firstChild.data&&(e=a.firstChild.data),e=e.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var f=new b.Text(e,c),g=f.getHeight()/f.height,h=(f.height+f.strokeWidth)*f.lineHeight-f.height,i=h*g,j=f.getHeight()+i,k=0;return"left"===f.originX&&(k=f.getWidth()/2),"right"===f.originX&&(k=-f.getWidth()/2),f.set({left:f.getLeft()+k,top:f.getTop()-j/2+f.fontSize*(.18+f._fontSizeFraction)/f.lineHeight}),f},b.Text.fromObject=function(a,c,d){return b.Object._fromObject("Text",a,c,d,"text")},b.util.createAccessors(b.Text)}("undefined"!=typeof exports?exports:this),function(){var a=fabric.util.object.clone;fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,styles:null,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],initialize:function(a,b){this.styles=b?b.styles||{}:{},this.callSuper("initialize",a,b),this.initBehavior()},_clearCache:function(){this.callSuper("_clearCache"),this.__widthOfSpace=[]},isEmptyStyles:function(){if(!this.styles)return!0;var a=this.styles;for(var b in a)for(var c in a[b])for(var d in a[b][c])return!1;return!0},setSelectionStart:function(a){a=Math.max(a,0),this._updateAndFire("selectionStart",a)},setSelectionEnd:function(a){a=Math.min(a,this.text.length),this._updateAndFire("selectionEnd",a)},_updateAndFire:function(a,b){this[a]!==b&&(this._fireSelectionChanged(),this[a]=b),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},getSelectionStyles:function(a,b){if(2===arguments.length){for(var c=[],d=a;d<b;d++)c.push(this.getSelectionStyles(d));return c}var e=this.get2DCursorLocation(a);return this._getStyleDeclaration(e.lineIndex,e.charIndex)||{}},setSelectionStyles:function(a){if(this.selectionStart===this.selectionEnd)this._extendStyles(this.selectionStart,a);else for(var b=this.selectionStart;b<this.selectionEnd;b++)this._extendStyles(b,a);return this._forceClearCache=!0,this},_extendStyles:function(a,b){var c=this.get2DCursorLocation(a);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex,{}),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),b)},_initDimensions:function(a){a||this.clearContextTop(),this.callSuper("_initDimensions",a)},render:function(a,b){this.clearContextTop(),this.callSuper("render",a,b),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(a){this.callSuper("_render",a),this.ctx=a},clearContextTop:function(){if(this.active&&this.isEditing&&this.canvas&&this.canvas.contextTop){var a=this.canvas.contextTop;a.save(),a.transform.apply(a,this.canvas.viewportTransform),this.transform(a),this.transformMatrix&&a.transform.apply(a,this.transformMatrix),this._clearTextArea(a),a.restore()}},renderCursorOrSelection:function(){if(this.active&&this.isEditing){var a,b,c=this.text.split("");this.canvas&&this.canvas.contextTop?(b=this.canvas.contextTop,b.save(),b.transform.apply(b,this.canvas.viewportTransform),this.transform(b),this.transformMatrix&&b.transform.apply(b,this.transformMatrix),this._clearTextArea(b)):(b=this.ctx,b.save()),this.selectionStart===this.selectionEnd?(a=this._getCursorBoundaries(c,"cursor"),this.renderCursor(a,b)):(a=this._getCursorBoundaries(c,"selection"),this.renderSelection(c,a,b)),b.restore()}},_clearTextArea:function(a){var b=this.width+4,c=this.height+4;a.clearRect(-b/2,-c/2,b,c)},get2DCursorLocation:function(a){void 0===a&&(a=this.selectionStart);for(var b=this._textLines.length,c=0;c<b;c++){if(a<=this._textLines[c].length)return{lineIndex:c,charIndex:a};a-=this._textLines[c].length+1}return{lineIndex:c-1,charIndex:this._textLines[c-1].length<a?this._textLines[c-1].length:a}},getCurrentCharStyle:function(a,b){var c=this._getStyleDeclaration(a,0===b?0:b-1);return{fontSize:c&&c.fontSize||this.fontSize,fill:c&&c.fill||this.fill,textBackgroundColor:c&&c.textBackgroundColor||this.textBackgroundColor,textDecoration:c&&c.textDecoration||this.textDecoration,fontFamily:c&&c.fontFamily||this.fontFamily,fontWeight:c&&c.fontWeight||this.fontWeight,fontStyle:c&&c.fontStyle||this.fontStyle,stroke:c&&c.stroke||this.stroke,strokeWidth:c&&c.strokeWidth||this.strokeWidth}},getCurrentCharFontSize:function(a,b){var c=this._getStyleDeclaration(a,0===b?0:b-1);return c&&c.fontSize?c.fontSize:this.fontSize},getCurrentCharColor:function(a,b){var c=this._getStyleDeclaration(a,0===b?0:b-1);return c&&c.fill?c.fill:this.cursorColor},_getCursorBoundaries:function(a,b){var c=Math.round(this._getLeftOffset()),d=this._getTopOffset(),e=this._getCursorBoundariesOffsets(a,b);return{left:c,top:d,leftOffset:e.left+e.lineLeft,topOffset:e.top}},_getCursorBoundariesOffsets:function(a,b){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;for(var c,d=0,e=0,f=0,g=0,h=0,i=0;i<this.selectionStart;i++)"\n"===a[i]?(h=0,g+=this._getHeightOfLine(this.ctx,e),e++,f=0):(h+=this._getWidthOfChar(this.ctx,a[i],e,f),f++),d=this._getLineLeftOffset(this._getLineWidth(this.ctx,e));return"cursor"===b&&(g+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,e)/this.lineHeight-this.getCurrentCharFontSize(e,f)*(1-this._fontSizeFraction)),0!==this.charSpacing&&f===this._textLines[e].length&&(h-=this._getWidthOfCharSpacing()),c={top:g,left:h>0?h:0,lineLeft:d},this.cursorOffsetCache=c,this.cursorOffsetCache},renderCursor:function(a,b){var c=this.get2DCursorLocation(),d=c.lineIndex,e=c.charIndex,f=this.getCurrentCharFontSize(d,e),g=0===d&&0===e?this._getLineLeftOffset(this._getLineWidth(b,d)):a.leftOffset,h=this.scaleX*this.canvas.getZoom(),i=this.cursorWidth/h;b.fillStyle=this.getCurrentCharColor(d,e),b.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,b.fillRect(a.left+g-i/2,a.top+a.topOffset,i,f)},renderSelection:function(a,b,c){c.fillStyle=this.selectionColor;for(var d=this.get2DCursorLocation(this.selectionStart),e=this.get2DCursorLocation(this.selectionEnd),f=d.lineIndex,g=e.lineIndex,h=f;h<=g;h++){var i=this._getLineLeftOffset(this._getLineWidth(c,h))||0,j=this._getHeightOfLine(this.ctx,h),k=0,l=0,m=this._textLines[h];if(h===f){for(var n=0,o=m.length;n<o;n++)n>=d.charIndex&&(h!==g||n<e.charIndex)&&(l+=this._getWidthOfChar(c,m[n],h,n)),n<d.charIndex&&(i+=this._getWidthOfChar(c,m[n],h,n));n===m.length&&(l-=this._getWidthOfCharSpacing())}else if(h>f&&h<g)l+=this._getLineWidth(c,h)||5;else if(h===g){for(var p=0,q=e.charIndex;p<q;p++)l+=this._getWidthOfChar(c,m[p],h,p);e.charIndex===m.length&&(l-=this._getWidthOfCharSpacing())}k=j,(this.lineHeight<1||h===g&&this.lineHeight>1)&&(j/=this.lineHeight),c.fillRect(b.left+i,b.top+b.topOffset,l>0?l:0,j),b.topOffset+=k}},_renderChars:function(a,b,c,d,e,f,g){if(this.isEmptyStyles())return this._renderCharsFast(a,b,c,d,e);g=g||0;var h,i,j=this._getHeightOfLine(b,f),k="";b.save(),e-=j/this.lineHeight*this._fontSizeFraction;for(var l=g,m=c.length+g;l<=m;l++)h=h||this.getCurrentCharStyle(f,l),i=this.getCurrentCharStyle(f,l+1),(this._hasStyleChanged(h,i)||l===m)&&(this._renderChar(a,b,f,l-1,k,d,e,j),k="",h=i),k+=c[l-g];b.restore()},_renderCharsFast:function(a,b,c,d,e){"fillText"===a&&this.fill&&this.callSuper("_renderChars",a,b,c,d,e),"strokeText"===a&&(this.stroke&&this.strokeWidth>0||this.skipFillStrokeCheck)&&this.callSuper("_renderChars",a,b,c,d,e)},_renderChar:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q,r=this._getStyleDeclaration(c,d);if(r?(j=this._getHeightOfChar(b,e,c,d),l=r.stroke,k=r.fill,n=r.textDecoration):j=this.fontSize,l=(l||this.stroke)&&"strokeText"===a,k=(k||this.fill)&&"fillText"===a,r&&b.save(),i=this._applyCharStylesGetWidth(b,e,c,d,r||null),n=n||this.textDecoration,r&&r.textBackgroundColor&&this._removeShadow(b),0!==this.charSpacing){p=this._getWidthOfCharSpacing(),o=e.split(""),i=0;for(var s,t=0,u=o.length;t<u;t++)s=o[t],k&&b.fillText(s,f+i,g),l&&b.strokeText(s,f+i,g),q=b.measureText(s).width+p,i+=q>0?q:0}else k&&b.fillText(e,f,g),l&&b.strokeText(e,f,g);(n||""!==n)&&(m=this._fontSizeFraction*h/this.lineHeight,this._renderCharDecoration(b,n,f,g,m,i,j)),r&&b.restore(),b.translate(i,0)},_hasStyleChanged:function(a,b){return a.fill!==b.fill||a.fontSize!==b.fontSize||a.textBackgroundColor!==b.textBackgroundColor||a.textDecoration!==b.textDecoration||a.fontFamily!==b.fontFamily||a.fontWeight!==b.fontWeight||a.fontStyle!==b.fontStyle||a.stroke!==b.stroke||a.strokeWidth!==b.strokeWidth},_renderCharDecoration:function(a,b,c,d,e,f,g){if(b){var h,i,j=g/15,k={underline:d+g/10,"line-through":d-g*(this._fontSizeFraction+this._fontSizeMult-1)+j,overline:d-(this._fontSizeMult-this._fontSizeFraction)*g},l=["underline","line-through","overline"];for(h=0;h<l.length;h++)i=l[h],b.indexOf(i)>-1&&a.fillRect(c,k[i],f,j)}},_renderTextLine:function(a,b,c,d,e,f){this.isEmptyStyles()||(e+=this.fontSize*(this._fontSizeFraction+.03)),this.callSuper("_renderTextLine",a,b,c,d,e,f)},_renderTextDecoration:function(a){if(this.isEmptyStyles())return this.callSuper("_renderTextDecoration",a)},_renderTextLinesBackground:function(a){this.callSuper("_renderTextLinesBackground",a);var b,c,d,e,f,g,h=0,i=this._getLeftOffset(),j=this._getTopOffset();a.save();for(var k=0,l=this._textLines.length;k<l;k++)if(b=this._getHeightOfLine(a,k),""!==(e=this._textLines[k])&&this.styles&&this._getLineStyle(k)){c=this._getLineWidth(a,k),d=this._getLineLeftOffset(c);for(var m=0,n=e.length;m<n;m++)(g=this._getStyleDeclaration(k,m))&&g.textBackgroundColor&&(f=e[m],a.fillStyle=g.textBackgroundColor,a.fillRect(i+d+this._getWidthOfCharsAt(a,k,m),j+h,this._getWidthOfChar(a,f,k,m),b/this.lineHeight));h+=b}else h+=b;a.restore()},_getCacheProp:function(a,b){return a+b.fontSize+b.fontWeight+b.fontStyle},_getFontCache:function(a){return fabric.charWidthsCache[a]||(fabric.charWidthsCache[a]={}),fabric.charWidthsCache[a]},_applyCharStylesGetWidth:function(b,c,d,e,f){var g,h,i,j=f||this._getStyleDeclaration(d,e),k=a(j);if(this._applyFontStyles(k),i=this._getFontCache(k.fontFamily),h=this._getCacheProp(c,k),!j&&i[h]&&this.caching)return i[h];"string"==typeof k.shadow&&(k.shadow=new fabric.Shadow(k.shadow));var l=k.fill||this.fill;return b.fillStyle=l.toLive?l.toLive(b,this):l,k.stroke&&(b.strokeStyle=k.stroke&&k.stroke.toLive?k.stroke.toLive(b,this):k.stroke),b.lineWidth=k.strokeWidth||this.strokeWidth,b.font=this._getFontDeclaration.call(k),k.shadow&&(k.scaleX=this.scaleX,k.scaleY=this.scaleY,k.canvas=this.canvas,k.getObjectScaling=this.getObjectScaling,this._setShadow.call(k,b)),this.caching&&i[h]?i[h]:(g=b.measureText(c).width,this.caching&&(i[h]=g),g)},_applyFontStyles:function(a){a.fontFamily||(a.fontFamily=this.fontFamily),a.fontSize||(a.fontSize=this.fontSize),a.fontWeight||(a.fontWeight=this.fontWeight),a.fontStyle||(a.fontStyle=this.fontStyle)},_getStyleDeclaration:function(b,c,d){return d?this.styles[b]&&this.styles[b][c]?a(this.styles[b][c]):{}:this.styles[b]&&this.styles[b][c]?this.styles[b][c]:null},_setStyleDeclaration:function(a,b,c){this.styles[a][b]=c},_deleteStyleDeclaration:function(a,b){delete this.styles[a][b]},_getLineStyle:function(a){return this.styles[a]},_setLineStyle:function(a,b){this.styles[a]=b},_deleteLineStyle:function(a){delete this.styles[a]},_getWidthOfChar:function(a,b,c,d){if(!this._isMeasuring&&"justify"===this.textAlign&&this._reSpacesAndTabs.test(b))return this._getWidthOfSpace(a,c);a.save();var e=this._applyCharStylesGetWidth(a,b,c,d);return 0!==this.charSpacing&&(e+=this._getWidthOfCharSpacing()),a.restore(),e>0?e:0},_getHeightOfChar:function(a,b,c){var d=this._getStyleDeclaration(b,c);return d&&d.fontSize?d.fontSize:this.fontSize},_getWidthOfCharsAt:function(a,b,c){var d,e,f=0;for(d=0;d<c;d++)e=this._textLines[b][d],f+=this._getWidthOfChar(a,e,b,d);return f},_measureLine:function(a,b){this._isMeasuring=!0;var c=this._getWidthOfCharsAt(a,b,this._textLines[b].length);return 0!==this.charSpacing&&(c-=this._getWidthOfCharSpacing()),this._isMeasuring=!1,c>0?c:0},_getWidthOfSpace:function(a,b){if(this.__widthOfSpace[b])return this.__widthOfSpace[b];var c=this._textLines[b],d=this._getWidthOfWords(a,c,b,0),e=this.width-d,f=c.length-c.replace(this._reSpacesAndTabs,"").length,g=Math.max(e/f,a.measureText(" ").width);return this.__widthOfSpace[b]=g,g},_getWidthOfWords:function(a,b,c,d){for(var e=0,f=0;f<b.length;f++){var g=b[f];g.match(/\s/)||(e+=this._getWidthOfChar(a,g,c,f+d))}return e},_getHeightOfLine:function(a,b){if(this.__lineHeights[b])return this.__lineHeights[b];for(var c=this._textLines[b],d=this._getHeightOfChar(a,b,0),e=1,f=c.length;e<f;e++){var g=this._getHeightOfChar(a,b,e);g>d&&(d=g)}return this.__lineHeights[b]=d*this.lineHeight*this._fontSizeMult,this.__lineHeights[b]},_getTextHeight:function(a){
for(var b,c=0,d=0,e=this._textLines.length;d<e;d++)b=this._getHeightOfLine(a,d),c+=d===e-1?b/this.lineHeight:b;return c},toObject:function(b){return fabric.util.object.extend(this.callSuper("toObject",b),{styles:a(this.styles,!0)})}}),fabric.IText.fromObject=function(a,b,c){return fabric.Object._fromObject("IText",a,b,c,"text")}}(),function(){var a=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},initSelectedHandler:function(){this.on("selected",function(){var a=this;setTimeout(function(){a.selected=!0},100)})},initAddedHandler:function(){var a=this;this.on("added",function(){var b=a.canvas;b&&(b._hasITextHandlers||(b._hasITextHandlers=!0,a._initCanvasHandlers(b)),b._iTextInstances=b._iTextInstances||[],b._iTextInstances.push(a))})},initRemovedHandler:function(){var a=this;this.on("removed",function(){var b=a.canvas;b&&(b._iTextInstances=b._iTextInstances||[],fabric.util.removeFromArray(b._iTextInstances,a),0===b._iTextInstances.length&&(b._hasITextHandlers=!1,a._removeCanvasHandlers(b)))})},_initCanvasHandlers:function(a){a._canvasITextSelectionClearedHanlder=function(){fabric.IText.prototype.exitEditingOnOthers(a)}.bind(this),a._mouseUpITextHandler=function(){a._iTextInstances&&a._iTextInstances.forEach(function(a){a.__isMousedown=!1})}.bind(this),a.on("selection:cleared",a._canvasITextSelectionClearedHanlder),a.on("object:selected",a._canvasITextSelectionClearedHanlder),a.on("mouse:up",a._mouseUpITextHandler)},_removeCanvasHandlers:function(a){a.off("selection:cleared",a._canvasITextSelectionClearedHanlder),a.off("object:selected",a._canvasITextSelectionClearedHanlder),a.off("mouse:up",a._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(a,b,c,d){var e;return e={isAborted:!1,abort:function(){this.isAborted=!0}},a.animate("_currentCursorOpacity",b,{duration:c,onComplete:function(){e.isAborted||a[d]()},onChange:function(){a.canvas&&a.selectionStart===a.selectionEnd&&a.renderCursorOrSelection()},abort:function(){return e.isAborted}}),e},_onTickComplete:function(){var a=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){a._currentTickCompleteState=a._animateCursor(a,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(a){var b=this,c=a?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){b._tick()},c)},abortCursorAnimation:function(){var a=this._currentTickState||this._currentTickCompleteState;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,a&&this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.selectionStart=0,this.selectionEnd=this.text.length,this._fireSelectionChanged(),this._updateTextarea()},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(a){var b=0,c=a-1;if(this._reSpace.test(this.text.charAt(c)))for(;this._reSpace.test(this.text.charAt(c));)b++,c--;for(;/\S/.test(this.text.charAt(c))&&c>-1;)b++,c--;return a-b},findWordBoundaryRight:function(a){var b=0,c=a;if(this._reSpace.test(this.text.charAt(c)))for(;this._reSpace.test(this.text.charAt(c));)b++,c++;for(;/\S/.test(this.text.charAt(c))&&c<this.text.length;)b++,c++;return a+b},findLineBoundaryLeft:function(a){for(var b=0,c=a-1;!/\n/.test(this.text.charAt(c))&&c>-1;)b++,c--;return a-b},findLineBoundaryRight:function(a){for(var b=0,c=a;!/\n/.test(this.text.charAt(c))&&c<this.text.length;)b++,c++;return a+b},getNumNewLinesInSelectedText:function(){for(var a=this.getSelectedText(),b=0,c=0,d=a.length;c<d;c++)"\n"===a[c]&&b++;return b},searchWordBoundary:function(a,b){for(var c=this._reSpace.test(this.text.charAt(a))?a-1:a,d=this.text.charAt(c),e=/[ \n\.,;!\?\-]/;!e.test(d)&&c>0&&c<this.text.length;)c+=b,d=this.text.charAt(c);return e.test(d)&&"\n"!==d&&(c+=1===b?0:1),c},selectWord:function(a){a=a||this.selectionStart;var b=this.searchWordBoundary(a,-1),c=this.searchWordBoundary(a,1);this.selectionStart=b,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(a){a=a||this.selectionStart;var b=this.findLineBoundaryLeft(a),c=this.findLineBoundaryRight(a);this.selectionStart=b,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea()},enterEditing:function(a){if(!this.isEditing&&this.editable)return this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.initHiddenTextarea(a),this.hiddenTextarea.focus(),this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.renderAll(),this):this},exitEditingOnOthers:function(a){a._iTextInstances&&a._iTextInstances.forEach(function(a){a.selected=!1,a.isEditing&&a.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(a){if(this.__isMousedown&&this.isEditing){var b=this.getSelectionStartFromPointer(a.e),c=this.selectionStart,d=this.selectionEnd;b!==this.__selectionStartOnMouseDown&&(b>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=b):(this.selectionStart=b,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===c&&this.selectionEnd===d||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){if(this.hiddenTextarea&&!this.inCompositionMode&&(this.cursorOffsetCache={},this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd,this.selectionStart===this.selectionEnd)){var a=this._calcTextareaPosition();this.hiddenTextarea.style.left=a.left,this.hiddenTextarea.style.top=a.top,this.hiddenTextarea.style.fontSize=a.fontSize}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var a=this.text.split(""),b=this._getCursorBoundaries(a,"cursor"),c=this.get2DCursorLocation(),d=c.lineIndex,e=c.charIndex,f=this.getCurrentCharFontSize(d,e),g=0===d&&0===e?this._getLineLeftOffset(this._getLineWidth(this.ctx,d)):b.leftOffset,h=this.calcTransformMatrix(),i={x:b.left+g,y:b.top+b.topOffset+f},j=this.canvas.upperCanvasEl,k=j.width-f,l=j.height-f;return i=fabric.util.transformPoint(i,h),i=fabric.util.transformPoint(i,this.canvas.viewportTransform),i.x<0&&(i.x=0),i.x>k&&(i.x=k),i.y<0&&(i.y=0),i.y>l&&(i.y=l),i.x+=this.canvas._offset.left,i.y+=this.canvas._offset.top,{left:i.x+"px",top:i.y+"px",fontSize:f}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var a=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea.blur&&this.hiddenTextarea.blur(),this.hiddenTextarea&&this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),a&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),a&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var a in this.styles)this._textLines[a]||delete this.styles[a]},_removeCharsFromTo:function(a,b){for(;b!==a;)this._removeSingleCharAndStyle(a+1),b--;this.selectionStart=a,this.selectionEnd=a},_removeSingleCharAndStyle:function(a){var b="\n"===this.text[a-1],c=b?a:a-1;this.removeStyleObject(b,c),this.text=this.text.slice(0,a-1)+this.text.slice(a),this._textLines=this._splitTextIntoLines()},insertChars:function(a,b){var c;if(this.selectionEnd-this.selectionStart>1&&this._removeCharsFromTo(this.selectionStart,this.selectionEnd),!b&&this.isEmptyStyles())return void this.insertChar(a,!1);for(var d=0,e=a.length;d<e;d++)b&&(c=fabric.util.object.clone(fabric.copiedTextStyle[d],!0)),this.insertChar(a[d],d<e-1,c)},insertChar:function(a,b,c){var d="\n"===this.text[this.selectionStart];this.text=this.text.slice(0,this.selectionStart)+a+this.text.slice(this.selectionEnd),this._textLines=this._splitTextIntoLines(),this.insertStyleObjects(a,d,c),this.selectionStart+=a.length,this.selectionEnd=this.selectionStart,b||(this._updateTextarea(),this.setCoords(),this._fireSelectionChanged(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this}),this.canvas&&this.canvas.renderAll())},insertNewlineStyleObject:function(b,c,d){this.shiftLineStyles(b,1),this.styles[b+1]||(this.styles[b+1]={});var e={},f={};if(this.styles[b]&&this.styles[b][c-1]&&(e=this.styles[b][c-1]),d)f[0]=a(e),this.styles[b+1]=f;else{for(var g in this.styles[b])parseInt(g,10)>=c&&(f[parseInt(g,10)-c]=this.styles[b][g],delete this.styles[b][g]);this.styles[b+1]=f}this._forceClearCache=!0},insertCharStyleObject:function(b,c,d){var e=this.styles[b],f=a(e);0!==c||d||(c=1);for(var g in f){var h=parseInt(g,10);h>=c&&(e[h+1]=f[h],f[h-1]||delete e[h])}this.styles[b][c]=d||a(e[c-1]),this._forceClearCache=!0},insertStyleObjects:function(a,b,c){var d=this.get2DCursorLocation(),e=d.lineIndex,f=d.charIndex;this._getLineStyle(e)||this._setLineStyle(e,{}),"\n"===a?this.insertNewlineStyleObject(e,f,b):this.insertCharStyleObject(e,f,c)},shiftLineStyles:function(b,c){var d=a(this.styles);for(var e in this.styles){var f=parseInt(e,10);f>b&&(this.styles[f+c]=d[f],d[f-c]||delete this.styles[f])}},removeStyleObject:function(a,b){var c=this.get2DCursorLocation(b),d=c.lineIndex,e=c.charIndex;this._removeStyleObject(a,c,d,e)},_getTextOnPreviousLine:function(a){return this._textLines[a-1]},_removeStyleObject:function(b,c,d,e){if(b){var f=this._getTextOnPreviousLine(c.lineIndex),g=f?f.length:0;this.styles[d-1]||(this.styles[d-1]={});for(e in this.styles[d])this.styles[d-1][parseInt(e,10)+g]=this.styles[d][e];this.shiftLineStyles(c.lineIndex,-1)}else{var h=this.styles[d];h&&delete h[e];var i=a(h);for(var j in i){var k=parseInt(j,10);k>=e&&0!==k&&(h[k-1]=i[k],delete h[k])}}},insertNewline:function(){this.insertChars("\n")},setSelectionStartEndWithShift:function(a,b,c){c<=a?(b===a?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=a),this.selectionStart=c):c>a&&c<b?"right"===this._selectionDirection?this.selectionEnd=c:this.selectionStart=c:(b===a?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=b),this.selectionEnd=c)},setSelectionInBoundaries:function(){var a=this.text.length;this.selectionStart>a?this.selectionStart=a:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>a?this.selectionEnd=a:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(a){this.__newClickTime=+new Date;var b=this.canvas.getPointer(a.e);this.isTripleClick(b)?(this.fire("tripleclick",a),this._stopEvent(a.e)):this.isDoubleClick(b)&&(this.fire("dblclick",a),this._stopEvent(a.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=b,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(a){return this.__newClickTime-this.__lastClickTime<500&&this.__lastPointer.x===a.x&&this.__lastPointer.y===a.y&&this.__lastIsEditing},isTripleClick:function(a){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===a.x&&this.__lastPointer.y===a.y},_stopEvent:function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()},initCursorSelectionHandlers:function(){this.initSelectedHandler(),this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",function(a){this.selectWord(this.getSelectionStartFromPointer(a.e))}),this.on("tripleclick",function(a){this.selectLine(this.getSelectionStartFromPointer(a.e))})},initMousedownHandler:function(){this.on("mousedown",function(a){if(this.editable){var b=this.canvas.getPointer(a.e);this.__mousedownX=b.x,this.__mousedownY=b.y,this.__isMousedown=!0,this.selected&&this.setCursorByClick(a.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())}})},_isObjectMoved:function(a){var b=this.canvas.getPointer(a);return this.__mousedownX!==b.x||this.__mousedownY!==b.y},initMouseupHandler:function(){this.on("mouseup",function(a){this.__isMousedown=!1,this.editable&&!this._isObjectMoved(a.e)&&(this.__lastSelected&&!this.__corner&&(this.enterEditing(a.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()),this.selected=!0)})},setCursorByClick:function(a){var b=this.getSelectionStartFromPointer(a),c=this.selectionStart,d=this.selectionEnd;a.shiftKey?this.setSelectionStartEndWithShift(c,d,b):(this.selectionStart=b,this.selectionEnd=b),this._fireSelectionChanged(),this._updateTextarea()},getSelectionStartFromPointer:function(a){for(var b,c=this.getLocalPointer(a),d=0,e=0,f=0,g=0,h=0,i=this._textLines.length;h<i;h++){b=this._textLines[h],f+=this._getHeightOfLine(this.ctx,h)*this.scaleY;var j=this._getLineWidth(this.ctx,h);e=this._getLineLeftOffset(j)*this.scaleX;for(var k=0,l=b.length;k<l;k++){if(d=e,e+=this._getWidthOfChar(this.ctx,b[k],h,this.flipX?l-k:k)*this.scaleX,!(f<=c.y||e<=c.x))return this._getNewSelectionStartFromOffset(c,d,e,g+h,l);g++}if(c.y<f)return this._getNewSelectionStartFromOffset(c,d,e,g+h-1,l)}return this.text.length},_getNewSelectionStartFromOffset:function(a,b,c,d,e){var f=a.x-b,g=c-a.x,h=g>f?0:1,i=d+h;return this.flipX&&(i=e-i),i>this.text.length&&(i=this.text.length),i}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off");var a=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+a.top+"; left: "+a.left+"; opacity: 0; width: 0px; height: 0px; z-index: -999;",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.cut.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},_keysMap:{8:"removeChars",9:"exitEditing",27:"exitEditing",13:"insertNewline",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete"},_ctrlKeysMapUp:{67:"copy",88:"cut"},_ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(a){if(this.isEditing){if(a.keyCode in this._keysMap)this[this._keysMap[a.keyCode]](a);else{if(!(a.keyCode in this._ctrlKeysMapDown&&(a.ctrlKey||a.metaKey)))return;this[this._ctrlKeysMapDown[a.keyCode]](a)}a.stopImmediatePropagation(),a.preventDefault(),a.keyCode>=33&&a.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.renderAll()}},onKeyUp:function(a){return!this.isEditing||this._copyDone?void(this._copyDone=!1):void(a.keyCode in this._ctrlKeysMapUp&&(a.ctrlKey||a.metaKey)&&(this[this._ctrlKeysMapUp[a.keyCode]](a),a.stopImmediatePropagation(),a.preventDefault(),this.canvas&&this.canvas.renderAll()))},onInput:function(a){if(this.isEditing&&!this.inCompositionMode){var b,c,d,e=this.selectionStart||0,f=this.selectionEnd||0,g=this.text.length,h=this.hiddenTextarea.value.length;h>g?(d="left"===this._selectionDirection?f:e,b=h-g,c=this.hiddenTextarea.value.slice(d,d+b)):(b=h-g+f-e,c=this.hiddenTextarea.value.slice(e,e+b)),this.insertChars(c),a.stopPropagation()}},onCompositionStart:function(){this.inCompositionMode=!0,this.prevCompositionLength=0,this.compositionStart=this.selectionStart},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(a){var b=a.data;this.selectionStart=this.compositionStart,this.selectionEnd=this.selectionEnd===this.selectionStart?this.compositionStart+this.prevCompositionLength:this.selectionEnd,this.insertChars(b,!1),this.prevCompositionLength=b.length},forwardDelete:function(a){if(this.selectionStart===this.selectionEnd){if(this.selectionStart===this.text.length)return;this.moveCursorRight(a)}this.removeChars(a)},copy:function(a){if(this.selectionStart!==this.selectionEnd){var b=this.getSelectedText(),c=this._getClipboardData(a);c&&c.setData("text",b),fabric.copiedText=b,fabric.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd),a.stopImmediatePropagation(),a.preventDefault(),this._copyDone=!0}},paste:function(a){var b=null,c=this._getClipboardData(a),d=!0;c?(b=c.getData("text").replace(/\r/g,""),fabric.copiedTextStyle&&fabric.copiedText===b||(d=!1)):b=fabric.copiedText,b&&this.insertChars(b,d),a.stopImmediatePropagation(),a.preventDefault()},cut:function(a){this.selectionStart!==this.selectionEnd&&(this.copy(a),this.removeChars(a))},_getClipboardData:function(a){return a&&a.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(a,b){for(var c,d=this._textLines[a].slice(0,b),e=this._getLineWidth(this.ctx,a),f=this._getLineLeftOffset(e),g=0,h=d.length;g<h;g++)c=d[g],f+=this._getWidthOfChar(this.ctx,c,a,g);return f},getDownCursorOffset:function(a,b){var c=this._getSelectionForOffset(a,b),d=this.get2DCursorLocation(c),e=d.lineIndex;if(e===this._textLines.length-1||a.metaKey||34===a.keyCode)return this.text.length-c;var f=d.charIndex,g=this._getWidthBeforeCursor(e,f),h=this._getIndexOnLine(e+1,g);return this._textLines[e].slice(f).length+h+2},_getSelectionForOffset:function(a,b){return a.shiftKey&&this.selectionStart!==this.selectionEnd&&b?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(a,b){var c=this._getSelectionForOffset(a,b),d=this.get2DCursorLocation(c),e=d.lineIndex;if(0===e||a.metaKey||33===a.keyCode)return-c;var f=d.charIndex,g=this._getWidthBeforeCursor(e,f),h=this._getIndexOnLine(e-1,g),i=this._textLines[e].slice(0,f);return-this._textLines[e-1].length+h-i.length},_getIndexOnLine:function(a,b){for(var c,d=this._getLineWidth(this.ctx,a),e=this._textLines[a],f=this._getLineLeftOffset(d),g=f,h=0,i=0,j=e.length;i<j;i++){var k=e[i],l=this._getWidthOfChar(this.ctx,k,a,i);if((g+=l)>b){c=!0;var m=g-l,n=g,o=Math.abs(m-b);h=Math.abs(n-b)<o?i:i-1;break}}return c||(h=e.length-1),h},moveCursorDown:function(a){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||this._moveCursorUpOrDown("Down",a)},moveCursorUp:function(a){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",a)},_moveCursorUpOrDown:function(a,b){var c="get"+a+"CursorOffset",d=this[c](b,"right"===this._selectionDirection);b.shiftKey?this.moveCursorWithShift(d):this.moveCursorWithoutShift(d),0!==d&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(a){var b="left"===this._selectionDirection?this.selectionStart+a:this.selectionEnd+a;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,b),0!==a},moveCursorWithoutShift:function(a){return a<0?(this.selectionStart+=a,this.selectionEnd=this.selectionStart):(this.selectionEnd+=a,this.selectionStart=this.selectionEnd),0!==a},moveCursorLeft:function(a){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",a)},_move:function(a,b,c){var d;if(a.altKey)d=this["findWordBoundary"+c](this[b]);else{if(!a.metaKey&&35!==a.keyCode&&36!==a.keyCode)return this[b]+="Left"===c?-1:1,!0;d=this["findLineBoundary"+c](this[b])}if(void 0!==typeof d&&this[b]!==d)return this[b]=d,!0},_moveLeft:function(a,b){return this._move(a,b,"Left")},_moveRight:function(a,b){return this._move(a,b,"Right")},moveCursorLeftWithoutShift:function(a){var b=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(b=this._moveLeft(a,"selectionStart")),this.selectionEnd=this.selectionStart,b},moveCursorLeftWithShift:function(a){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(a,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(a,"selectionStart")):void 0},moveCursorRight:function(a){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||this._moveCursorLeftOrRight("Right",a)},_moveCursorLeftOrRight:function(a,b){var c="moveCursor"+a+"With";this._currentCursorOpacity=1,c+=b.shiftKey?"Shift":"outShift",this[c](b)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(a){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(a,"selectionStart"):this.selectionEnd!==this.text.length?(this._selectionDirection="right",this._moveRight(a,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(a){var b=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(b=this._moveRight(a,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,b},removeChars:function(a){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(a):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.set("dirty",!0),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(a){if(0!==this.selectionStart)if(a.metaKey){var b=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(b,this.selectionStart),this.setSelectionStart(b)}else if(a.altKey){var c=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(c,this.selectionStart),this.setSelectionStart(c)}else this._removeSingleCharAndStyle(this.selectionStart),this.setSelectionStart(this.selectionStart-1)}}),function(){var a=fabric.util.toFixed,b=fabric.Object.NUM_FRACTION_DIGITS;fabric.util.object.extend(fabric.IText.prototype,{_setSVGTextLineText:function(a,b,c,d,e,f){this._getLineStyle(a)?this._setSVGTextLineChars(a,b,c,d,f):fabric.Text.prototype._setSVGTextLineText.call(this,a,b,c,d,e)},_setSVGTextLineChars:function(a,b,c,d,e){for(var f=this._textLines[a],g=0,h=this._getLineLeftOffset(this._getLineWidth(this.ctx,a))-this.width/2,i=this._getSVGLineTopOffset(a),j=this._getHeightOfLine(this.ctx,a),k=0,l=f.length;k<l;k++){var m=this._getStyleDeclaration(a,k)||{};b.push(this._createTextCharSpan(f[k],m,h,i.lineTop+i.offset,g));var n=this._getWidthOfChar(this.ctx,f[k],a,k);m.textBackgroundColor&&e.push(this._createTextCharBg(m,h,i.lineTop,j,n,g)),g+=n}},_getSVGLineTopOffset:function(a){for(var b=0,c=0,d=0;d<a;d++)b+=this._getHeightOfLine(this.ctx,d);return c=this._getHeightOfLine(this.ctx,d),{lineTop:b,offset:(this._fontSizeMult-this._fontSizeFraction)*c/(this.lineHeight*this._fontSizeMult)}},_createTextCharBg:function(c,d,e,f,g,h){return['\t\t<rect fill="',c.textBackgroundColor,'" x="',a(d+h,b),'" y="',a(e-this.height/2,b),'" width="',a(g,b),'" height="',a(f/this.lineHeight,b),'"></rect>\n'].join("")},_createTextCharSpan:function(c,d,e,f,g){var h=this.getSvgStyles.call(fabric.util.object.extend({visible:!0,fill:this.fill,stroke:this.stroke,type:"text",getSvgFilter:fabric.Object.prototype.getSvgFilter},d));return['\t\t\t<tspan x="',a(e+g,b),'" y="',a(f-this.height/2,b),'" ',d.fontFamily?'font-family="'+d.fontFamily.replace(/"/g,"'")+'" ':"",d.fontSize?'font-size="'+d.fontSize+'" ':"",d.fontStyle?'font-style="'+d.fontStyle+'" ':"",d.fontWeight?'font-weight="'+d.fontWeight+'" ':"",d.textDecoration?'text-decoration="'+d.textDecoration+'" ':"",'style="',h,'">',fabric.util.string.escapeXml(c),"</tspan>\n"].join("")}})}(),function(a){"use strict";var b=a.fabric||(a.fabric={});b.Textbox=b.util.createClass(b.IText,b.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingY:!0,lockScalingFlip:!0,noScaleCache:!1,initialize:function(a,c){this.callSuper("initialize",a,c),this.setControlsVisibility(b.Textbox.getTextboxControlVisibility()),this.ctx=this.objectCaching?this._cacheContext:b.util.createCanvasElement().getContext("2d"),this._dimensionAffectingProps.push("width")},_initDimensions:function(a){this.__skipDimension||(a||(a=b.util.createCanvasElement().getContext("2d"),this._setTextStyles(a),this.clearContextTop()),this.dynamicMinWidth=0,this._textLines=this._splitTextIntoLines(a),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this._clearCache(),this.height=this._getTextHeight(a))},_generateStyleMap:function(){for(var a=0,b=0,c=0,d={},e=0;e<this._textLines.length;e++)"\n"===this.text[c]&&e>0?(b=0,c++,a++):" "===this.text[c]&&e>0&&(b++,c++),d[e]={line:a,offset:b},c+=this._textLines[e].length,b+=this._textLines[e].length;return d},_getStyleDeclaration:function(a,b,c){if(this._styleMap){var d=this._styleMap[a];if(!d)return c?{}:null;a=d.line,b=d.offset+b}return this.callSuper("_getStyleDeclaration",a,b,c)},_setStyleDeclaration:function(a,b,c){var d=this._styleMap[a];a=d.line,b=d.offset+b,this.styles[a][b]=c},_deleteStyleDeclaration:function(a,b){var c=this._styleMap[a];a=c.line,b=c.offset+b,delete this.styles[a][b]},_getLineStyle:function(a){var b=this._styleMap[a];return this.styles[b.line]},_setLineStyle:function(a,b){var c=this._styleMap[a];this.styles[c.line]=b},_deleteLineStyle:function(a){var b=this._styleMap[a];delete this.styles[b.line]},_wrapText:function(a,b){var c,d=b.split(this._reNewline),e=[];for(c=0;c<d.length;c++)e=e.concat(this._wrapLine(a,d[c],c));return e},_measureText:function(a,b,c,d){var e=0;d=d||0;for(var f=0,g=b.length;f<g;f++)e+=this._getWidthOfChar(a,b[f],c,f+d);return e},_wrapLine:function(a,b,c){for(var d=0,e=[],f="",g=b.split(" "),h="",i=0,j=0,k=0,l=0,m=!0,n=this._getWidthOfCharSpacing(),o=0;o<g.length;o++)h=g[o],j=this._measureText(a,h,c,i),i+=h.length,d+=k+j-n,d>=this.width&&!m?(e.push(f),f="",d=j,m=!0):d+=n,m||(f+=" "),f+=h,k=this._measureText(a," ",c,i),i++,m=!1,j>l&&(l=j);return o&&e.push(f),l>this.dynamicMinWidth&&(this.dynamicMinWidth=l-n),e},_splitTextIntoLines:function(a){a=a||this.ctx;var b=this.textAlign;this._styleMap=null,a.save(),this._setTextStyles(a),this.textAlign="left";var c=this._wrapText(a,this.text);return this.textAlign=b,a.restore(),this._textLines=c,this._styleMap=this._generateStyleMap(),c},setOnGroup:function(a,b){"scaleX"===a&&(this.set("scaleX",Math.abs(1/b)),this.set("width",this.get("width")*b/(void 0===this.__oldScaleX?1:this.__oldScaleX)),this.__oldScaleX=b)},get2DCursorLocation:function(a){void 0===a&&(a=this.selectionStart);for(var b=this._textLines.length,c=0,d=0;d<b;d++){var e=this._textLines[d],f=e.length;if(a<=c+f)return{lineIndex:d,charIndex:a-c};c+=f,"\n"!==this.text[c]&&" "!==this.text[c]||c++}return{lineIndex:b-1,charIndex:this._textLines[b-1].length}},_getCursorBoundariesOffsets:function(a,b){for(var c=0,d=0,e=this.get2DCursorLocation(),f=this._textLines[e.lineIndex].split(""),g=this._getLineLeftOffset(this._getLineWidth(this.ctx,e.lineIndex)),h=0;h<e.charIndex;h++)d+=this._getWidthOfChar(this.ctx,f[h],e.lineIndex,h);for(h=0;h<e.lineIndex;h++)c+=this._getHeightOfLine(this.ctx,h);return"cursor"===b&&(c+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,e.lineIndex)/this.lineHeight-this.getCurrentCharFontSize(e.lineIndex,e.charIndex)*(1-this._fontSizeFraction)),{top:c,left:d,lineLeft:g}},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},toObject:function(a){return this.callSuper("toObject",["minWidth"].concat(a))}}),b.Textbox.fromObject=function(a,c,d){return b.Object._fromObject("Textbox",a,c,d,"text")},b.Textbox.getTextboxControlVisibility=function(){return{tl:!1,tr:!1,br:!1,bl:!1,ml:!0,mt:!1,mr:!0,mb:!1,mtr:!0}}}("undefined"!=typeof exports?exports:this),function(){var a=fabric.Canvas.prototype._setObjectScale;fabric.Canvas.prototype._setObjectScale=function(b,c,d,e,f,g,h){var i=c.target;if(!(i instanceof fabric.Textbox))return a.call(fabric.Canvas.prototype,b,c,d,e,f,g,h);var j=i.width*(b.x/c.scaleX/(i.width+i.strokeWidth));return j>=i.getMinWidth()?(i.set("width",j),!0):void 0},fabric.Group.prototype._refreshControlsVisibility=function(){if(void 0!==fabric.Textbox)for(var a=this._objects.length;a--;)if(this._objects[a]instanceof fabric.Textbox)return void this.setControlsVisibility(fabric.Textbox.getTextboxControlVisibility())};var b=fabric.util.object.clone;fabric.util.object.extend(fabric.Textbox.prototype,{_removeExtraneousStyles:function(){for(var a in this._styleMap)this._textLines[a]||delete this.styles[this._styleMap[a].line]},insertCharStyleObject:function(a,b,c){var d=this._styleMap[a];a=d.line,b=d.offset+b,fabric.IText.prototype.insertCharStyleObject.apply(this,[a,b,c])},insertNewlineStyleObject:function(a,b,c){var d=this._styleMap[a];a=d.line,b=d.offset+b,fabric.IText.prototype.insertNewlineStyleObject.apply(this,[a,b,c])},shiftLineStyles:function(a,c){var d=b(this.styles);a=this._styleMap[a].line;for(var e in this.styles){var f=parseInt(e,10);f>a&&(this.styles[f+c]=d[f],d[f-c]||delete this.styles[f])}},_getTextOnPreviousLine:function(a){
for(var b=this._textLines[a-1];this._styleMap[a-2]&&this._styleMap[a-2].line===this._styleMap[a-1].line;)b=this._textLines[a-2]+b,a--;return b},removeStyleObject:function(a,b){var c=this.get2DCursorLocation(b),d=this._styleMap[c.lineIndex],e=d.line,f=d.offset+c.charIndex;this._removeStyleObject(a,c,e,f)}})}(),function(){var a=fabric.IText.prototype._getNewSelectionStartFromOffset;fabric.IText.prototype._getNewSelectionStartFromOffset=function(b,c,d,e,f){e=a.call(this,b,c,d,e,f);for(var g=0,h=0,i=0;i<this._textLines.length&&!((g+=this._textLines[i].length)+h>=e);i++)"\n"!==this.text[g+h]&&" "!==this.text[g+h]||h++;return e-i+h}}(),function(){function request(a,b,c){var d=URL.parse(a);d.port||(d.port=0===d.protocol.indexOf("https:")?443:80);var e=0===d.protocol.indexOf("https:")?HTTPS:HTTP,f=e.request({hostname:d.hostname,port:d.port,path:d.path,method:"GET"},function(a){var d="";b&&a.setEncoding(b),a.on("end",function(){c(d)}),a.on("data",function(b){200===a.statusCode&&(d+=b)})});f.on("error",function(a){a.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+d.hostname+":"+d.port):fabric.log(a.message),c(null)}),f.end()}function requestFs(a,b){require("fs").readFile(a,function(a,c){if(a)throw fabric.log(a),a;b(c)})}if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=require("xmldom").DOMParser,URL=require("url"),HTTP=require("http"),HTTPS=require("https"),Canvas=require("canvas"),Image=require("canvas").Image;fabric.util.loadImage=function(a,b,c){function d(d){d?(e.src=new Buffer(d,"binary"),e._src=a,b&&b.call(c,e)):(e=null,b&&b.call(c,null,!0))}var e=new Image;a&&(a instanceof Buffer||0===a.indexOf("data"))?(e.src=e._src=a,b&&b.call(c,e)):a&&0!==a.indexOf("http")?requestFs(a,d):a?request(a,"binary",d):b&&b.call(c,a)},fabric.loadSVGFromURL=function(a,b,c){a=a.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim(),0!==a.indexOf("http")?requestFs(a,function(a){fabric.loadSVGFromString(a.toString(),b,c)}):request(a,"",function(a){fabric.loadSVGFromString(a,b,c)})},fabric.loadSVGFromString=function(a,b,c){var d=(new DOMParser).parseFromString(a);fabric.parseSVGDocument(d.documentElement,function(a,c){b&&b(a,c)},c)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.createCanvasForNode=function(a,b,c,d){d=d||c;var e=fabric.document.createElement("canvas"),f=new Canvas(a||600,b||600,d),g=new Canvas(a||600,b||600,d);e.style={},e.width=f.width,e.height=f.height,c=c||{},c.nodeCanvas=f,c.nodeCacheCanvas=g;var h=fabric.Canvas||fabric.StaticCanvas,i=new h(e,c);return i.nodeCanvas=f,i.nodeCacheCanvas=g,i.contextContainer=f.getContext("2d"),i.contextCache=g.getContext("2d"),i.Font=Canvas.Font,i};var originaInitStatic=fabric.StaticCanvas.prototype._initStatic;fabric.StaticCanvas.prototype._initStatic=function(a,b){a=a||fabric.document.createElement("canvas"),this.nodeCanvas=new Canvas(a.width,a.height),this.nodeCacheCanvas=new Canvas(a.width,a.height),originaInitStatic.call(this,a,b),this.contextContainer=this.nodeCanvas.getContext("2d"),this.contextCache=this.nodeCacheCanvas.getContext("2d"),this.Font=Canvas.Font},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(a){return this.nodeCanvas.createJPEGStream(a)},fabric.StaticCanvas.prototype._initRetinaScaling=function(){if(this._isRetinaScaling())return this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.nodeCanvas.width=this.width*fabric.devicePixelRatio,this.nodeCanvas.height=this.height*fabric.devicePixelRatio,this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio),this},fabric.Canvas&&(fabric.Canvas.prototype._initRetinaScaling=fabric.StaticCanvas.prototype._initRetinaScaling);var origSetBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension;fabric.StaticCanvas.prototype._setBackstoreDimension=function(a,b){return origSetBackstoreDimension.call(this,a,b),this.nodeCanvas[a]=b,this},fabric.Canvas&&(fabric.Canvas.prototype._setBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension)}}(),function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(a,b){return xa.call(a,b)}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function e(a){!1===sa.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function f(a,b){var c=!0;return n(function(){return c&&(e(a),c=!1),b.apply(this,arguments)},b)}function g(a,b){nb[a]||(e(b),nb[a]=!0)}function h(a,b){return function(c){return q(a.call(this,c),b)}}function i(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function j(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function k(){}function l(a,b){!1!==b&&F(a),o(this,a),this._d=new Date(+a._d),!1===pb&&(pb=!0,sa.updateOffset(this),pb=!1)}function m(a){var b=z(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=sa.localeData(),this._bubble()}function n(a,b){for(var d in b)c(b,d)&&(a[d]=b[d]);return c(b,"toString")&&(a.toString=b.toString),c(b,"valueOf")&&(a.valueOf=b.valueOf),a}function o(a,b){var c,d,e;if(void 0!==b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),void 0!==b._i&&(a._i=b._i),void 0!==b._f&&(a._f=b._f),void 0!==b._l&&(a._l=b._l),void 0!==b._strict&&(a._strict=b._strict),void 0!==b._tzm&&(a._tzm=b._tzm),void 0!==b._isUTC&&(a._isUTC=b._isUTC),void 0!==b._offset&&(a._offset=b._offset),void 0!==b._pf&&(a._pf=b._pf),void 0!==b._locale&&(a._locale=b._locale),Ga.length>0)for(c in Ga)d=Ga[c],void 0!==(e=b[d])&&(a[d]=e);return a}function p(a){return 0>a?Math.ceil(a):Math.floor(a)}function q(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function r(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function s(a,b){var c;return b=K(b,a),a.isBefore(b)?c=r(a,b):(c=r(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function t(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(g(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=sa.duration(c,d),u(this,e,a),this}}function u(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d||d,e&&a._d.setTime(+a._d+e*c),f&&na(a,"Date",ma(a,"Date")+f*c),g&&la(a,ma(a,"Month")+g*c),d&&sa.updateOffset(a,f||g)}function v(a){return"[object Array]"===Object.prototype.toString.call(a)}function w(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function x(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&A(a[d])!==A(b[d]))&&g++;return g+f}function y(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=gb[a]||hb[b]||b}return a}function z(a){var b,d,e={};for(d in a)c(a,d)&&(b=y(d))&&(e[b]=a[d]);return e}function A(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function B(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function C(a,b,c){return ha(sa([a,11,31+b-c]),b,c).week}function D(a){return E(a)?366:365}function E(a){return a%4==0&&a%100!=0||a%400==0}function F(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[za]<0||a._a[za]>11?za:a._a[Aa]<1||a._a[Aa]>B(a._a[ya],a._a[za])?Aa:a._a[Ba]<0||a._a[Ba]>24||24===a._a[Ba]&&(0!==a._a[Ca]||0!==a._a[Da]||0!==a._a[Ea])?Ba:a._a[Ca]<0||a._a[Ca]>59?Ca:a._a[Da]<0||a._a[Da]>59?Da:a._a[Ea]<0||a._a[Ea]>999?Ea:-1,a._pf._overflowDayOfYear&&(ya>b||b>Aa)&&(b=Aa),a._pf.overflow=b)}function G(b){return null==b._isValid&&(b._isValid=!isNaN(b._d.getTime())&&b._pf.overflow<0&&!b._pf.empty&&!b._pf.invalidMonth&&!b._pf.nullInput&&!b._pf.invalidFormat&&!b._pf.userInvalidated,b._strict&&(b._isValid=b._isValid&&0===b._pf.charsLeftOver&&0===b._pf.unusedTokens.length&&b._pf.bigHour===a)),b._isValid}function H(a){return a?a.toLowerCase().replace("_","-"):a}function I(a){for(var b,c,d,e,f=0;f<a.length;){for(e=H(a[f]).split("-"),b=e.length,c=H(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=J(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&x(e,c,!0)>=b-1)break;b--}f++}return null}function J(a){var b=null;if(!Fa[a]&&Ha)try{b=sa.locale(),require("./locale/"+a),sa.locale(b)}catch(a){}return Fa[a]}function K(a,b){var c,d;return b._isUTC?(c=b.clone(),d=(sa.isMoment(a)||w(a)?+a:+sa(a))-+c,c._d.setTime(+c._d+d),sa.updateOffset(c,!1),c):sa(a).local()}function L(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function M(a){var b,c,d=a.match(La);for(b=0,c=d.length;c>b;b++)d[b]=mb[d[b]]?mb[d[b]]:L(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function N(a,b){return a.isValid()?(b=O(b,a.localeData()),ib[b]||(ib[b]=M(b)),ib[b](a)):a.localeData().invalidDate()}function O(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Ma.lastIndex=0;d>=0&&Ma.test(a);)a=a.replace(Ma,c),Ma.lastIndex=0,d-=1;return a}function P(a,b){var c=b._strict;switch(a){case"Q":return Xa;case"DDDD":return Za;case"YYYY":case"GGGG":case"gggg":return c?$a:Pa;case"Y":case"G":case"g":return ab;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return c?_a:Qa;case"S":if(c)return Xa;case"SS":if(c)return Ya;case"SSS":if(c)return Za;case"DDD":return Oa;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Sa;case"a":case"A":return b._locale._meridiemParse;case"x":return Va;case"X":return Wa;case"Z":case"ZZ":return Ta;case"T":return Ua;case"SSSS":return Ra;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return c?Ya:Na;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Na;case"Do":return c?b._locale._ordinalParse:b._locale._ordinalParseLenient;default:return new RegExp(Y(X(a.replace("\\",""))))}}function Q(a){a=a||"";var b=a.match(Ta)||[],c=b[b.length-1]||[],d=(c+"").match(eb)||["-",0,0],e=60*d[1]+A(d[2]);return"+"===d[0]?e:-e}function R(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[za]=3*(A(b)-1));break;case"M":case"MM":null!=b&&(e[za]=A(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b,a,c._strict),null!=d?e[za]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Aa]=A(b));break;case"Do":null!=b&&(e[Aa]=A(parseInt(b.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=A(b));break;case"YY":e[ya]=sa.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[ya]=A(b);break;case"a":case"A":c._meridiem=b;break;case"h":case"hh":c._pf.bigHour=!0;case"H":case"HH":e[Ba]=A(b);break;case"m":case"mm":e[Ca]=A(b);break;case"s":case"ss":e[Da]=A(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Ea]=A(1e3*("0."+b));break;case"x":c._d=new Date(A(b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=Q(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=A(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=sa.parseTwoDigitYear(b)}}function S(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[ya],ha(sa(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[ya],ha(sa(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=ia(d,e,f,h,g),a._a[ya]=i.year,a._dayOfYear=i.dayOfYear}function T(a){var c,d,e,f,g=[];if(!a._d){for(e=V(a),a._w&&null==a._a[Aa]&&null==a._a[za]&&S(a),a._dayOfYear&&(f=b(a._a[ya],e[ya]),a._dayOfYear>D(f)&&(a._pf._overflowDayOfYear=!0),d=da(f,0,a._dayOfYear),a._a[za]=d.getUTCMonth(),a._a[Aa]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];24===a._a[Ba]&&0===a._a[Ca]&&0===a._a[Da]&&0===a._a[Ea]&&(a._nextDay=!0,a._a[Ba]=0),a._d=(a._useUTC?da:ca).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[Ba]=24)}}function U(a){var b;a._d||(b=z(a._i),a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],T(a))}function V(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function W(b){if(b._f===sa.ISO_8601)return void $(b);b._a=[],b._pf.empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=O(b._f,b._locale).match(La)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(P(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&b._pf.unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),mb[f]?(d?b._pf.empty=!1:b._pf.unusedTokens.push(f),R(f,d,b)):b._strict&&!d&&b._pf.unusedTokens.push(f);b._pf.charsLeftOver=i-k,h.length>0&&b._pf.unusedInput.push(h),!0===b._pf.bigHour&&b._a[Ba]<=12&&(b._pf.bigHour=a),b._a[Ba]=j(b._locale,b._a[Ba],b._meridiem),T(b),F(b)}function X(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function Y(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(a){var b,c,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(NaN));for(f=0;f<a._f.length;f++)g=0,b=o({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=d(),b._f=a._f[f],W(b),G(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,c=b));n(a,c||b)}function $(a){var b,c,d=a._i,e=bb.exec(d);if(e){for(a._pf.iso=!0,b=0,c=cb.length;c>b;b++)if(cb[b][1].exec(d)){a._f=cb[b][0]+(e[6]||" ");break}for(b=0,c=db.length;c>b;b++)if(db[b][1].exec(d)){a._f+=db[b][0];break}d.match(Ta)&&(a._f+="Z"),W(a)}else a._isValid=!1}function _(a){$(a),!1===a._isValid&&(delete a._isValid,sa.createFromInputFallback(a))}function aa(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function ba(b){var c,d=b._i;d===a?b._d=new Date:w(d)?b._d=new Date(+d):null!==(c=Ia.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?_(b):v(d)?(b._a=aa(d.slice(0),function(a){return parseInt(a,10)}),T(b)):"object"==typeof d?U(b):"number"==typeof d?b._d=new Date(d):sa.createFromInputFallback(b)}function ca(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function da(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ea(a,b){if("string"==typeof a)if(isNaN(a)){if("number"!=typeof(a=b.weekdaysParse(a)))return null}else a=parseInt(a,10);return a}function fa(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function ga(a,b,c){var d=sa.duration(a).abs(),e=wa(d.as("s")),f=wa(d.as("m")),g=wa(d.as("h")),h=wa(d.as("d")),i=wa(d.as("M")),j=wa(d.as("y")),k=e<jb.s&&["s",e]||1===f&&["m"]||f<jb.m&&["mm",f]||1===g&&["h"]||g<jb.h&&["hh",g]||1===h&&["d"]||h<jb.d&&["dd",h]||1===i&&["M"]||i<jb.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,fa.apply({},k)}function ha(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=sa(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ia(a,b,c,d,e){var f,g,h=da(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:D(a-1)+g}}function ja(b){var c,d=b._i,e=b._f;return b._locale=b._locale||sa.localeData(b._l),null===d||e===a&&""===d?sa.invalid({nullInput:!0}):("string"==typeof d&&(b._i=d=b._locale.preparse(d)),sa.isMoment(d)?new l(d,!0):(e?v(e)?Z(b):W(b):ba(b),c=new l(b),c._nextDay&&(c.add(1,"d"),c._nextDay=a),c))}function ka(a,b){var c,d;if(1===b.length&&v(b[0])&&(b=b[0]),!b.length)return sa();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function la(a,b){var c;return"string"==typeof b&&"number"!=typeof(b=a.localeData().monthsParse(b))?a:(c=Math.min(a.date(),B(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function ma(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function na(a,b,c){return"Month"===b?la(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function oa(a,b){return function(c){return null!=c?(na(this,a,c),sa.updateOffset(this,b),this):ma(this,a)}}function pa(a){return 400*a/146097}function qa(a){return 146097*a/400}function ra(a){"undefined"==typeof ender&&(ta=va.moment,va.moment=a?f("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",sa):sa)}for(var sa,ta,ua,va="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,wa=Math.round,xa=Object.prototype.hasOwnProperty,ya=0,za=1,Aa=2,Ba=3,Ca=4,Da=5,Ea=6,Fa={},Ga=[],Ha="undefined"!=typeof module&&module&&module.exports,Ia=/^\/?Date\((\-?\d+)/i,Ja=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ka=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,La=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Ma=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Na=/\d\d?/,Oa=/\d{1,3}/,Pa=/\d{1,4}/,Qa=/[+\-]?\d{1,6}/,Ra=/\d+/,Sa=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ta=/Z|[\+\-]\d\d:?\d\d/gi,Ua=/T/i,Va=/[\+\-]?\d+/,Wa=/[\+\-]?\d+(\.\d{1,3})?/,Xa=/\d/,Ya=/\d\d/,Za=/\d{3}/,$a=/\d{4}/,_a=/[+-]?\d{6}/,ab=/[+-]?\d+/,bb=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,cb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],db=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],eb=/([\+\-]|\d\d)/gi,fb=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),gb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},hb={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ib={},jb={s:45,m:45,h:22,d:26,M:11},kb="DDD w W M D d".split(" "),lb="M D H h m s w W".split(" "),mb={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return q(this.year()%100,2)},YYYY:function(){return q(this.year(),4)},YYYYY:function(){return q(this.year(),5)},YYYYYY:function(){var a=this.year();return(a>=0?"+":"-")+q(Math.abs(a),6)},gg:function(){return q(this.weekYear()%100,2)},gggg:function(){return q(this.weekYear(),4)},ggggg:function(){return q(this.weekYear(),5)},GG:function(){return q(this.isoWeekYear()%100,2)},GGGG:function(){return q(this.isoWeekYear(),4)},GGGGG:function(){return q(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return A(this.milliseconds()/100)},SS:function(){return q(A(this.milliseconds()/10),2)},SSS:function(){return q(this.milliseconds(),3)},SSSS:function(){return q(this.milliseconds(),3)},Z:function(){var a=this.utcOffset(),b="+";return 0>a&&(a=-a,b="-"),b+q(A(a/60),2)+":"+q(A(a)%60,2)},ZZ:function(){var a=this.utcOffset(),b="+";return 0>a&&(a=-a,b="-"),b+q(A(a/60),2)+q(A(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},nb={},ob=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],pb=!1;kb.length;)ua=kb.pop(),mb[ua+"o"]=function(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}(mb[ua],ua);for(;lb.length;)ua=lb.pop(),mb[ua+ua]=h(mb[ua],2);mb.DDDD=h(mb.DDD,3),n(k.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=sa.utc([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=sa([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.apply(b,[c]):d},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(a){return a},postformat:function(a){return a},week:function(a){return ha(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),sa=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=c,g._l=e,g._strict=f,g._isUTC=!1,g._pf=d(),ja(g)},sa.suppressDeprecationWarnings=!1,sa.createFromInputFallback=f("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),sa.min=function(){return ka("isBefore",[].slice.call(arguments,0))},sa.max=function(){return ka("isAfter",[].slice.call(arguments,0))},sa.utc=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=c,g._strict=f,g._pf=d(),ja(g).utc()},sa.unix=function(a){return sa(1e3*a)},sa.duration=function(a,b){var d,e,f,g,h=a,i=null;return sa.isDuration(a)?h={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(h={},b?h[b]=a:h.milliseconds=a):(i=Ja.exec(a))?(d="-"===i[1]?-1:1,h={y:0,d:A(i[Aa])*d,h:A(i[Ba])*d,m:A(i[Ca])*d,s:A(i[Da])*d,ms:A(i[Ea])*d}):(i=Ka.exec(a))?(d="-"===i[1]?-1:1,f=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*d},h={y:f(i[2]),M:f(i[3]),d:f(i[4]),h:f(i[5]),m:f(i[6]),s:f(i[7]),w:f(i[8])}):null==h?h={}:"object"==typeof h&&("from"in h||"to"in h)&&(g=s(sa(h.from),sa(h.to)),h={},h.ms=g.milliseconds,h.M=g.months),e=new m(h),sa.isDuration(a)&&c(a,"_locale")&&(e._locale=a._locale),e},sa.version="2.9.0",sa.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",sa.ISO_8601=function(){},sa.momentProperties=Ga,sa.updateOffset=function(){},sa.relativeTimeThreshold=function(b,c){return jb[b]!==a&&(c===a?jb[b]:(jb[b]=c,!0))},sa.lang=f("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return sa.locale(a,b)}),sa.locale=function(a,b){var c;return a&&(c=void 0!==b?sa.defineLocale(a,b):sa.localeData(a))&&(sa.duration._locale=sa._locale=c),sa._locale._abbr},sa.defineLocale=function(a,b){return null!==b?(b.abbr=a,Fa[a]||(Fa[a]=new k),Fa[a].set(b),sa.locale(a),Fa[a]):(delete Fa[a],null)},sa.langData=f("moment.langData is deprecated. Use moment.localeData instead.",function(a){return sa.localeData(a)}),sa.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return sa._locale;if(!v(a)){if(b=J(a))return b;a=[a]}return I(a)},sa.isMoment=function(a){return a instanceof l||null!=a&&c(a,"_isAMomentObject")},sa.isDuration=function(a){return a instanceof m};for(ua=ob.length-1;ua>=0;--ua)!function(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}sa[b]=function(e,f){var g,h,i=sa._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=sa().utc().set(d,a);return i.call(sa._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}(ob[ua]);sa.normalizeUnits=function(a){return y(a)},sa.invalid=function(a){var b=sa.utc(NaN);return null!=a?n(b._pf,a):b._pf.userInvalidated=!0,b},sa.parseZone=function(){return sa.apply(null,arguments).parseZone()},sa.parseTwoDigitYear=function(a){return A(a)+(A(a)>68?1900:2e3)},sa.isDate=w,n(sa.fn=l.prototype,{clone:function(){return sa(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=sa(this).utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():N(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return G(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&x(this._a,(this._isUTC?sa.utc(this._a):sa(this._a)).toArray())>0)},parsingFlags:function(){return n({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.utcOffset(0,a)},local:function(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(a){var b=N(this,a||sa.defaultFormat);return this.localeData().postformat(b)},add:t(1,"add"),subtract:t(-1,"subtract"),diff:function(a,b,c){var d,e,f=K(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=y(b),"year"===b||"month"===b||"quarter"===b?(e=i(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:p(e)},from:function(a,b){return sa.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(sa(),a)},calendar:function(a){var b=a||sa(),c=K(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,sa(b)))},isLeapYear:function(){return E(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=ea(a,this.localeData()),this.add(a-b,"d")):b},month:oa("Month",!0),startOf:function(a){switch(a=y(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(b){return b=y(b),b===a||"millisecond"===b?this:this.startOf(b).add(1,"isoWeek"===b?"week":b).subtract(1,"ms")},isAfter:function(a,b){return b=y(void 0!==b?b:"millisecond"),"millisecond"===b?(a=sa.isMoment(a)?a:sa(a),+this>+a):(sa.isMoment(a)?+a:+sa(a))<+this.clone().startOf(b)},isBefore:function(a,b){var c;return b=y(void 0!==b?b:"millisecond"),"millisecond"===b?+(a=sa.isMoment(a)?a:sa(a))>+this:(c=sa.isMoment(a)?+a:+sa(a),+this.clone().endOf(b)<c)},isBetween:function(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)},isSame:function(a,b){var c;return b=y(b||"millisecond"),"millisecond"===b?(a=sa.isMoment(a)?a:sa(a),+this==+a):(c=+sa(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))},min:f("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=sa.apply(null,arguments),this>a?this:a}),max:f("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=sa.apply(null,arguments),a>this?this:a}),zone:f("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}),utcOffset:function(a,b){
var c,d=this._offset||0;return null!=a?("string"==typeof a&&(a=Q(a)),Math.abs(a)<16&&(a*=60),!this._isUTC&&b&&(c=this._dateUtcOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.add(c,"m"),d!==a&&(!b||this._changeInProgress?u(this,sa.duration(a-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,sa.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?d:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Q(this._i)),this},hasAlignedHourOffset:function(a){return a=a?sa(a).utcOffset():0,(this.utcOffset()-a)%60==0},daysInMonth:function(){return B(this.year(),this.month())},dayOfYear:function(a){var b=wa((sa(this).startOf("day")-sa(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=ha(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=ha(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=ha(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return C(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return C(this.year(),a.dow,a.doy)},get:function(a){return a=y(a),this[a]()},set:function(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else a=y(a),"function"==typeof this[a]&&this[a](b);return this},locale:function(b){var c;return b===a?this._locale._abbr:(c=sa.localeData(b),null!=c&&(this._locale=c),this)},lang:f("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(b){return b===a?this.localeData():this.locale(b)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),sa.fn.millisecond=sa.fn.milliseconds=oa("Milliseconds",!1),sa.fn.second=sa.fn.seconds=oa("Seconds",!1),sa.fn.minute=sa.fn.minutes=oa("Minutes",!1),sa.fn.hour=sa.fn.hours=oa("Hours",!0),sa.fn.date=oa("Date",!0),sa.fn.dates=f("dates accessor is deprecated. Use date instead.",oa("Date",!0)),sa.fn.year=oa("FullYear",!0),sa.fn.years=f("years accessor is deprecated. Use year instead.",oa("FullYear",!0)),sa.fn.days=sa.fn.day,sa.fn.months=sa.fn.month,sa.fn.weeks=sa.fn.week,sa.fn.isoWeeks=sa.fn.isoWeek,sa.fn.quarters=sa.fn.quarter,sa.fn.toJSON=sa.fn.toISOString,sa.fn.isUTC=sa.fn.isUtc,n(sa.duration.fn=m.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=p(d/1e3),g.seconds=a%60,b=p(a/60),g.minutes=b%60,c=p(b/60),g.hours=c%24,e+=p(c/24),h=p(pa(e)),e-=p(qa(h)),f+=p(e/30),e%=30,h+=p(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return p(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*A(this._months/12)},humanize:function(a){var b=ga(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=sa.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=sa.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=y(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if("month"===(a=y(a))||"year"===a)return b=this._days+this._milliseconds/864e5,c=this._months+12*pa(b),"month"===a?c:c/12;switch(b=this._days+Math.round(qa(this._months/12)),a){case"week":return b/7+this._milliseconds/6048e5;case"day":return b+this._milliseconds/864e5;case"hour":return 24*b+this._milliseconds/36e5;case"minute":return 24*b*60+this._milliseconds/6e4;case"second":return 24*b*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*b*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+a)}},lang:sa.fn.lang,locale:sa.fn.locale,toIsoString:f("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),sa.duration.fn.toString=sa.duration.fn.toISOString;for(ua in fb)c(fb,ua)&&function(a){sa.duration.fn[a]=function(){return this._data[a]}}(ua.toLowerCase());sa.duration.fn.asMilliseconds=function(){return this.as("ms")},sa.duration.fn.asSeconds=function(){return this.as("s")},sa.duration.fn.asMinutes=function(){return this.as("m")},sa.duration.fn.asHours=function(){return this.as("h")},sa.duration.fn.asDays=function(){return this.as("d")},sa.duration.fn.asWeeks=function(){return this.as("weeks")},sa.duration.fn.asMonths=function(){return this.as("M")},sa.duration.fn.asYears=function(){return this.as("y")},sa.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10;return a+(1===A(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),Ha?module.exports=sa:"function"==typeof define&&define.amd?(define(function(a,b,c){return c.config&&c.config()&&!0===c.config().noGlobal&&(va.moment=ta),sa}),ra(!0)):ra()}.call(this),function(){"use strict";function a(a){return angular.isUndefined(a)||null===a}function b(){try{return require("moment")}catch(a){throw new Error("Please install moment via npm. Please reference to: https://github.com/urish/angular-moment")}}function c(c,d){if(void 0===d){if("function"!=typeof require)throw new Error("Moment cannot be found by angular-moment! Please reference to: https://github.com/urish/angular-moment");d=b()}return c.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:null,format:null,statefulFilters:!0}).constant("moment",d).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null,fullDateThreshold:null,fullDateFormat:null,fullDateThresholdUnit:"day"}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig",function(b,d,e,f){return function(g,h,i){function j(){var a;if(p)a=p;else if(f.serverTime){var b=(new Date).getTime(),c=b-w+f.serverTime;a=d(c)}else a=d();return a}function k(){q&&(b.clearTimeout(q),q=null)}function l(a){var c=j().diff(a,v),d=t&&c>=t;if(d?h.text(a.format(u)):h.text(a.from(j(),r)),s&&z&&h.attr("title",a.format(s)),!d){var e=Math.abs(j().diff(a,"minute")),f=3600;e<1?f=1:e<60?f=30:e<180&&(f=300),q=b.setTimeout(function(){l(a)},1e3*f)}}function m(a){y&&h.attr("datetime",a)}function n(){if(k(),o){var a=e.preprocessDate(o);l(a),m(a.toISOString())}}var o,p,q=null,r=f.withoutSuffix,s=f.titleFormat,t=f.fullDateThreshold,u=f.fullDateFormat,v=f.fullDateThresholdUnit,w=(new Date).getTime(),x=i.amTimeAgo,y="TIME"===h[0].nodeName.toUpperCase(),z=!h.attr("title");g.$watch(x,function(b){return a(b)||""===b?(k(),void(o&&(h.text(""),m(""),o=null))):(o=b,void n())}),c.isDefined(i.amFrom)&&g.$watch(i.amFrom,function(b){p=a(b)||""===b?null:d(b),n()}),c.isDefined(i.amWithoutSuffix)&&g.$watch(i.amWithoutSuffix,function(a){"boolean"==typeof a?(r=a,n()):r=f.withoutSuffix}),i.$observe("amFullDateThreshold",function(a){t=a,n()}),i.$observe("amFullDateFormat",function(a){u=a,n()}),i.$observe("amFullDateThresholdUnit",function(a){v=a,n()}),g.$on("$destroy",function(){k()}),g.$on("amMoment:localeChanged",function(){n()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(a,b,d,e){var f=null;this.changeLocale=function(d,e){var f=a.locale(d,e);return c.isDefined(d)&&b.$broadcast("amMoment:localeChanged"),f},this.changeTimezone=function(c){a.tz&&a.tz.setDefault?(a.tz.setDefault(c),b.$broadcast("amMoment:timezoneChanged")):d.warn("angular-moment: changeTimezone() works only with moment-timezone.js v0.3.0 or greater."),e.timezone=c,f=c},this.preprocessDate=function(b){return f!==e.timezone&&this.changeTimezone(e.timezone),e.preprocess?e.preprocess(b):a(!isNaN(parseFloat(b))&&isFinite(b)?parseInt(b,10):b)}}]).filter("amParse",["moment",function(a){return function(b,c){return a(b,c)}}]).filter("amFromUnix",["moment",function(a){return function(b){return a.unix(b)}}]).filter("amUtc",["moment",function(a){return function(b){return a.utc(b)}}]).filter("amUtcOffset",["amMoment",function(a){function b(b,c){return a.preprocessDate(b).utcOffset(c)}return b}]).filter("amLocal",["moment",function(a){return function(b){return a.isMoment(b)?b.local():null}}]).filter("amTimezone",["amMoment","angularMomentConfig","$log",function(a,b,c){function d(b,d){var e=a.preprocessDate(b);return d?e.tz?e.tz(d):(c.warn("angular-moment: named timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js ?"),e):e}return d}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(b,c,d){function e(b,d,e){if(a(b))return"";var f=c.preprocessDate(b);return f.isValid()?f.calendar(d,e):""}return e.$stateful=d.statefulFilters,e}]).filter("amDifference",["moment","amMoment","angularMomentConfig",function(b,c,d){function e(d,e,f,g){if(a(d))return"";var h=c.preprocessDate(d),i=a(e)?b():c.preprocessDate(e);return h.isValid()&&i.isValid()?h.diff(i,f,g):""}return e.$stateful=d.statefulFilters,e}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(b,c,d){function e(b,d){if(a(b))return"";var e=c.preprocessDate(b);return e.isValid()?e.format(d):""}return e.$stateful=d.statefulFilters,e}]).filter("amDurationFormat",["moment","angularMomentConfig",function(b,c){function d(c,d,e){return a(c)?"":b.duration(c,d).humanize(e)}return d.$stateful=c.statefulFilters,d}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(b,c,d){function e(d,e,f){var g,h;return a(d)?"":(d=c.preprocessDate(d),g=b(d),g.isValid()?(h=b(f),!a(f)&&h.isValid()?g.from(h,e):g.fromNow(e)):"")}return e.$stateful=d.statefulFilters,e}]).filter("amSubtract",["moment","angularMomentConfig",function(b,c){function d(c,d,e){return a(c)?"":b(c).subtract(parseInt(d,10),e)}return d.$stateful=c.statefulFilters,d}]).filter("amAdd",["moment","angularMomentConfig",function(b,c){function d(c,d,e){return a(c)?"":b(c).add(parseInt(d,10),e)}return d.$stateful=c.statefulFilters,d}]).filter("amStartOf",["moment","angularMomentConfig",function(b,c){function d(c,d){return a(c)?"":b(c).startOf(d)}return d.$stateful=c.statefulFilters,d}]).filter("amEndOf",["moment","angularMomentConfig",function(b,c){function d(c,d){return a(c)?"":b(c).endOf(d)}return d.$stateful=c.statefulFilters,d}]),"angularMoment"}var d=window&&window.process&&window.process.type;"function"==typeof define&&define.amd?define(["angular","moment"],c):"undefined"!=typeof module&&module&&module.exports&&"function"==typeof require&&!d?module.exports=c(require("angular"),require("moment")):c(angular,("undefined"!=typeof global?global:window).moment)}(),function(){function a(a,b,c){if(this.timerDuration=a,this.callback=c,this.loop=b.loop,this.started=!1,this.stopped=!1,this.timer,this.startTick,this.endTick,b.start)if(b.wait>0){var d=this;setTimeout(function(){b.executeAfterWait&&c(),d.start()},b.wait)}else this.start()}a.prototype.start=function(){if(!this.started){var a=this;return this.stopped?(setTimeout(function(){return a.callback(),a.start()},this.getRemainingDuration()),this.stopped=!1,!0):(this.loop?this.timer=setInterval(function(){return a.updateStartEndTickFromDuration(a.timerDuration),a.callback()},this.timerDuration):this.timer=setTimeout(function(){return a.started=!1,a.callback()},this.timerDuration),this.updateStartEndTickFromDuration(a.timerDuration),this.started=!0,!0)}return!1},a.prototype.stop=function(){return!!this.started&&(this.clearTimer(),this.updateStartEndTickFromDuration(this.getRemainingDuration()),this.started=!1,this.stopped=!0,!0)},a.prototype.clearTimer=function(){return!!this.timer&&(this.loop?this.timer=clearInterval(this.timer):this.timer=clearTimeout(this.timer),!0)},a.prototype.updateStartEndTickFromDuration=function(a){return this.startTick=Date.now(),this.endTick=this.startTick+a,!0},a.prototype.duration=function(){return arguments.length>0&&(this.timerDuration=b.duration(arguments[0],arguments[1]).asMilliseconds(),this.stop(),this.start(),!0)},a.prototype.getDuration=function(){return this.timerDuration},a.prototype.getRemainingDuration=function(){return this.startTick&&this.endTick?this.stopped?this.endTick-this.startTick:this.endTick-Date.now():0},a.prototype.isStopped=function(){return this.stopped};var b;if("function"==typeof require)try{b=require("moment")}catch(a){}if(!b&&this.moment&&(b=this.moment),!b)throw"Moment Timer cannot find Moment.js";b.duration.fn.timer=function(b,c){if("function"==typeof b)c=b,b={wait:0,loop:!1,start:!0};else{if("object"!=typeof b||"function"!=typeof c)throw new Error("First argument must be of type function or object.");null==b.start&&(b.start=!0)}return new a(this.asMilliseconds(),b,c)}}();var URL=window.URL||window.webkitURL||window.msURL||window.oURL,getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;(function(){"use strict";function a(a){var b=a.channel,c={};b.onclose=function(a){console.log("datachannel is closed")},b.onerror=function(a){console.log("datachannel error")},b.onmessage=function(a){try{var b=JSON.parse(a.data);if("messagePart"===b.type){var e=b.uuid;if(c[e]||(c[e]=[]),c[e].push(b.message),b.last){var f=JSON.parse(JSON.stringify(c[e].join("")));delete c[e],f=JSON.parse(f),"whiteboard"===f.type&&d.emit("whiteboard",{canvasData:f.canvasJson})}}else"whiteboard"===b.type&&d.emit("whiteboard",{canvasData:b.canvasJson})}catch(a){console.log("data channel message error",a)}},b.onopen=function(a){console.log("datachannel is open")}}function b(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()}function c(){return navigator.mozGetUserMedia?{offerToReceiveAudio:!0,offerToReceiveVideo:!0}:{optional:[{DtlsSrtpKeyAgreement:!0}],mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}}}var d;d="undefined"==typeof module?this.prortc={}:module.exports={},d.socket=null,d.selfSocketId=null,d.iceServers={iceServers:[{urls:["stun:prortc.com:3478"],username:"",credential:""},{urls:["turn:45.55.131.122:3478"],username:"navalp",credential:"codiant2016"}]},d.bitrates={audio:50,video:100},d.peerConnections={},d.dataChannels={},d.sockets=[],d.streams=[],d.numStreams=0,d.initializedStreams=0,d._events={},d.userRole,d.remoteStreams={},d.otherSocketId,d.IsConnected=!1,d.noOfCourses=1,d.isConnecting=!1,d.isCourseEnd=!1,d.isMediaFoundError=!1;d.on=function(a,b){d._events[a]=d._events[a]||[],d._events[a].push(b)},d.emit=function(a){var b=d._events[a],c=Array.prototype.slice.call(arguments,1);if(b)for(var e=0,f=b.length;e<f;e++)b[e].apply(null,c)},d.checkSupport=function(){getUserMedia||d.emit("webrtc_not_support")},d.joinRoom=function(a){console.log("room",a.room),d.socket&&a.room&&(d.socket.emit("join_room",a),d.socket.on("room_message",function(a){d.emit("room_message",a)}),d.socket.on("start_timer",function(a){console.log("timer"),d.emit("start_timer",a)}),d.socket.on("get_peers",function(a){d.sockets=a.connections,d.otherSocketId=a.connections[0],d.selfSocketId=a.socketId,d.noOfCourses=a.noOfCourses,console.log(a),d.emit("connections",d.sockets),d.emit("ready")}),d.socket.on("ice_candidate",function(a){var b=new RTCIceCandidate({sdpMLineIndex:a.label,candidate:a.candidate});console.log("ice"),d.peerConnections[a.socketId].addIceCandidate(b),d.emit("ice_candidate",b)}),d.socket.on("new_updated_time",function(a){d.emit("new_updated_time",a)}),d.socket.on("end_updated_time",function(a){d.emit("end_updated_time",a)}),d.socket.on("new_peer",function(a){d.sockets.push(a.socketId),d.emit("new_peer",a),d.otherSocketId=a.socketId;for(var b=d.createPeerConnection(a.socketId),c=0;c<d.streams.length;c++){var e=d.streams[c];b.addStream(e)}d.emit("ready"),setTimeout(function(){d.sendOffers(),d.isConnecting=!0},2e3)}),d.socket.on("remove_peer",function(a){var b=d.sockets.indexOf(a.socketId);b>-1&&d.sockets.splice(b,1),delete d.peerConnections[a.socketId],console.log(" peer connection removed"),d.isMediaFoundError?d.emit("disconnected_peer_wihtout_media",a):d.emit("disconnected_peer",a)}),d.socket.on("receive_offer",function(a){console.log("receive offer"),d.isConnecting=!0,d.receiveOffer(a.socketId,a.sdp),d.emit("receive_offer",a)}),d.socket.on("receive_answer",function(a){console.log("receive answer"),d.isConnecting=!0,d.receiveAnswer(a.socketId,a.sdp),d.emit("receive_answer",a)}),d.socket.on("stop_sharing",function(a){console.log("stop_sharing"),d.emit("switch_stream",a)}),d.socket.on("end_call",function(a){console.log("end call"),d.endCall(),d.isCourseEnd=!0,d.emit("course_ended",a)}),d.socket.on("message",function(a){d.emit("message",a)}),d.socket.on("group_message",function(a){d.emit("group_message",a)}),d.socket.on("extend_time",function(a){d.emit("extend_time",a)}),d.socket.on("extend_time_accepted",function(a){d.emit("extend_time_accepted",a)}),d.socket.on("whiteboard",function(a){d.emit("whiteboard",a)}),d.socket.on("add_text",function(a){d.emit("add_text",a)}),d.socket.on("object:modified",function(a){console.log("recieve modified emit",a),d.emit("object:modified",a)}),d.socket.on("object:added",function(a){d.emit("object:added",a)}),d.socket.on("object:removed",function(a){d.emit("object:removed",a)}),d.socket.on("path:created",function(a){d.emit("path:created",a)}),d.socket.on("allow_student",function(a){d.emit("allow_student",a)}),d.socket.on("room_full",function(a){d.emit("room_full",a)}),d.emit("connect"))},d.init=function(a){d.socket=io.connect(a),d.socket.on("error",function(a){console.log("socket connection error ",a)}),d.socket.on("disconnect",function(){console.log("socket disconnect"),d.emit("socket_disconnect")}),d.socket.on("check_room",function(a){d.emit("check_room",a)})},d.sendOffers=function(){for(var a=0,b=d.sockets.length;a<b;a++){var c=d.sockets[a];d.sendOffer(c)}d.isConnecting=!0},d.onClose=function(a){d.on("close_stream",function(){d.emit("close_stream",a)})},d.createPeerConnections=function(){console.log(d.sockets);for(var a=0;a<d.sockets.length;a++)d.createPeerConnection(d.sockets[a])},d.createPeerConnection=function(b){var c,e={optional:[{googIPv6:!0}]};return c=d.peerConnections[b]=new RTCPeerConnection(d.iceServers,e),(d.dataChannels[b]=c.createDataChannel("datachannel",{reliable:!1})).binaryType="arraybuffer",c.ondatachannel=a,c.onicecandidate=function(a){a.candidate&&d.socket.emit("ice_candidate",{label:a.candidate.sdpMLineIndex,id:a.candidate.sdpMid,candidate:a.candidate.candidate,socketId:b}),d.emit("ice candidate",a.candidate)},c.oniceconnectionstatechange=function(a){console.log("ice connection state ",c.iceConnectionState),"failed"===c.iceConnectionState&&d.emit("ice_failed",{socketId:b})},c.onopen=function(){d.emit("peer connection opened")},c.onaddstream=function(a){d.remoteStreams[b]=a.stream,d.otherSocketId=b,d.attachStream(a.stream,"remote"),d.emit("remote_stream",a.stream,b),d.isConnecting=!1},c},d.sendMessage=function(a,c){function e(a,b){var c={type:"messagePart",uuid:j};a&&(b=a,c.packets=parseInt(b.length/g)),b.length>g?c.message=b.slice(0,g):(c.message=b,c.last=!0),f.send(JSON.stringify(c));var d=b.slice(c.message.length);d.length&&setTimeout(function(){e(null,d)},100)}for(var f,g=5e4,h=0,i=0;i<d.sockets.length;i++)if((f=d.dataChannels[d.sockets[i]])&&"open"===f.readyState){if("object"==typeof a){var a=JSON.stringify(a);h=parseInt(a.length/g),console.log("length",a.length,h);var j=b();e(a)}}else console.log("datachannel is not in open state")},d.sendOffer=function(a){var b;b=d.peerConnections[a],console.log("sending offer"),b.createOffer(function(c){b.setLocalDescription(c),d.socket.emit("send_offer",{socketId:a,sdp:c})},function(a){console.log("offer error",a)},c())},d.receiveOffer=function(a,b){var c;c=d.peerConnections[a],c.setRemoteDescription(new RTCSessionDescription(b)),d.sendAnswer(a)},d.sendAnswer=function(a){var b;b=d.peerConnections[a],console.log("pc state",b.signalingState),b.createAnswer(function(c){b.setLocalDescription(c),console.log("sending answer"),d.socket.emit("send_answer",{socketId:a,sdp:c});b.remoteDescription},function(a){console.log("answer error",a)},c())},d.receiveAnswer=function(a,b){var c;c=d.peerConnections[a],c.setRemoteDescription(new RTCSessionDescription(b))},d.startCall=function(a,b,c){var e;b=b||function(){},c=c||function(){},e={video:!!a.video,audio:!!a.audio},getUserMedia?(d.numStreams++,getUserMedia.call(navigator,e,function(a){d.streams.push(a),d.initializedStreams++,d.addStreams(),b(a)},function(a){d.isMediaFoundError=!0,console.log(a),c(a),d.emit("media_device_error",a)})):(d.isMediaFoundError=!0,c(error),d.emit("webrtc_not_support"))},d.addStreams=function(){for(var a=0;a<d.streams.length;a++){var b=d.streams[a];for(var c in d.peerConnections)d.peerConnections[c].addStream(b)}},d.attachStream=function(a,b){var c=document.querySelector("#"+b);navigator.mozGetUserMedia&&(c.srcObject=a),c.srcObject=a},d.detachStream=function(a){var b=document.querySelector("#"+a);navigator.mozGetUserMedia?b.srcObject=null:b.src=""},d.setTrackToggle=function(a){for(var b=0;b<a.length;b++)a[b].enabled=!a[b].enabled},d.muteVideoToggle=function(){var a=d.streams[0].getVideoTracks();d.setTrackToggle(a)},d.muteAudioToggle=function(){var a=d.streams[0].getAudioTracks();d.setTrackToggle(a)},d.endCall=function(){d.detachStream("local"),d.detachStream("remote"),d.socket.emit("end_call",{});for(var a=0;a<d.sockets.length;a++){var b=d.sockets.indexOf(d.sockets[a]);b>-1&&d.sockets.splice(b,1),delete d.peerConnections[d.sockets[a]],console.log(" peer connection removed"),d.emit("disconnected_peer",d.sockets[a])}d.socket.disconnect()},d.on("ready",function(){d.createPeerConnections(),d.addStreams()})}).call(this);